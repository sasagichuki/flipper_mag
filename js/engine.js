(function(b,r){b.widget("mobile.Install",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Install')"},is_server_secured:!0,how_is_it_retarded:"No",you_tubed:!1,will_authenticate:!0,integrity:!0,opf_material:null,flipbook_id:null,password:null,trial:!1,brake:!1,FlipAnalyzer:{url:null,token:null,when:0,language:{ENG:"en",CHS:"zh-CN",DEU:"de"}},author_id:null,publisher:null,font_size:0,video_MIME:{Intel:["MP4"],iOS:["MP4"],Surface:["MP4"],Android:["MP4"]},audio_MIME:{Intel:["MP3"],
iOS:["MP3"],Surface:["MP3"],Android:["MP3"]},link_defines:[],frame_embeds:[],video_embeds:[],audio_embeds:[],pages_per_mirage:0,orientation:null,tangent:"Differentiable",client_width:0,client_height:0,page_width_real:0,page_height_real:0,page_width:0,page_height:0,page_top:0,magnify_width:0,magnify_height:0,mirages_coming_preload:2,mirages_previous_preload:2,page_converge:1,page_diverge:0,page_total:0,first_page_at:0,pageId_to_pageNumber:[],numbering:[],numbering_length:0,identified:[],discrepancy:{div:36/
26,table:59/52,input:2.5},watermarking:null,preposition:' ~`!@#$%^&*()_-+={}[]:;"<>.?/|\\'.split(""),_create:function(){window.Install=this;var a=this;this.font_size=parseInt(b("span").css("font-size"));"Surface"===browser.platform&&b("body").css("touch-action","none");b("img").css(browser.prefix+"touch-callout","none").css(browser.prefix+"user-select","none");"Intel"===browser.platform&&"Safari"===browser.name&&(this.how_is_it_retarded="Intel_Safari");"Surface"===browser.platform&&(this.how_is_it_retarded=
"Surface");if("Intel"!==browser.platform||"Firefox"!==browser.name){var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}"Android"===browser.platform&&(this.discrepancy.div=34/26,this.discrepancy.table=58/52,this.discrepancy.input=1.5);this.measure();window.Global.viewer_URL=window.Personalize.behind_barrier?window.location.href.substring(0,window.location.href.lastIndexOf("/")+1):decodeURI(document.location.protocol+
"//"+document.location.host+document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1));window.Global.localize_URL=window.Utility.absolutizeURL(window.Global.viewer_URL,window.Global.localize_URL);window.Global.parameter_URL=window.Utility.absolutizeURL(window.Global.viewer_URL,window.Global.parameter_URL);c="5px 5px 5px 5px";if("iPhone"===device.name||"GalaxyS2"===device.name||"GalaxyS3"===device.name)c="3px 3px 3px 3px";b("#Defense").find("div:first-child").find("span:last-child").hide();
b("#Defense").css(browser.prefix+"border-radius",c);b("#Defense input").val("");b("#Defense input").keypress(function(c){13==c.which&&(this.blur(),a.authenticate());""==b("#Defense input").val()&&(b("#Defense").find("div:first-child").find("span:last-child").hide(),b("#Defense").find("div:first-child").find("span:first-child").show())});b("#Defense input").bind("Intel"===browser.platform?"click":"tap",function(){b(this).focus()});b("#Defense button").bind("Intel"===browser.platform?"click":"tap",
function(){a.authenticate()});b("#Pulley").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/drag.png")+")");b("#Laplace").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/laplace.png")+")");b("#Derivative").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/derivative.png")+")");b("#Seek").find("input").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,
"skin/searching.png")+")")},setUp:function(){this.getLocalizeXML();b.ajax({url:window.Global.parameter_URL,dataType:"script",error:function(){window.Global.parameter_URL=window.Global.parameter_URL.substring(0,window.Global.parameter_URL.lastIndexOf("."))+"ia.js"},async:!1});b("body").append('<script type="text/javascript" src="'+window.Global.parameter_URL+'">\x3c/script>');this.parameterPrepare();this.setUp_()},setUp_:function(){if(null==window.Global.OPF){var a=this;window.setTimeout(function(){a.setUp_()},
300)}else this.will_authenticate||null==window.Navigate||(window.Navigate.is_it_defensed=!1),""!=window.Global.OPF&&(this.will_authenticate&&this.verifyIntegrity(),this.integrity&&this.getOPFXML(),window.Tagged.setUp())},getLocalizeXML:function(){var a=new XML.ObjTree;a.attr_prefix="@";var c=window.Global.localize_URL;if("file:///"==c.substring(0,8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");
d.async=!1;d.load(c);d.parseError&&0!=d.parseError.errorCode||d.documentElement&&"parsererror"==d.documentElement.nodeName||this.parseLocalize(a.parseDOM(d))}catch(b){try{d=document.implementation.createDocument("","",null),d.async=!1,d.load(c),d.documentElement&&"parsererror"==d.documentElement.nodeName||this.parseLocalize(a.parseDOM(d))}catch(g){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.overrideMimeType&&e.overrideMimeType("text/xml");e.open("GET",c,
!1);e.send(null);null!=e.responseXML?this.parseLocalize(a.parseDOM(e.responseXML)):null!=e.responseText&&(window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseLocalize(a.parseDOM(d))):this.parseLocalize(a.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml"))))}}},parseLocalize:function(a){a&&a["#document"]&&a["#document"].localize&&a["#document"].localize.original&&window.Localize.setUp(a["#document"].localize.original)},
parameterPrepare:function(){if("undefined"==typeof window.Parameter){var a=this;window.setTimeout(function(){a.parameterPrepare()},300)}else if(null!=window.Utility.getParameter("locale")&&(window.Parameter.locale=window.Utility.getParameter("locale")),window.Localize.setLanguage(window.Parameter.locale),b("span").each(function(){b(this).text(window.Localize.translate(b(this).text()))}),window.World.setUp(),null!=window.Utility.getParameter("opf")&&(window.Parameter.opf=window.Utility.getParameter("opf")),
null==window.Parameter.opf)window.Localize.alert("OPF is unspecified."),null!=window.Navigate&&window.Navigate.unauthenticate("OPF Absent"),window.Global.OPF="";else{window.Parameter.opf=decodeURI(window.Parameter.opf);"http://"!=window.Parameter.opf.substring(0,7)&&"https://"!=window.Parameter.opf.substring(0,8)?window.Global.OPF=window.Utility.absolutizeURL(window.Global.viewer_URL,window.Parameter.opf):window.Global.OPF=window.Parameter.opf;window.Global.root_URL=window.Global.OPF.substring(0,
window.Global.OPF.lastIndexOf("/")+1);null!=window.Utility.getParameter("launchpage")&&(window.Parameter.launch_page=window.Utility.getParameter("launchpage"));null!=window.Parameter.launch_page&&(window.Parameter.launch_page=decodeURI(window.Parameter.launch_page),"http://"!=window.Parameter.launch_page.substring(0,7)&&"https://"!=window.Parameter.launch_page.substring(0,8)&&(window.Parameter.launch_page=window.Utility.absolutizeURL(window.Global.viewer_URL,window.Parameter.launch_page)));null!=
window.Utility.getParameter("pn")&&(window.Parameter.pn=window.Utility.getParameter("pn"));null!=window.Utility.getParameter("archive")&&(window.Parameter.archive=window.Utility.getParameter("archive"));null!=window.Parameter.archive&&(window.Global.archive_URL=decodeURI(window.Parameter.archive));null!=window.Utility.getParameter("ga")&&(window.Parameter.tracking_id=window.Utility.getParameter("ga"));if(null!=window.Parameter.tracking_id){var c="https:"==document.location.protocol?"https://ssl.":
"http://www.";b("body").append('<script type="text/javascript" src="'+c+'google-analytics.com/ga.js">\x3c/script>')}null!=window.Utility.getParameter("launchlogo")&&(window.Parameter.launch_logo=window.Utility.getParameter("launchlogo"));c=null;window.XMLHttpRequest?c=new XMLHttpRequest:window.ActiveXObject&&(c=new ActiveXObject("MSXML2.XMLHTTP.3.0"));null!=window.Parameter.launch_logo&&null!=c&&(window.Parameter.launch_logo=decodeURI(window.Parameter.launch_logo),c.open("HEAD",window.Parameter.launch_logo,
!1),c.send(null),200!=c.status&&(window.Parameter.launch_logo=null));null==window.Parameter.launch_logo&&(window.Parameter.launch_logo="skin/logo.png");"http://"!=window.Parameter.launch_logo.substring(0,7)&&"https://"!=window.Parameter.launch_logo.substring(0,8)&&(window.Parameter.launch_logo=window.Utility.absolutizeURL(window.Global.viewer_URL,window.Parameter.launch_logo));null!=window.Utility.getParameter("landscapeflipping")&&(window.Parameter.landscape_flipping=window.Utility.getParameter("landscapeflipping"));
null!=window.Utility.getParameter("toolbarpermanent")&&(window.Parameter.toolbar_permanent=window.Utility.getParameter("toolbarpermanent"));window.Atmosphere.prepare()}},measure:function(){"Portrait"==observer.getOrientation()?(this.orientation="Portrait",this.pages_per_mirage=1):(observer.getOrientation(),this.orientation="Landscape",this.pages_per_mirage=2);"Portrait"==this.orientation?(this.client_width=Math.min(device.width(),device.height()),this.client_height=Math.max(device.width(),device.height())):
"Landscape"==this.orientation&&(this.client_width=Math.max(device.width(),device.height()),this.client_height=Math.min(device.width(),device.height()))},shape:function(){this.page_height=this.client_height-window.Thick.clustered();1==window.Parameter.toolbar_permanent&&(this.page_height-=Math.round(5*parseInt(b("#World").css("height"))/4));this.page_width=Math.round(this.page_height*this.page_width_real/this.page_height_real);this.page_width+window.Thick.aggregated()>Math.floor(this.client_width/
this.pages_per_mirage)&&(this.page_width=Math.floor(this.client_width/this.pages_per_mirage)-window.Thick.aggregated(),this.page_height=Math.round(this.page_width*this.page_height_real/this.page_width_real));this.page_top=Math.round((window.Install.client_height-window.Install.page_height-window.Thick.clustered())/2);1==window.Parameter.toolbar_permanent&&(this.page_top+=Math.round(5*parseInt(b("#World").css("height"))/8));window.HighDefinition.prepare_()},authenticate:function(){this.password==md5(md5(b("#Defense").find("input").val()+
this.flipbook_id)+window.Global.magic_key_password)?(null!=window.Navigate&&(window.Navigate.is_it_defensed=!1),b("#Defense").hide(),b("#Install").hide()):(b("#Defense").find("div:first-child").find("span:last-child").show(),b("#Defense").find("div:first-child").find("span:first-child").hide())},certifyLicense:function(a){var c=a.indexOf("<certificate",c);if(-1!=c&&(c=a.indexOf("<security",c),-1!=c&&(c=a.indexOf("<flipbook",c),-1!=c&&(c=a.indexOf("<signature",c),-1!=c)))){var d=a.indexOf("/>",c);
if(-1!=d){var b=a.substring(c,d+2),c=b.indexOf("content");if(-1!=c&&(c=b.indexOf('"',c),-1!=c&&(c++,d=b.indexOf('"',c),-1!=d)))if(b=b.substring(c,d),d=md5(this.opf_material.split(" ").join("").split(String.fromCharCode(9)).join("").split(String.fromCharCode(13)).join("").split(String.fromCharCode(10)).join("")+window.Global.magic_key_crossover),this.integrity=b==d?!0:!1){if(c=a.indexOf("<certificate_digital_signature",c),-1!=c&&(c=a.indexOf("<signature",c),-1!=c&&(d=a.indexOf("/>",c),-1!=d&&(b=a.substring(c,
d+2),c=b.indexOf("content"),-1!=c&&(c=b.indexOf('"',c),-1!=c&&(c++,d=b.indexOf('"',c),-1!=d&&(b=b.substring(c,d),c=a.indexOf("<certificate",c),-1!=c&&(d=a.indexOf("</certificate>",c),-1!=d)))))))){a=a.substring(c,d+14);xx=a.split(String.fromCharCode(10));a=[];for(c in xx)a.push(xx[c].substring(xx[c].indexOf("<")));d=md5(window.Global.magic_key_license+a.join("").split(String.fromCharCode(13)).join("")+window.Global.magic_key_license);this.integrity=b==d?!0:!1;this.integrity||(window.Localize.alert("License of this publication has failed the integrity verification."),
null!=window.Navigate&&window.Navigate.unauthenticate("License Integrity Failed"))}}else window.Localize.alert("The license does not belong to this publication."),null!=window.Navigate&&window.Navigate.unauthenticate("Invalid License")}}},digitalSignature:function(a){var c=a.indexOf("<digital_signature");if(-1!=c){var d=a.indexOf("/>",c);if(-1!=d){var b=a.substring(c,d+2);a=a.substring(0,c)+a.substring(d+2);c=b.indexOf("content");-1!=c&&(c=b.indexOf('"',c),-1!=c&&(c++,d=b.indexOf('"',c),-1!=d&&(b=
b.substring(c,d),a=a.split(" ").join("").split(String.fromCharCode(9)).join("").split(String.fromCharCode(13)).join("").split(String.fromCharCode(10)).join(""),a=md5(window.Global.magic_key_OPF+md5(a+window.Global.magic_key_OPF)),this.integrity=b==a?!0:!1,this.integrity||(window.Localize.alert("OPF of this publication has failed the integrity verification and cannot be loaded."),null!=window.Navigate&&window.Navigate.unauthenticate("OPF Integrity Failed")))))}}},verifyIntegrity:function(){var a=window.Global.OPF;
if("file:///"==a.substring(0,8))a=a.replace(/\\/g,"\\\\");else if("http://"==a.substring(0,7)||"https://"==a.substring(0,8))a=encodeURI(a);var c=this;b.ajax({url:a,dataType:"text",success:function(a){c.opf_material=a;c.digitalSignature(a)},error:function(a,b,f){c.brake=!0;alert("OPF Retrieval Failure; Error Code: "+f)},async:!1});this.brake&&null!=window.Navigate&&window.Navigate.unauthenticate("Invalid OPF")},getOPFXML:function(){var a=new XML.ObjTree;a.attr_prefix="@";var c=window.Global.OPF;if("file:///"==
c.substring(0,8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(c);d.parseError&&0!=d.parseError.errorCode?window.Localize.alert("Fail to load local OPF XML."):d.documentElement&&"parsererror"==d.documentElement.nodeName?alert("OPF-Parse-Error: "+d.documentElement.childNodes[0].nodeValue):(this.parseOPF(a.parseDOM(d)),this.integrity&&this.getLinkDefXML())}catch(b){try{d=document.implementation.createDocument("",
"",null),d.async=!1,d.load(c),d.documentElement&&"parsererror"==d.documentElement.nodeName?alert("OPF-Parse-Error: "+d.documentElement.childNodes[0].nodeValue):(this.parseOPF(a.parseDOM(d)),this.integrity&&this.getLinkDefXML())}catch(g){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.overrideMimeType&&e.overrideMimeType("text/xml");e.open("GET",c,!1);e.send(null);null!=e.responseXML?this.parseOPF(a.parseDOM(e.responseXML)):null!=e.responseText?window.ActiveXObject?
(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseOPF(a.parseDOM(d))):this.parseOPF(a.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml"))):window.Localize.alert("Unable to load OPF contents. Please verify link.");this.integrity&&this.getLinkDefXML()}}},parseOPF:function(a){if(a&&a["#document"]&&a["#document"]["package"]){if(a["#document"]["package"].drm_enabled){var c=a["#document"]["package"].drm_enabled;c["@bookid"]&&(this.flipbook_id=
c["@bookid"]);c["@authorid"]&&(this.author_id=c["@authorid"]);if(this.will_authenticate&&c.certificate){window.Global.certificate_URL=window.Utility.absolutizeURL(window.Global.root_URL,c.certificate["@url"]);var d=window.Global.certificate_URL;if("file:///"==d.substring(0,8))d=d.replace(/\\/g,"\\\\");else if("http://"==d.substring(0,7)||"https://"==d.substring(0,8))d=encodeURI(d);var e=this;b.ajax({url:d,dataType:"text",success:function(a){e.certifyLicense(a)},error:function(a,c,d){e.brake=!0;alert("License Retrieval Failure; Error Code: "+
d)},async:!1});if(this.brake){null!=window.Navigate&&window.Navigate.unauthenticate("Invalid License");return}if(this.integrity)c.certificate["@type"]&&"2"==c.certificate["@type"]&&(this.trial=c.certificate["@trial"]&&"yes"==c.certificate["@trial"],window.Global.server_time_URL=c.certificate["@alternative"].substring(0,c.certificate["@alternative"].lastIndexOf("/"))+"/gettime",this.getLicenseXML());else return}c.linkdef&&(window.Global.link_define_URL=window.Utility.absolutizeURL(window.Global.root_URL,
c.linkdef["@url"]));c.toc&&(window.Global.TOC_URL=window.Utility.absolutizeURL(window.Global.root_URL,c.toc["@url"]));c.searchabletext&&(window.Global.searchable_text_URL=window.Utility.absolutizeURL(window.Global.root_URL,c.searchabletext["@url"]))}"undefined"!=typeof a["#document"]["package"].spine["@firstpageat"]&&(this.first_page_at=parseInt(a["#document"]["package"].spine["@firstpageat"]));c=0;if(a["#document"]["package"].spine.itemref instanceof Array)for(var f in a["#document"]["package"].spine.itemref)f>=
this.first_page_at&&(this.pageId_to_pageNumber[a["#document"]["package"].spine.itemref[f]["@idref"]]=parseInt(f)+1-this.first_page_at,"undefined"!=typeof a["#document"]["package"].spine.itemref[f]["@numberingdescription"]?(this.numbering[parseInt(f)+1-this.first_page_at]=a["#document"]["package"].spine.itemref[f]["@numberingdescription"],"<Blank>"==this.numbering[parseInt(f)+1-this.first_page_at]&&(this.numbering[parseInt(f)+1-this.first_page_at]="")):this.numbering[parseInt(f)+1-this.first_page_at]=
(parseInt(f)+1-this.first_page_at).toString(),this.numbering[parseInt(f)+1-this.first_page_at].length>this.numbering_length&&(this.numbering_length=this.numbering[parseInt(f)+1-this.first_page_at].length),"undefined"!=typeof a["#document"]["package"].spine.itemref[f]["@bookmark"]&&(d=a["#document"]["package"].spine.itemref[f]["@bookmark"],this.identified.push({page_number:parseInt(f)+1-this.first_page_at,text:d.substring("text:".toString().length,d.lastIndexOf(" bgcolor:")),color:d.substring(d.lastIndexOf(" bgcolor:")+
" bgcolor:".toString().length)})),c++);else 0==this.first_page_at&&(this.pageId_to_pageNumber[a["#document"]["package"].spine.itemref["@idref"]]=1,this.numbering[1]=a["#document"]["package"].spine.itemref["@numberingdescription"],this.numbering_length=this.numbering[1].length,c++);0!=c%2&&(this.numbering[this.numbering.length]="")}},getLicenseXML:function(){if(null!=window.Global.certificate_URL&&""!=window.Global.certificate_URL){var a=new XML.ObjTree;a.attr_prefix="@";var c=window.Global.certificate_URL;
if("file:///"==c.substring(0,8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(c);this.parseLicense(a.parseDOM(d))}catch(b){try{d=document.implementation.createDocument("","",null),d.async=!1,d.load(c),this.parseLicense(a.parseDOM(d))}catch(g){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.open("GET",c,!1);e.overrideMimeType&&e.overrideMimeType("text/xml");
e.send(null);null!=e.responseXML?this.parseLicense(a.parseDOM(e.responseXML)):null!=e.responseText?window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseLicense(a.parseDOM(d))):this.parseLicense(a.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml"))):window.Localize.alert("Unable to load License XML. Please verify link.")}}}},parseLicense:function(a){if(a&&a["#document"]&&a["#document"]["package"]&&a["#document"]["package"].certificate&&
a["#document"]["package"].certificate.security){if(a["#document"]["package"].certificate.security.flipbook&&a["#document"]["package"].certificate.security.flipbook["@id"]&&(this.integrity=a["#document"]["package"].certificate.security.flipbook["@id"]==this.flipbook_id?!0:!1,!this.integrity)){window.Localize.alert("The license does not belong to this publication.");null!=window.Navigate&&window.Navigate.unauthenticate("Invalid License");return}a["#document"]["package"].certificate.security.password&&
a["#document"]["package"].certificate.security.password["@value"]?(this.password=a["#document"]["package"].certificate.security.password["@value"],window.setTimeout(function(){"zh_cn"==window.Localize.language&&b("#Defense").css("width",Math.round(10*b("#Defense").width()/9));b("#Defense").css("left",Math.round((window.Install.client_width-parseInt(b("#Defense").css("width")))/2)+"px").css("top",Math.round(window.Install.client_height/9)+"px");b("#Defense").show()},750),b("#Install").show()):null!=
window.Navigate&&(window.Navigate.is_it_defensed=!1);if(this.trial)if(a["#document"]["package"].certificate.security.constraints&&a["#document"]["package"].certificate.security.constraints.date){var c=a["#document"]["package"].certificate.security.constraints.date["@value"].split("-"),c=(new Date(Date.UTC(c[0],parseInt(c[1])-1,c[2],23,59,59))).getTime(),d=null;b.ajax({type:"GET",url:encodeURI(window.Global.server_time_URL),success:function(a){d=a.split("-")},error:function(){alert("Server Get-Time Failure")},
async:!1});var e=0;null!=d&&(e=(new Date(Date.UTC(d[0],parseInt(d[1])-1,d[2],d[3],d[4],59))).getTime());"before"==a["#document"]["package"].certificate.security.constraints.date["@type"]?(this.integrity=c>e?!0:!1,this.integrity||(window.Localize.alert("This publication has expired and cannot be opened."),null!=window.Navigate&&window.Navigate.unauthenticate("Publication Expired"))):"after"==a["#document"]["package"].certificate.security.constraints.date["@type"]&&(this.integrity=c<e?!0:!1,this.integrity||
(window.Localize.alert("This publication is not ready for viewing."),null!=window.Navigate&&window.Navigate.unauthenticate("Publication Not Ready")))}else this.integrity=!1,window.Localize.alert("Expiry date is missing in the license of this publication."),null!=window.Navigate&&window.Navigate.unauthenticate("Invalid License")}},getLinkDefXML:function(){if(null==window.Global.link_define_URL||""==window.Global.link_define_URL)this.getSpineXML();else{var a=new XML.ObjTree;a.attr_prefix="@";var c=
window.Global.link_define_URL;if("file:///"==c.substring(0,8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(c);this.parseLinkDef(a.parseDOM(d));this.getSpineXML()}catch(b){try{d=document.implementation.createDocument("","",null),d.async=!1,d.load(c),this.parseLinkDef(a.parseDOM(d)),this.getSpineXML()}catch(g){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
e.open("GET",c,!1);e.overrideMimeType&&e.overrideMimeType("text/xml");e.send(null);null!=e.responseXML?this.parseLinkDef(a.parseDOM(e.responseXML)):null!=e.responseText?window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseLinkDef(a.parseDOM(d))):this.parseLinkDef(a.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml"))):window.Localize.alert("Unable to load Link-Define XML. Please verify link.");this.getSpineXML()}}}},parseLinkDef:function(a){if(a&&
a["#document"]&&a["#document"].FlipBook&&a["#document"].FlipBook.page)if(a=a["#document"].FlipBook,a.page instanceof Array)for(i in a.page){var c=this.pageId_to_pageNumber[a.page[i]["@pageID"]];a.page[i].links&&(this.link_defines[c]=a.page[i].links.link instanceof Array?a.page[i].links.link:[a.page[i].links.link]);a.page[i].frames&&(this.frame_embeds[c]=a.page[i].frames.frame instanceof Array?a.page[i].frames.frame:[a.page[i].frames.frame]);a.page[i].videos&&(this.video_embeds[c]=a.page[i].videos.video instanceof
Array?a.page[i].videos.video:[a.page[i].videos.video]);a.page[i].audios&&(this.audio_embeds[c]=a.page[i].audios.audio instanceof Array?a.page[i].audios.audio:[a.page[i].audios.audio])}else c=this.pageId_to_pageNumber[a.page["@pageID"]],a.page.links&&(this.link_defines[c]=a.page.links.link instanceof Array?a.page.links.link:[a.page.links.link]),a.page.frames&&(this.frame_embeds[c]=a.page.frames.frame instanceof Array?a.page.frames.frame:[a.page.frames.frame]),a.page.videos&&(this.video_embeds[c]=a.page.videos.video instanceof
Array?a.page.videos.video:[a.page.videos.video]),a.page.audios&&(this.audio_embeds[c]=a.page.audios.audio instanceof Array?a.page.audios.audio:[a.page.audios.audio])},getSpineXML:function(){var a=new XML.ObjTree;a.attr_prefix="@";var c=window.Global.OPF;if("file:///"==c.substring(0,8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(c);var b=a.parseDOM(d);this.parseMeta(b);this.parseManifest(b);
this.parseSpine(b);this.getTOCXML()}catch(g){try{d=document.implementation.createDocument("","",null),d.async=!1,d.load(c),b=a.parseDOM(d),this.parseMeta(b),this.parseManifest(b),this.parseSpine(b),this.getTOCXML()}catch(h){var f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.open("GET",c,!1);f.overrideMimeType&&f.overrideMimeType("text/xml");f.send(null);b=null;null!=f.responseXML?b=a.parseDOM(f.responseXML):null!=f.responseText&&(window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),
d.async="false",d.loadXML(f.responseText),b=a.parseDOM(d)):b=a.parseDOM((new DOMParser).parseFromString(f.responseText,"text/xml")));null!=b&&(this.parseMeta(b),this.parseManifest(b),this.parseSpine(b),this.getTOCXML())}}},parseMeta:function(a){var c=!0,d=!0,e=!0,f=!0,g=!0,h=!0,k=!0,l=!0,p=!0,m=!1;if(a&&a["#document"]&&a["#document"]["package"]){if(a["#document"]["package"].metadata&&a["#document"]["package"].metadata["x-metadata"]){var t=a["#document"]["package"].metadata["x-metadata"];for(q in t.meta){if("page_content_size"==
t.meta[q]["@name"]){var r=t.meta[q]["@content"].split(" ");this.page_width_real=parseInt(r[0]);this.page_height_real=parseInt(r[1])}"book_background"==t.meta[q]["@name"]&&t.meta[q]["@content"]&&-1!=t.meta[q]["@content"].indexOf("color:")&&(window.Atmosphere.color=window.Utility.decToHexRGB(t.meta[q]["@content"].substring(t.meta[q]["@content"].indexOf("color:")+6)));"standard_direction"==t.meta[q]["@name"]&&(r=t.meta[q]["@content"],"yes"==r.toLowerCase()?this.tangent="Differentiable":"no"==r.toLowerCase()&&
(this.tangent="Integral"));"flipanalyzer"==t.meta[q]["@name"]&&t.meta[q]["@content"]&&(this.FlipAnalyzer.url=t.meta[q]["@content"])}window.Atmosphere.graffiti();window.HighDefinition.graffiti()}if(a["#document"]["package"].drm_enabled){var n=a["#document"]["package"].drm_enabled;n.publishing&&(n.publishing.issue&&n.publishing.issue["@title"]?document.title=n.publishing.issue["@title"]:n.publishing["@title"]&&(document.title=n.publishing["@title"]));n.publisher&&n.publisher["@name"]&&(this.publisher=
n.publisher["@name"]);q=null;n.offline&&"yes"==n.offline["@package"]&&n.offline.zip&&"yes"==n.offline.zip["@exists"]&&(q=encodeURI(n.offline.zip["@url"]),"http://"!=q.substring(0,7)&&"https://"!=q.substring(0,8)&&(q=window.Utility.absolutizeURL(window.Global.root_URL,q)));null!=window.Offline&&window.Offline.setUp(q,document.title);if(null!=this.FlipAnalyzer.url&&""!=this.FlipAnalyzer.url){var u=this;b.post(this.FlipAnalyzer.url+"/bOpen.cgi",{Opf:window.Global.OPF,Version:"2.0",Clientname:"HTML5 Viewer",
Clientver:"1.5.0",Clientlang:this.FlipAnalyzer.language[window.Parameter.locale],Platform:browser.platform,Nodeid:b.fingerprint(),Bookid:this.flipbook_id,Booktitle:document.title,Bookauthor:this.author_id,Bookpublisher:this.publisher,License:"embed"},function(a){a=a.split(/\r\n|\n|\r/);"ok"==a[0]&&(u.FlipAnalyzer.token=a[a.length-1])});this.FlipAnalyzer.when=Math.floor(Date.now()/1E3)}if(n.customized){if("no"==n.customized["@allow"])c=d=e=f=g=h=k=p=!1;else{if(n.customized.aboutbox){a=n.customized.aboutbox;
"no"==a["@allow"]&&(f=!1);a["@logo"]&&""!=a["@logo"]?b("#JointVenture img").attr("src",window.Utility.absolutizeURL(window.Global.root_URL,a["@logo"])):b("#JointVenture img").hide();window.World.jointVenture();for(var q=1;6>=q;q++)b("#JointVenture tr:nth-child("+q+") td:first-child").css("width",parseInt(b("#JointVenture tr:nth-child("+q+") td:first-child span").css("width"))+6);a["@title"]?b("#JointVenture tr:nth-child(1) td:last-child span").html(a["@title"]):b("#JointVenture tr:nth-child(1)").hide();
a["@company"]?b("#JointVenture tr:nth-child(2) td:last-child span").html(a["@company"]):b("#JointVenture tr:nth-child(2)").hide();a["@url"]?b("#JointVenture tr:nth-child(3) td:last-child span").html("<u>"+a["@url"]+"</u>"):b("#JointVenture tr:nth-child(3)").hide();a["@address"]?b("#JointVenture tr:nth-child(4) td:last-child span").html(a["@address"]):b("#JointVenture tr:nth-child(4)").hide();a["@tel"]?b("#JointVenture tr:nth-child(5) td:last-child span").html(a["@tel"]):b("#JointVenture tr:nth-child(5)").hide();
a["@email"]?b("#JointVenture tr:nth-child(6) td:last-child span").html("<u>"+a["@email"]+"</u>"):b("#JointVenture tr:nth-child(6)").hide()}else b("#JointVenture").hide();"iPhone"!==device.name&&"GalaxyS2"!==device.name&&"GalaxyS3"!==device.name&&n.customized.branding&&"yes"==n.customized.branding["@show"]&&(m=!0,n.customized.branding["@logo"]&&""!=n.customized.branding["@logo"]?b("#Us img").attr("src",window.Utility.absolutizeURL(window.Global.root_URL,n.customized.branding["@logo"])):b("#Us img").attr("src",
window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/flipviewer_xpress.png")),q=new Image,q.src=b("#Us img").attr("src"),q.onload=function(){window.World.decoration(this)});n.customized.bookmark&&"no"==n.customized.bookmark["@show"]&&(k=!1);n.customized.search&&"no"==n.customized.search["@show"]&&(p=!1);n.customized.socialnetwork&&"no"==n.customized.socialnetwork["@show"]&&(g=!1);n.customized.thumbnail&&"no"==n.customized.thumbnail["@show"]&&(e=!1);n.customized.pagedescription&&"no"==n.customized.pagedescription["@show"]&&
(d=!1);n.customized.toolbar&&n.customized.toolbar["@color"]&&(window.World.color=window.Utility.decToHexRGB(n.customized.toolbar["@color"]));if(n.customized.highlight){"no"==n.customized.highlight["@show"]&&(l=!1);n.customized.highlight["@style"]&&(window.Seek.rhetoric.style=n.customized.highlight["@style"]);if(n.customized.highlight["@color"])if("0x"==n.customized.highlight["@color"].substring(0,2))window.Seek.rhetoric.color="#"+n.customized.highlight["@color"].substring(2);else{q=1;a=parseInt(n.customized.highlight["@color"]);
0<a&&(q=Math.floor(Math.log(a)/Math.log(16))+1);a=window.Utility.toHexadecimal(a);for(t="";6>q;q++)t+="0";t+=a;window.Seek.rhetoric.color="#";window.Seek.rhetoric.color+=t.substring(4,5)+t.substring(5,6);window.Seek.rhetoric.color+=t.substring(2,3)+t.substring(3,4);window.Seek.rhetoric.color+=t.substring(0,1)+t.substring(1,2)}n.customized.highlight["@width"]&&(window.Seek.rhetoric.line_width=parseInt(n.customized.highlight["@width"]))}n.customized.saveas&&(1==this.first_page_at?c=!1:(q=null,"yes"==
n.customized.saveas["@show"]?(n.customized.saveas["@wholebook"]&&(q=window.Utility.absolutizeURL(window.PDF.single,n.customized.saveas["@wholebook"]),"http://"==q.substring(0,7)||"https://"==q.substring(0,8))&&(a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.open("HEAD",q,!1),a.send(null),200!=a.status&&(q=null)),window.PDF.single=n.customized.saveas["@single"]?"yes"==n.customized.saveas["@single"]?window.PDF.single+(n.customized.saveas["@location"]+"/"):null:null):
(window.PDF.single=null,c=!1),null!=q&&"file:///"!=q.substring(0,8)||null!=window.PDF.single&&"file:///"!=window.PDF.single.substring(0,8)||(c=!1),c&&window.PDF.setUp(q)));n.customized.watermark&&"yes"==n.customized.watermark["@show"]&&n.customized.watermark["@url"]&&(q=new Image,u=this,q.onload=function(){var a=document.createElement("canvas");a.width=this.width;a.height=this.height;a.getContext("2d").drawImage(this,0,0);for(var a=a.getContext("2d").getImageData(0,0,this.width,this.height),c=a.data[this.width*
(this.height-1)*4],d=a.data[this.width*(this.height-1)*4+1],b=a.data[this.width*(this.height-1)*4+2],e=0;e<this.width*this.height;e++)a.data[4*e]==c&&a.data[4*e+1]==d&&a.data[4*e+2]==b&&(a.data[4*e+3]=0);for(e=0;e<a.data.length;e+=4)a.data[e+3]=Math.floor(a.data[e+3]*(140-parseInt(n.customized.watermark["@depth"]))/140);u.watermarking={image_data:a,width:this.width,height:this.height,i:parseInt(n.customized.watermark["@position"])}},q.src=window.Utility.absolutizeURL(window.Global.root_URL,n.customized.watermark["@url"]));
if(null==window.Global.archive_URL||""==window.Global.archive_URL)h=!1;"file:///"==window.Global.viewer_URL.substring(0,8)&&(g=!1)}n.toc||(d=!1);n.searchabletext||(p=!1)}}}window.Tagged.localStorageAvailable()||(window.Localize.alert("Since your browser does not support local-storage functionality, bookmark feature won't be available."),k=!1);window.World.prepare(d,e,f,c,g,h,k,p,m,l)},parseManifest:function(a){var c=[];if(a["#document"]["package"].manifest.item instanceof Array)for(var d in a["#document"]["package"].manifest.item){if(d>=
this.first_page_at){var e=a["#document"]["package"].manifest.item[d];e["@href"]=window.Utility.absolutizeURL(window.Global.root_URL,e["@href"]);e["@href2"]=window.Utility.absolutizeURL(window.Global.root_URL,e["@href2"]);e["@pageNumber"]=parseInt(d)+1-this.first_page_at;c.push(e);if("true"==e["@isbreak"])break}}else 0==this.first_page_at&&(e=a["#document"]["package"].manifest.item,e["@href"]=window.Utility.absolutizeURL(window.Global.root_URL,e["@href"]),e["@href2"]=window.Utility.absolutizeURL(window.Global.root_URL,
e["@href2"]),e["@pageNumber"]=1,c.push(e));0!=c.length%2&&(e=[],e["@href"]=c[c.length-1]["@href"].substring(0,c[c.length-1]["@href"].lastIndexOf("/"))+"/blank.jpg",e["@href2"]=c[c.length-1]["@href2"].substring(0,c[c.length-1]["@href2"].lastIndexOf("/"))+"/blank.jpg",e["@pageNumber"]=c.length+1,c.push(e));this.page_total=c.length;c.splice(this.page_total,1);this.page_diverge=c[this.page_total-1]["@pageNumber"];this.page_total>window.Personalize.over_n_pages&&(this.how_is_it_retarded="Over_N_Pages");
"Portrait"==window.Install.orientation?this.page_total<window.Global.criteria&&(window.Global.criteria=this.page_total):"Landscape"==window.Install.orientation&&Math.floor(this.page_total/2)<window.Global.criteria&&(window.Global.criteria=Math.floor(this.page_total/2));b(document).trigger("orientationChange");var f=this;a=new Image;a.src=c[0]["@href2"];a.onload=function(){f.magnify_width=this.width;f.magnify_height=this.height;window.HighDefinition.prepare()};1==window.Parameter.landscape_flipping&&
window.Personalize.thick_attain&&(window.Thick.setUp(),null!=window.Anchor&&window.Anchor.setUp());this.shape();window.Atmosphere.setUp(c);window.Butterfly.initialize()},parseSpine:function(a){var c=[];if(a["#document"]["package"].spine.itemref instanceof Array)for(i in a["#document"]["package"].spine.itemref){if(i>=this.first_page_at&&i<this.page_total+this.first_page_at){var d=a["#document"]["package"].spine.itemref[i],e=[];e.source=window.Utility.absolutizeURL(window.Global.root_URL,d["@thumbnail"]);
e.page_number=parseInt(i)+1-this.first_page_at;c.push(e);window.Atmosphere.extend(d["@idref"],"undefined"==typeof d["@words"]?null:window.Utility.absolutizeURL(window.Global.root_URL,d["@words"]));if("true"==a["#document"]["package"].spine.itemref[i]["@isbreak"])break}}else 0==this.first_page_at&&(d=a["#document"]["package"].spine.itemref,e=[],e.source=window.Utility.absolutizeURL(window.Global.root_URL,d["@thumbnail"]),e.page_number=1,c.push(e),window.Atmosphere.extend(d["@idref"],"undefined"==typeof d["@words"]?
null:window.Utility.absolutizeURL(window.Global.root_URL,d["@words"])));0!=c.length%2&&(e=[],e.source=c[c.length-1].source.substring(0,c[c.length-1].source.lastIndexOf("/"))+"/tn_blank.jpg",e.page_number=c.length+1,c.push(e));"Over_N_Pages"==this.how_is_it_retarded?b("body").append('<script type="text/javascript" src="js/imagemanagerii.js">\x3c/script>'):b("body").append('<script type="text/javascript" src="js/imagemanageri.js">\x3c/script>');this.imageManagerPrepare(c);window.ImageManager.leatherette.initialize()},
imageManagerPrepare:function(a){if(null===window.ImageManager.minimize||null===window.ImageManager.quotation){var c=this;window.setTimeout(function(){c.imageManagerPrepare(a)},300)}else window.ImageManager.minimize.initialize(a.length),window.Panorama.setUp(a),window.ImageManager.quotation.initialize()},getTOCXML:function(){if(null==window.Global.TOC_URL||""==window.Global.TOC_URL)this.getArchiveXML();else{var a=new XML.ObjTree;a.attr_prefix="@";var c=window.Global.TOC_URL;if("file:///"==c.substring(0,
8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(c);this.parseTOC(a.parseDOM(d));this.getArchiveXML()}catch(b){try{d=document.implementation.createDocument("","",null),d.async=!1,d.load(c),this.parseTOC(a.parseDOM(d)),this.getArchiveXML()}catch(g){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.open("GET",c,!1);e.overrideMimeType&&e.overrideMimeType("text/xml");
e.send(null);null!=e.responseXML?this.parseTOC(a.parseDOM(e.responseXML)):null!=e.responseText?window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseTOC(a.parseDOM(d))):this.parseTOC(a.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml"))):window.Localize.alert("Fail to load local Table-Of-Content XML.");this.getArchiveXML()}}}},parseTOC:function(a){a&&a["#document"]&&a["#document"].FlipBook&&a["#document"].FlipBook.pagedescription?
window.FlyOver.setUp(a["#document"].FlipBook.pagedescription):window.World.prepareTOC(!1)},getArchiveXML:function(){if(null==window.Global.archive_URL||""==window.Global.archive_URL)this.getSearchableTextXML();else{var a=new XML.ObjTree;a.attr_prefix="@";var c=window.Global.archive_URL;if("file:///"==c.substring(0,8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(c);this.parseArchive(a.parseDOM(d));
this.getSearchableTextXML()}catch(b){try{d=document.implementation.createDocument("","",null),d.async=!1,d.load(c),this.parseArchive(a.parseDOM(d)),this.getSearchableTextXML()}catch(g){var e=new XMLHttpRequest;e.open("GET",c,!1);e.overrideMimeType&&e.overrideMimeType("text/xml");e.send(null);null!=e.responseXML?this.parseArchive(a.parseDOM(e.responseXML)):null!=e.responseText?window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseArchive(a.parseDOM(d))):
this.parseArchive(a.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml"))):window.Localize.alert("Fail to load Archive XML.");this.getSearchableTextXML()}}}},parseArchive:function(a){if(a&&a["#document"]&&a["#document"].response&&(!a["#document"].response.failure||0==a["#document"].response.failure.code)&&a["#document"].response.flipbooks){var c=[];if(a["#document"].response.flipbooks.flipbook instanceof Array)for(i in a["#document"].response.flipbooks.flipbook){var d=a["#document"].response.flipbooks.flipbook[i],
b=[];b.id=d["@id"];b.title=d.title;b.url=d.url;var f=b.url.substring(0,b.url.lastIndexOf("/")+1);b.cover=window.Utility.absolutizeURL(f,d.cover);b.searchabletext=window.Utility.absolutizeURL(f,d.text);b.timestamp=d.ArchivedTime;c.push(b)}else d=a["#document"].response.flipbooks.flipbook,b=[],b.id=d["@id"],b.title=d.title,b.url=d.url,f=b.url.substring(0,b.url.lastIndexOf("/")+1),b.cover=window.Utility.absolutizeURL(f,d.cover),b.searchabletext=window.Utility.absolutizeURL(f,d.text),b.timestamp=d.ArchivedTime,
c.push(b);window.ImageManager.shelve.initialize(c.length);window.Library.setUp(c)}},getSearchableTextXML:function(){if(null!=window.Global.searchable_text_URL&&""!=window.Global.searchable_text_URL){var a=new XML.ObjTree;a.attr_prefix="@";var c=window.Global.searchable_text_URL;if("file:///"==c.substring(0,8))c=c.replace(/\\/g,"\\\\");else if("http://"==c.substring(0,7)||"https://"==c.substring(0,8))c=encodeURI(c);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(c);this.parseSearchableText(this.buildSearchableText(a.parseDOM(d)))}catch(b){try{d=
document.implementation.createDocument("","",null),d.async=!1,d.load(c),this.parseSearchableText(this.buildSearchableText(a.parseDOM(d)))}catch(g){var e=new XMLHttpRequest;e.open("GET",c,!1);e.overrideMimeType&&e.overrideMimeType("text/xml");e.send(null);null!=e.responseXML?this.parseSearchableText(this.buildSearchableText(a.parseDOM(e.responseXML))):null!=e.responseText?window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseSearchableText(this.buildSearchableText(a.parseDOM(d)))):
this.parseSearchableText(this.buildSearchableText(a.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml")))):window.Localize.alert("Fail to load local Searchable-Text XML.")}}}},buildSearchableText:function(a){if(a&&a["#document"]&&a["#document"].FlipBook&&a["#document"].FlipBook.page)if(a["#document"].FlipBook.page instanceof Array)for(i in a["#document"].FlipBook.page)a["#document"].FlipBook.page[i]["@pageNumber"]=parseInt(this.pageId_to_pageNumber[a["#document"].FlipBook.page[i]["@pageID"]]);
else a["#document"].FlipBook.page["@pageNumber"]=parseInt(this.pageId_to_pageNumber[a["#document"].FlipBook.page["@pageID"]]);return a["#document"].FlipBook.page},parseSearchableText:function(a){window.Seek.setUp(a)},getSearchableWordXML:function(a){var c=new XML.ObjTree;c.attr_prefix="@";if("file:///"==a.substring(0,8))a=a.replace(/\\/g,"\\\\");else if("http://"==a.substring(0,7)||"https://"==a.substring(0,8))a=encodeURI(a);try{var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;d.load(a);this.parseSearchableWord(this.buildSearchableWord(c.parseDOM(d)))}catch(b){try{d=
document.implementation.createDocument("","",null),d.async=!1,d.load(a),this.parseSearchableWord(this.buildSearchableWord(c.parseDOM(d)))}catch(g){var e=new XMLHttpRequest;e.open("GET",a,!1);e.overrideMimeType&&e.overrideMimeType("text/xml");e.send(null);null!=e.responseXML?this.parseSearchableWord(this.buildSearchableWord(c.parseDOM(e.responseXML))):null!=e.responseText?window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e.responseText),this.parseSearchableWord(this.buildSearchableWord(c.parseDOM(d)))):
this.parseSearchableWord(this.buildSearchableWord(c.parseDOM((new DOMParser).parseFromString(e.responseText,"text/xml")))):window.Localize.alert("Fail to load Searchable-Word XML of ID: "+id)}}},buildSearchableWord:function(a){return a["#document"].FlipBook.page},parseSearchableWord:function(a){window.Seek.extend(a["@pageID"],a.words)}});b(document).bind("initialize",function(a){b(b.mobile.Install.prototype.options.initSelector,a.target).Install()})})(jQuery);
(function(b,r){b.widget("mobile.Localize",b.mobile.widget,{localeToLanguage:{ENG:"en_us",CHS:"zh_cn",DEU:"de"},language:"en_us",originals:null,_create:function(){window.Localize=this;navigator.userLanguage?this.language=navigator.userLanguage:navigator.language&&(this.language=navigator.language);this.language=this.language.replace(/\-/g,"_").toLowerCase()},setUp:function(a){a instanceof Array?this.originals=a:(this.originals=[],this.originals.push(a))},setLanguage:function(a){null!=a&&"undefined"!=
typeof this.localeToLanguage[a]&&(this.language=this.localeToLanguage[a])},translate:function(a){for(var c in this.originals)if(this.originals[c]["@phrase"]==a)if(this.originals[c].translate instanceof Array)for(var d in this.originals[c].translate){if(this.originals[c].translate[d]["@language"]==this.language)return this.originals[c].translate[d]["@phrase"]}else if(this.originals[c].translate["@language"]==this.language)return this.originals[c].translate["@phrase"];return a},alert:function(a){alert(this.translate(a))}});
b(document).bind("initialize",function(a){b(b.mobile.Install.prototype.options.initSelector,a.target).Localize()})})(jQuery);
(function(b,r){b.widget("mobile.Navigate",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Navigate')"},is_it_defensed:!0,begin:0,count:0,percentage:0,_create:function(){window.Navigate=this;this.element.css("width",window.Install.client_width+"px").css("height",window.Install.client_height+"px");var a="3px 3px 3px 3px";if("iPhone"===device.name||"GalaxyS2"===device.name||"GalaxyS3"===device.name)a="2px 2px 2px 2px";b("#LoadingBar").css(browser.prefix+"border-radius",
a);b("#LoadingProgress").css(browser.prefix+"border-radius",a);a=Math.round((window.Install.client_width-parseInt(b("#LoadingBar").css("width")))/2);b("#LoadingBar").css("left",a+"px");b("#LoadingProgress").css("left",a+"px");this.prepare(30)},prepare:function(a){var c=this;"undefined"==typeof window.Parameter?window.setTimeout(function(){c.prepare(a)},300):(this.element.find("img").attr("src",window.Parameter.launch_logo),this.element.find("img").load(function(){var a=parseInt(b(this).css("width")),
e=parseInt(b(this).css("height"));250<a&&(e=Math.round(250/a*e),a=250);150<e&&(a=Math.round(150/e*a),e=150);b(this).css("width",a+"px").css("height",e+"px");b(this).css("left",Math.round((window.Install.client_width-parseInt(b(this).css("width")))/2)+"px").css("top",Math.round((window.Install.client_height-parseInt(b(this).css("height"))-3*parseInt(b("#LoadingBar").css("height"))-parseInt(c.element.find("span").css("height")))/2)+"px");b(this).show();a=parseInt(b(this).css("top"))+parseInt(b(this).css("height"));
a+=parseInt(b("#LoadingBar").css("height"));b("#LoadingBar").css("top",a+"px");b("#LoadingProgress").css("top",a+"px");b("#LoadingBar").show();a+=2*parseInt(b("#LoadingBar").css("height"));c.element.find("span").css("top",a+"px");c.element.find("span").show()}),this.begin=Math.round(a),b("#LoadingProgress").css("width",this.begin+"px"),this.element.find("span").css("left",Math.round((window.Install.client_width-parseInt(this.element.find("span").css("width")))/2)+"px"),browser.offline?window.setTimeout(function(){c.complete_()},
2E3):this.complete())},progress:function(){100<this.percentage||(i=this.percentage/100*parseInt(b("#LoadingBar").css("width")),Math.round(i)>this.begin&&b("#LoadingProgress").css("width",Math.round(i)+"px"))},complete:function(){if(this.is_it_defensed||window.Atmosphere.pages_available<window.Global.criteria*window.Install.pages_per_mirage){var a=this;window.setTimeout(function(){a.complete()},1E3)}else this.complete_()},complete_:function(){null!=window.Navigate&&(b("#Install").show(),b("#Navigate").hide(),
window.World.show(1E3),0==window.Parameter.toolbar_permanent&&window.setTimeout(function(){0==window.World.pulled.velocity&&window.World.hide(1E3)},5E3),"undefined"!=typeof window.Parameter.pn&&null!=window.Parameter.pn&&window.Atmosphere.goToPage(window.Parameter.pn,!1),window.Navigate=null)},unauthenticate:function(a){b("#LoadingProgress").css("width","0px");b("#Navigate").find("span").text(window.Localize.translate(a));b("#Navigate").find("span").css("left",Math.round((window.Install.client_width-
parseInt(this.element.find("span").css("width")))/2)+"px")},loadPanorama:function(){var a=window.Install.mirages_coming_preload+window.Install.mirages_previous_preload;a>window.Install.page_total&&(a=window.Install.page_total);a+=window.Install.page_total;this.count++;this.percentage=Math.round(this.count/a*100);this.progress();98<this.percentage&&window.Navigate.complete()}});b(document).bind("initialize",function(a){b(b.mobile.Navigate.prototype.options.initSelector,a.target).Navigate()})})(jQuery);
(function(b,r){b.widget("mobile.World",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='World')"},gesture:null,tap_i:0,color:"#0F0F0F",per:18.5,menu:{width:0,height:0},pulled:{terminal:0,free_fall:0,dive:0,velocity:0,u:.001962},is_it_shown:[],pagedescription_show:!1,thumbnail_show:!1,aboutbox_allow:!1,aboutbox_scroll:null,saveas_show:!1,socialnetwork_show:!1,archive_show:!1,offline_show:!1,bookmark_show:!1,highlight_show:!1,search_show:!1,picked:null,_create:function(){window.World=
this;var a=this,c=Math.max(window.Install.client_width,window.Install.client_height);"Intel"===browser.platform&&(c=Math.min(window.Install.client_width,window.Install.client_height));if("iPhone"===device.name||"GalaxyS2"===device.name||"GalaxyS3"===device.name)this.per=10;b(".Menu").css("top",Math.round(c/this.per)+"px");b("#World").css("top",-1*Math.round(c/this.per)+"px");b("#Tension").css("height",Math.round(c/this.per)+"px");b("#Pulley").css("height",Math.round(c/this.per/2.19)+"px").css("width",
Math.round(67*parseInt(b("#Pulley").css("height"))/22)+"px");b("#Axis").css("top",Math.round(c/this.per/5.95)+"px");b("#Axis").css("height",Math.round(c/this.per/1.48)+"px");b(".Bar img").css("width",Math.round(c/this.per/1.48)+"px").css("height",parseInt(b(".Bar img").css("width"))+"px");"iPhone"===device.name||"GalaxyS2"===device.name||"GalaxyS3"===device.name?b(".Bar").css("margin-top",Math.round(c/this.per/9.58)+"px"):b(".Bar").css("margin-top",Math.round(c/this.per/5.96)+"px");var d=Math.round(c/
this.per/11.92);b("#Us img").css("margin",d+"px "+d+"px "+d+"px "+d+"px");b("#Us img").css("height",Math.round(c/this.per/1.25)+"px");c=Math.round(c/this.per/9.54);b("#Axis").css(browser.prefix+"border-radius",c+"px "+c+"px "+c+"px "+c+"px");b("#Pulley").css("background-size",parseInt(b("#Pulley").css("width"))+"px "+parseInt(b("#Pulley").css("height"))+"px");window.Personalize.full_view&&b("#Pulley").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/drag_.png")+
")");this.is_it_shown.push({menu:"FlyOver",whether:!1});this.is_it_shown.push({menu:"Panorama",whether:!1});this.is_it_shown.push({menu:"Seek",whether:!1});this.is_it_shown.push({menu:"Tagged",whether:!1});this.is_it_shown.push({menu:"Pioneer",whether:!1});this.is_it_shown.push({menu:"PDF",whether:!1});this.is_it_shown.push({menu:"Library",whether:!1});this.is_it_shown.push({menu:"AboutUsPanel",whether:!1});b("#Axis div").css("margin-top",Math.floor((parseInt(b("#Axis").css("height"))-window.Install.font_size)/
2/window.Install.discrepancy.div)+"px");b("#Axis input").blur(function(){2!=a.tap_i&&(b("#Axis div").css("margin-top",Math.floor((parseInt(b("#Axis").css("height"))-window.Install.font_size)/2/window.Install.discrepancy.div)+"px"),b(this).hide(),b("#Axis span").show())});b("#Axis input").trigger("blur");b("#Axis").bind("Intel"===browser.platform?"click":"tap",function(c){a.tap_i++;2==a.tap_i&&(a.pulled.velocity=.01,b(this).find("div").css("margin-top",Math.floor((parseInt(b(this).css("height"))-window.Install.font_size)/
2/window.Install.discrepancy.input)+"px"),b(this).find("span").hide(),b(this).find("input").show(),b(this).find("input")[0].focus());window.setTimeout(function(){2==a.tap_i?a.tap_i=0:1==a.tap_i&&(a.tap_i=0)},window.Global.double_tapped);return window.Utility.fall(c,!0)});b("#Axis")[0].addEventListener("touchmove",function(a){a.preventDefault()},!1);"Surface"===browser.platform?(this.gesture=new MSGesture,this.gesture.target=this.element[0],this.element[0].addEventListener("pointerdown",function(c){a.gesture.addPointer(c.pointerId)},
!1),this.element[0].addEventListener("MSGestureTap",function(c){a.tap(c)},!1),this.element[0].addEventListener("MSGestureStart",function(c){a.touchStart(c)},!1),this.element[0].addEventListener("MSGestureChange",function(c){a.touchMove(c)},!1),this.element[0].addEventListener("MSGestureEnd",function(c){a.touchEnd(c)},!1)):("Intel"===browser.platform?b("#Pulley").click(function(c){a.tap(c)}):b("#Pulley").bind("tap",function(c){a.tap(c)},!1),b("#Pulley").bind("touchstart",function(c){a.touchStart(c)}),
b("#Pulley").bind("touchmove",function(c){a.touchMove(c)}),b("#Pulley").bind("touchend",function(c){a.touchEnd(c)}));b("#Axis input").keypress(function(c){13==c.which&&a.shoot()});b("#Axis input").keyup(function(){b(this).val().length>=parseInt(b(this).attr("maxlength"))&&b(this).val(b(this).val().substring(0,parseInt(b(this).attr("maxlength"))))});b("#Axis input").change(function(){a.shoot()});b("#Axis input").autoGrowInput({comfortZone:Math.round(window.Install.font_size/2),minWidth:Math.round(window.Install.font_size/
2)});if("Portrait"==window.Install.orientation){if(this.menu.width=Math.round((window.Install.client_width-parseInt(b("#Pulley").css("width")))/2)+parseInt(b("#Pulley").css("width")),"iPhone"===device.name||"GalaxyS2"===device.name||"GalaxyS3"===device.name)this.menu.width=window.Install.client_width}else"Landscape"==window.Install.orientation&&(this.menu.width=Math.round((Math.min(window.Install.client_width,window.Install.client_height)*window.Install.discrepancy.table-parseInt(b("#Pulley").css("width")))/
2)+parseInt(b("#Pulley").css("width")));b(".Menu").css(browser.prefix+"tap-highlight-color","rgba(0, 0, 0, 0)");b(".Menu").css(browser.prefix+"box-shadow","4px 4px 4px #777777");b(".Menu").css("width",a.menu.width+"px");b("#Tension").css(browser.prefix+"box-shadow","0 4px 4px -2px #777777");b(".Header").find("span").css("width",a.menu.width+"px");b(".Header").find("span").css("margin-top",Math.floor((parseInt(b(".Header").css("height"))-window.Install.font_size)/2)+"px");b(".Content").css("width",
a.menu.width+"px");b(".Scroller").css("width",a.menu.width+"px");b(".Description").css("width",a.menu.width+"px");b(".Description").css("font-size",window.Install.font_size-2+"px");b(".Itemize img").css("margin-top",Math.round((parseInt(b(".Itemize").css("height"))-parseInt(b(".Itemize img").css("height")))/2)+"px");b(".Itemize span").css("width",a.menu.width-2*parseInt(b(".Itemize img").css("margin-left"))-parseInt(b(".Itemize img").css("width"))-parseInt(b(".Itemize img").css("margin-right"))+"px");
b(".Itemize span").css("margin-bottom",parseInt(b(".Itemize").css("height"))-window.Install.font_size+"px");b(document).bind("orientationChange",function(){var c=a.whichIsShown();a.conceal(c);var d=!1;0<=parseInt(b("#World").css("top"))&&(a.hide(1E3),d=!0);b("#World").css("width",window.Install.client_width+"px");b("#Tension").css("width",window.Install.client_width+"px");b("#Axis").css("visibility","hidden");var g=0,h=0,k=window.Install.font_size/1.5;if("Portrait"==window.Install.orientation)h=Math.floor(window.Install.client_width/
5/k-2),window.Install.numbering_length<h&&(h=window.Install.numbering_length),g=Math.round(k*(h+2)),b("#Axis input").css("width",Math.round(k*h)+"px"),b("#Axis input").attr("maxlength",h),b("#Axis input").autoGrowInput({maxWidth:Math.round(k*h)});else if("Landscape"==window.Install.orientation){var h=Math.floor((window.Install.client_width/4/k-2)/2),g=0,l;for(l in window.Install.numbering)1==l||l==window.Install.numbering.length-1?Math.floor(window.Install.numbering[l].length/2)>g&&(g=Math.floor(window.Install.numbering[l].length/
2)):window.Install.numbering[l].length>g&&(g=window.Install.numbering[l].length);g<h&&(h=g);g=Math.round(k*(2*h+3));b("#Axis input").css("width",Math.round(k*(2*h+1))+"px");b("#Axis input").attr("maxlength",2*h+1);b("#Axis input").autoGrowInput({maxWidth:Math.round(k*(2*h+1))})}b("#Axis span").css("width",b("#Axis input").css("width"));b("#Axis").css("width",g+"px");"iPhone"===device.name||"GalaxyS2"===device.name||"GalaxyS3"===device.name?b("#Axis").css("left",parseInt(b("#Us").css("margin-left"))+
"px"):b("#Axis").css("left",Math.floor((window.Install.client_width-g)/2)+"px");b("#Axis").css("visibility","visible");b("#Pulley").css("margin-left",Math.floor((window.Install.client_width-parseInt(b("#Pulley").css("width")))/2)+"px");a.menu.height=window.Install.client_height-parseInt(b("#Axis").css("height"));b(".Menu").css("height",a.menu.height+"px");b(".Content").css("height",a.menu.height-parseInt(b(".Header").css("height"))+"px");for(l in window.Global.content_scroller)window.Global.content_scroller[l].refresh();
window.setTimeout(function(){b(".Menu").css("left","-"+a.menu.width+"px");a.reveal(c);d&&a.show(1E3)},window.Global.transition_duration)})},setUp:function(){var a=this;b(".Description").each(function(){var c=window.Utility.paragraph(window.Localize.translate(b(this).text()),window.Install.font_size-2+"px Arial",a.menu.width,"<br />");b(this).html(c);var d=Math.floor((window.Install.font_size-2)/2);b(this).css("padding-top",d+"px").css("height",(window.Install.font_size-2+2*d)*c.split("<br />").length+
"px")});1==window.Parameter.toolbar_permanent?b("#World").css("height",parseInt(b("#Tension").css("height"))+"px"):b("#World").css("height",parseInt(b("#Tension").css("height"))+parseInt(b("#Pulley").css("height"))+"px")},tap:function(a){0>parseInt(b("#World").css("top"))?this.show(1E3):this.hide(1E3);return window.Utility.fall(a,!0)},touchStart:function(a){this.pulled.terminal=parseInt(b("#World").css("top"));this.pulled.free_fall="Surface"===browser.platform?a.clientY:window.Utility.y(a.originalEvent.changedTouches[0]);
this.pulled.dive=(new Date).getTime()},touchMove:function(a){a="Surface"===browser.platform?a.clientY:window.Utility.y(a.originalEvent.changedTouches[0])-this.pulled.free_fall;var c=a+this.pulled.terminal;c<-1*parseInt(b("#Tension").css("height"))?b("#World").css("top",-1*parseInt(b("#Tension").css("height"))+"px"):0<c?b("#World").css("top","0px"):b("#World").css("top",c+"px");this.pulled.velocity=a/((new Date).getTime()-this.pulled.dive)},touchEnd:function(a){b("#Axis input").blur();var c=Math.pow(this.pulled.velocity,
2)/this.pulled.u;a="Surface"===browser.platform?a.clientY:window.Utility.y(a.originalEvent.changedTouches[0])-this.pulled.free_fall;c=(0>a?a-c:a+c)+this.pulled.terminal;c<-1*parseInt(b("#Tension").css("height"))?b("#World").css("top",-1*parseInt(b("#Tension").css("height"))+"px"):0<c?b("#World").css("top","0px"):b("#World").css("top",c+"px");Math.abs(parseInt(b("#World").css("top")))>parseInt(b("#Tension").css("height"))/2?this.hide(1E3*this.pulled.velocity):this.show(1E3*this.pulled.velocity);this.pulled.terminal=
this.pulled.free_fall=this.pulled.dive=0},prepare:function(a,c,d,e,f,g,h,k,l,p){var m=this;this.pagedescription_show=a;this.thumbnail_show=c;this.bookmark_show=h;this.highlight_show=p;this.search_show=k;this.saveas_show=e;this.socialnetwork_show=f;this.archive_show=g;this.aboutbox_allow=d;a=this.color.substring(1);c="rgba("+(window.Utility.toDecimal(a.substring(0,1)+a.substring(1,2))+", ");c+=window.Utility.toDecimal(a.substring(2,3)+a.substring(3,4))+", ";c+=window.Utility.toDecimal(a.substring(4,
5)+a.substring(5,6))+", ";c+="0.95)";b("#Tension").css("background",c);b(".Header").css("background",c);a=Math.round(window.Install.client_height/55.4);if("iPhone"===device.name||"GalaxyS2"===device.name||"GalaxyS3"===device.name)a=Math.round(window.Install.client_height/59);b(".Bar").css("margin-right",a+"px").css("visibility","visible");b("#Us").css("margin-left",a+"px");l&&b("#Us").css("visibility","visible");this.pagedescription_show?(b("#TOCWorld").show(),b("#TOCWorld").bind("Intel"===browser.platform?
"click":"tap",function(a){m.pulled.velocity=.01;m.toggle("FlyOver");return window.Utility.fall(a,!0)})):b("#TOCWorld").hide();this.thumbnail_show?(b("#ThumbnailWorld").show(),b("#ThumbnailWorld").bind("Intel"===browser.platform?"click":"tap",function(a){m.pulled.velocity=.01;m.toggle("Panorama");return window.Utility.fall(a,!0)})):b("#ThumbnailWorld").hide();this.search_show?(b("#SearchWorld").show(),b("#SearchWorld").bind("Intel"===browser.platform?"click":"tap",function(a){m.pulled.velocity=.01;
m.toggle("Seek");return window.Utility.fall(a,!0)})):b("#SearchWorld").hide();this.bookmark_show?(b("#BookmarkWorld").show(),b("#BookmarkWorld").bind("Intel"===browser.platform?"click":"tap",function(a){m.pulled.velocity=.01;m.toggle("Tagged");return window.Utility.fall(a,!0)})):b("#BookmarkWorld").hide();b("#MoreWorld").show();b("#MoreWorld").bind("Intel"===browser.platform?"click":"tap",function(a){m.pulled.velocity=.01;m.toggle("Pioneer");return window.Utility.fall(a,!0)});this.saveas_show?(b("#SaveAsPioneer").show(),
b("#SaveAsPioneer").bind("Intel"===browser.platform?"click":"tap",function(a){null!=m.picked&&b(m.picked).removeClass("Pick");b(this).addClass("Pick");m.picked=this;m.pulled.velocity=.01;m.toggle("PDF");return window.Utility.fall(a,!0)})):b("#SaveAsPioneer").hide();this.socialnetwork_show?(b("#ShareMailPioneer").show(),b("#ShareMailPioneer").bind("Intel"===browser.platform?"click":"tap",function(a){null!=m.picked&&b(m.picked).removeClass("Pick");b(this).addClass("Pick");m.picked=this;m.pulled.velocity=
.01;window.open("http://www.addthis.com/bookmark.php?s=email&winname="+window.name+"&url="+encodeURIComponent(window.Parameter.launch_page),"_blank");return window.Utility.fall(a,!0)}),b("#ShareFacePioneer").show(),b("#ShareFacePioneer").bind("Intel"===browser.platform?"click":"tap",function(a){null!=m.picked&&b(m.picked).removeClass("Pick");b(this).addClass("Pick");m.picked=this;m.pulled.velocity=.01;window.open("https://www.facebook.com/login.php?next="+encodeURIComponent("http://www.facebook.com/sharer/sharer.php?u="+
encodeURIComponent(window.Parameter.launch_page))+"&display=popup","_blank");return window.Utility.fall(a,!0)}),b("#ShareTwitterPioneer").show(),b("#ShareTwitterPioneer").bind("Intel"===browser.platform?"click":"tap",function(a){null!=m.picked&&b(m.picked).removeClass("Pick");b(this).addClass("Pick");m.picked=this;m.pulled.velocity=.01;window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(window.Parameter.launch_page)+"&url="+encodeURIComponent(window.Parameter.launch_page),"_blank");
return window.Utility.fall(a,!0)})):(b("#ShareMailPioneer").hide(),b("#ShareFacePioneer").hide(),b("#ShareTwitterPioneer").hide());this.archive_show?(b("#ArchivePioneer").show(),b("#ArchivePioneer").bind("Intel"===browser.platform?"click":"tap",function(a){null!=m.picked&&b(m.picked).removeClass("Pick");b(this).addClass("Pick");m.picked=this;m.pulled.velocity=.01;m.toggle("Library");return window.Utility.fall(a,!0)})):b("#ArchivePioneer").hide();this.offline_show?(b("#OfflinePioneer").show(),b("#OfflinePioneer").bind("Intel"===
browser.platform?"click":"tap",function(a){null!=m.picked&&b(m.picked).removeClass("Pick");b(this).addClass("Pick");m.picked=this;m.pulled.velocity=.01;window.open(window.Utility.absolutizeURL(window.Global.viewer_URL,window.Offline.FlipViewer_URL)+"?zip="+window.Offline.URL+"&cover="+window.Offline.URL.substring(0,window.Offline.URL.lastIndexOf("/")+1)+"cover.jpg&booktitle="+window.Offline.title+"&locale="+window.Parameter.locale,"_blank");return window.Utility.fall(a,!0)})):b("#OfflinePioneer").hide();
b("#SignaturePioneer").show();b("#SignaturePioneer").bind("Intel"===browser.platform?"click":"tap",function(a){null!=m.picked&&b(m.picked).removeClass("Pick");b(this).addClass("Pick");m.picked=this;m.pulled.velocity=.01;m.toggle("AboutUsPanel");return window.Utility.fall(a,!0)});this.aboutbox_allow?(b("#JointVenture").show(),b("#AboutUsPanel .Header span").text(window.Localize.translate("About Us")),b("#SignaturePioneer span").text(window.Localize.translate("About Us"))):(b("#JointVenture").hide(),
b("#AboutUsPanel .Header span").text(window.Localize.translate("Patent")),b("#SignaturePioneer span").text(window.Localize.translate("Patent")));1==window.Parameter.toolbar_permanent?b("#Pulley").hide():b("#Pulley").show()},prepareTOC:function(a){this.pagedescription_show?a||(b("#TOCWorld").hide(),b("#TOCWorld").unbind("Intel"===browser.platform?"click":"tap"),this.pagedescription_show=!1):a&&(b("#TOCWorld").show(),b("#TOCWorld").bind("Intel"===browser.platform?"click":"tap",function(a){that.pulled.velocity=
.01;that.toggle("FlyOver");return window.Utility.fall(a,!0)}),this.pagedescription_show=!0)},decoration:function(a){var c=parseInt(b("#Us img").css("height"))/a.height*a.width;a=Math.floor(window.Install.client_width/3)-parseInt(b("#Us img").css("margin-left"))-parseInt(b("#Us img").css("margin-right"));c>a?(c=Math.floor(a/c*parseInt(b("#Us img").css("height"))),b("#Us img").css("width",a+"px").css("height",c+"px"),b("#Us").css("margin-top",Math.floor((parseInt(b("#Tension").css("height"))-c)/2)+
"px")):b("#Us img").css("width",c+"px")},jointVenture:function(){var a=Math.round(window.World.menu.width/16);b("#JointVenture").css("margin",a+"px "+a+"px "+a+"px "+a+"px");b("#TradeMark").css("margin",a+"px "+a+"px "+a+"px "+a+"px");b("#Patent").css("margin",a+"px "+a+"px "+a+"px "+a+"px");b("#JointVenture img").css("width",Math.round(window.World.menu.width/2)+"px");b("#JointVenture img").css("margin-left",Math.round((window.World.menu.width-parseInt(b("#JointVenture").css("margin-left"))-parseInt(b("#JointVenture").css("margin-right"))-
parseInt(b("#JointVenture img").css("width")))/2)+"px");a=window.World.menu.width-Math.round(25*window.Install.font_size/2)-parseInt(b("#TradeMark").css("margin-left"))-parseInt(b("#TradeMark").css("margin-right"));b("#TradeMark img").parent().css("width",a+"px");b("#TradeMark img").css("width",a-parseInt(b("#TradeMark").css("margin-left"))-parseInt(b("#TradeMark").css("margin-right"))+"px");this.aboutbox_scroll=new iScroll("AboutUsPanelContent",{wheelAction:"scroll",hScroll:!1,vScroll:!0});window.Global.content_scroller.push(this.aboutbox_scroll);
this.aboutbox_scroll.refresh();a=parseInt(b("#JointVenture").css("height"))+parseInt(b(".Sectionize").css("height"))+parseInt(b("#TradeMark img").css("width"))/139*42+parseInt(b(".Sectionize").css("height"))+parseInt(b("#Patent").css("height"));b("#AboutUsPanelContentScroller").css("height",Math.round(a*window.Install.discrepancy.table)+"px");this.aboutbox_scroll.refresh()},isItShown:function(a,c){if(null==c)for(var d in this.is_it_shown){if(this.is_it_shown[d].menu==a)return this.is_it_shown[d].whether}else for(d in this.is_it_shown)this.is_it_shown[d].menu==
a&&(this.is_it_shown[d].whether=c)},whichIsShown:function(){for(var a in this.is_it_shown)if(this.is_it_shown[a].whether)return this.is_it_shown[a].menu;return null},toggle:function(a){var c=0,d=this.whichIsShown();null!=d&&d!=a&&(this.conceal(d),c=window.Global.transition_duration);var b=this;window.setTimeout(function(){b.isItShown(a)?b.conceal(a):b.reveal(a)},c)},reveal:function(a){b("#"+a).css("visibility","visible");b("#"+a).stop().animate({left:"0px"},window.Global.transition_duration,"easeInOutExpo");
this.isItShown(a,!0)},conceal:function(a){if("*"==a&&(a=this.whichIsShown(),null==a))return;b("#"+a).stop().animate({left:"-"+this.menu.width+"px"},window.Global.transition_duration,"easeInOutExpo");window.setTimeout(function(){b("#"+a).css("visibility","hidden")},window.Global.transition_duration);this.isItShown(a,!1)},shoot:function(){var a=b("#Axis input").val();if(/[^\s]/.test(a)){var c=0;if("Differentiable"==window.Install.tangent){for(var d=1;d<=window.Install.numbering.length;d++)if("undefined"!=
typeof window.Install.numbering[d]&&window.Install.numbering[d]==a){c=d;break}if(0==c)for(d=1;d<=window.Install.numbering.length;d++)if("undefined"!=typeof window.Install.numbering[d]&&-1!=window.Install.numbering[d].indexOf(a)){c=d;break}}else if("Integral"==window.Install.tangent){for(d=window.Install.numbering.length;0<d;d--)if("undefined"!=typeof window.Install.numbering[d]&&window.Install.numbering[d]==a){c=d;break}if(0==c)for(d=window.Install.numbering.length;0<d;d--)if("undefined"!=typeof window.Install.numbering[d]&&
-1!=window.Install.numbering[d].indexOf(a)){c=d;break}}0<c&&(window.World.conceal("*"),window.Atmosphere.goToPage(c,!1))}},show:function(a){b("#World").stop().animate({top:"0px"},Math.round(a),"easeInOutExpo")},hide:function(a){b("#World").stop().animate({top:"-"+parseInt(b("#Tension").css("height"))+"px"},Math.round(a),"easeInOutExpo")}});b(document).bind("initialize",function(a){b(b.mobile.World.prototype.options.initSelector,a.target).World()})})(jQuery);
(function(b,r){b.widget("mobile.Compass",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Compass')"},craft_ratio:126/206,circular:null,circular_l:0,_create:function(){window.Compass=this;this.element.css(browser.prefix+"tap-highlight-color","rgba(0, 0, 0, 0)");window.Personalize.full_view&&(b("#Laplace").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/laplace_.png")+")"),b("#Derivative").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,
"skin/derivative_.png")+")"));b("#Laplace").bind("Intel"===browser.platform?"click":"tap",function(a){"Differentiable"==window.Install.tangent?window.Atmosphere.kinetic():"Integral"==window.Install.tangent&&window.Atmosphere.dynamic();return window.Utility.fall(a,!0)});b("#Derivative").bind("Intel"===browser.platform?"click":"tap",function(a){"Differentiable"==window.Install.tangent?window.Atmosphere.dynamic():"Integral"==window.Install.tangent&&window.Atmosphere.kinetic();return window.Utility.fall(a,
!0)});this.circular_l=Math.round(window.Install.client_width/10);b("#Streaming").append(b('<canvas width="'+this.circular_l+'px" height="'+this.circular_l+'px"></canvas>'));var a=b("#Streaming").find("canvas")[0].getContext("2d"),c=a.createLinearGradient(0,0,this.circular_l,0);c.addColorStop("0","#FFFFFF");c.addColorStop("0.5","#0F0F0F");c.addColorStop("1.0","#FFFFFF");a.beginPath();a.strokeStyle=c;a.lineCap="square";a.closePath();a.fill();a.lineWidth=Math.round(this.circular_l/15);this.circular=
a.getImageData(0,0,this.circular_l,this.circular_l);b("#Streaming").hide();var d=this;b(document).bind("orientationChange",function(){b("#Laplace").css("visibility","hidden");b("#Derivative").css("visibility","hidden");var c=Math.floor((window.Install.client_width-(window.Install.page_width+window.Thick.aggregated())*window.Install.pages_per_mirage)/2);46>c&&(c=46);c<Math.floor(window.Install.client_width/8)&&(c=Math.floor(window.Install.client_width/8));var f=Math.round(c/d.craft_ratio);f>Math.floor(window.Install.client_height/
5)&&(f=Math.floor(window.Install.client_height/5));c=Math.round(f*d.craft_ratio);b("#Laplace").css("left","0px").css("top",Math.floor((window.Install.client_height-f)/2)+"px");b("#Laplace").css("width",c+"px").css("height",f+"px");b("#Laplace").css("background-size",c+"px "+f+"px");b("#Derivative").css("left",window.Install.client_width-c+"px").css("top",Math.floor((window.Install.client_height-f)/2)+"px");b("#Derivative").css("width",c+"px").css("height",f+"px");b("#Derivative").css("background-size",
c+"px "+f+"px");b("#Laplace").css("visibility","visible");b("#Derivative").css("visibility","visible");b("#Streaming").css("left",Math.round((window.Install.client_width-d.circular_l+a.lineWidth)/2)+"px").css("top",Math.round((window.Install.client_height-d.circular_l+a.lineWidth)/2)+"px")})},stream:function(a){var c=b("#Streaming").find("canvas")[0].getContext("2d");c.putImageData(this.circular,0,0);c.beginPath();var d=Math.round(this.circular_l/15/this.circular_l/2*100);c.arc(Math.round(this.circular_l/
2),Math.round(this.circular_l/2),Math.round(this.circular_l/4),Math.PI/2*-1,2*Math.PI*(0>a-d?0:a-d)/100-Math.PI/2,!1);c.stroke();100<=a?window.setTimeout(function(){b("#Streaming").hide()},window.Global.transition_duration):b("#Streaming").show()}});b(document).bind("initialize",function(a){b(b.mobile.Compass.prototype.options.initSelector,a.target).Compass()})})(jQuery);
(function(b,r){b.widget("mobile.Atmosphere",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Atmosphere')"},color:"#333333",last_touched:0,how:!1,gesture:null,gesture_delta:{previous:0,current:0},touchEnd_counter:0,current:null,it:0,its:null,page_reserved:null,mirage_reserved:null,pages:null,pages_available:0,white_board:{Laplace_until:0,Derivative_until:0},is_it_forfeited:!1,event:null,pinch_counter:0,should_it_translate:!1,should_I_shuffle:!1,resetUp_counter:0,_create:function(){window.Atmosphere=
this;this.element.css(browser.prefix+"transform","scaleX(1) scaleY(1) scaleZ(1)");this.element.css(browser.prefix+"tap-highlight-color","rgba(0, 0, 0, 0)");this.page_reserved={};this.mirage_reserved={};var a=this;b(document).bind("orientationChange",function(c){a.element.css("visibility","hidden");a.element.css("width",window.Install.client_width+"px").css("height",window.Install.client_height+"px");a.graffiti();null!=a.pages&&(a.resetUp_counter++,window.setTimeout(function(){a.resetUp()},750));1==
window.Install.pages_per_mirage?(a.white_board.Laplace_until=Math.floor((window.Install.client_width-window.Install.page_width)/2),a.white_board.Derivative_until=window.Install.client_width-a.white_board.Laplace_until):2==window.Install.pages_per_mirage&&(a.white_board.Laplace_until=Math.floor((window.Install.client_width-2*(window.Install.page_width+window.Thick.aggregated()))/2),a.white_board.Derivative_until=window.Install.client_width-a.white_board.Laplace_until);a.element.css("visibility","visible");
a.prepare()});"Surface"===browser.platform?(this.gesture=new MSGesture,this.gesture.target=this.element[0],this.element[0].addEventListener("MSGestureStart",function(c){a.MSGestureStart(c)},!1),this.element[0].addEventListener("MSGestureChange",function(c){a.MSGestureChange(c)},!1),this.element[0].addEventListener("MSGestureEnd",function(c){return a.MSGestureEnd(c)},!1),this.element[0].addEventListener("MSGestureTap",function(c){return a.tap(c)},!1),this.element[0].addEventListener("pointerdown",
function(c){a.gesture.addPointer(c.pointerId)},!1)):(this.element.bind("swipeleft",function(c){return a.swipeLeft(c)}),this.element.bind("swiperight",function(c){return a.swipeRight(c)}),this.element.bind("Intel"===browser.platform?"click":"tap",function(c){return a.tap(c)}),"Intel"===browser.platform&&b("body").keydown(function(c){return b("input, textarea").is(":focus")?window.Utility.fall(c,!1):37==c.keyCode?(a.kinetic(),window.Utility.fall(c,!0)):39==c.keyCode?(a.dynamic(),window.Utility.fall(c,
!0)):window.Utility.fall(c,!1)}),"iOS"===browser.platform?document.body.addEventListener("gesturechange",function(c){return a.gestureChange(c)},!1):(document.body.addEventListener("touchstart",function(c){a.touchStart(c)},!1),document.body.addEventListener("touchmove",function(c){a.touchMove(c)},!1),document.body.addEventListener("touchend",function(c){a.touchEnd_counter++;return a.touchEnd(c)},!1)))},swipeLeft:function(a){if(a.touches||0<this.pinch_counter||window.HighDefinition.is_shown)return!0;
this.tap_i=0;"Differentiable"==window.Install.tangent?this.dynamic():"Integral"==window.Install.tangent&&this.kinetic();return window.Utility.fall(a,!1)},swipeRight:function(a){if(a.touches||0<this.pinch_counter||window.HighDefinition.is_shown)return!0;this.tap_i=0;"Differentiable"==window.Install.tangent?this.kinetic():"Integral"==window.Install.tangent&&this.dynamic();return window.Utility.fall(a,!1)},tap:function(a){if(a.touches||-1==window.Utility.x(a)||-1==window.Utility.y(a)||window.HighDefinition.is_shown)return!0;
if(this.touchable(a)){a.preventDefault();var c=(new Date).getTime();window.Utility.x(a)>=window.World.menu.width&&window.Utility.x(a)<=window.Install.client_width&&window.World.conceal("*");if(c-this.last_touched<window.Global.double_tapped&&0<c-this.last_touched&&window.Utility.x(a)>=this.white_board.Laplace_until&&window.Utility.x(a)<=this.white_board.Derivative_until)return this.goToZoom(this.event),window.Utility.fall(a,!1);this.last_touched=c}else this.touch(a);this.event=a;return window.Utility.fall(a,
this.how)},touchStart:function(a){if(2==a.touches.length&&-1!=window.Utility.x(a.touches[0])&&-1!=window.Utility.x(a.touches[1])){var c=Math.abs(window.Utility.x(a.touches[1])-window.Utility.x(a.touches[0])),d=Math.abs(window.Utility.y(a.touches[1])-window.Utility.y(a.touches[0]));this.gesture_delta.previous=Math.ceil(Math.sqrt(c*c+d*d));this.event={pageX:Math.round((window.Utility.x(a.touches[0])+window.Utility.x(a.touches[1]))/2),pageY:Math.round((window.Utility.y(a.touches[0])+window.Utility.y(a.touches[1]))/
2)};this.pinch_counter=3;var b=this;window.setTimeout(function(){b.pinch_counter=0},1500)}},touchMove:function(a){if(2==a.touches.length&&-1!=window.Utility.x(a.touches[0])&&-1!=window.Utility.x(a.touches[1])){var c=Math.abs(window.Utility.x(a.touches[1])-window.Utility.x(a.touches[0])),d=Math.abs(window.Utility.y(a.touches[1])-window.Utility.y(a.touches[0]));this.gesture_delta.current=Math.ceil(Math.sqrt(c*c+d*d));this.touchEnd_counter++;var b=this;window.setTimeout(function(){b.touchEnd(a)},250)}},
touchEnd:function(a){if(1<this.touchEnd_counter)this.touchEnd_counter--;else{this.touchEnd_counter=0;this.pinch_counter--;if(2==this.pinch_counter){if(0==this.gesture_delta.current||0==this.gesture_delta.previous)return!0;this.is_it_forfeited=!0;var c=this;window.setTimeout(function(){c.is_it_forfeited=!1},2E3);var b=this.gesture_delta.current/this.gesture_delta.previous;window.HighDefinition.is_shown||(b>window.HighDefinition.scale_upmost&&(b=window.HighDefinition.scale_upmost),1<b&&(this.goToZoom(this.event),
this.gesture_delta.current=0,this.gesture_delta.previous=0));return window.Utility.fall(a,!1)}return!0}},MSGestureStart:function(a){this.event={pageX:a.clientX,pageY:a.clientY,translationX:a.translationX,scale:1}},MSGestureChange:function(a){this.event.translationX+=a.translationX;this.event.scale*=a.scale},MSGestureEnd:function(a){window.HighDefinition.is_shown||(1==this.event.scale?0<this.event.translationX?this.swipeRight(this.event):0>this.event.translationX&&this.swipeLeft(this.event):1<this.event.scale&&
(this.event.scale>window.HighDefinition.scale_upmost&&(this.event.scale=window.HighDefinition.scale_upmost),this.goToZoom(this.event)));return window.Utility.fall(a,!1)},gestureChange:function(a){this.is_it_forfeited=!0;var c=this;window.setTimeout(function(){c.is_it_forfeited=!1},2E3);window.HighDefinition.is_shown||1<a.scale&&this.goToZoom(a);return window.Utility.fall(a,!1)},prepare:function(){1==window.Install.pages_per_mirage?this.should_it_translate=!0:2==window.Install.pages_per_mirage&&(this.should_it_translate=
!1,"undefined"==typeof window.Parameter.landscape_flipping||1!=window.Parameter.landscape_flipping)&&(this.should_it_translate=!0)},graffiti:function(){this.element.css("background-color",this.color);0<this.element.find("canvas").length&&this.element.find("canvas").remove();this.element.append(b('<canvas width="'+window.Install.client_width+'px" height="'+window.Install.client_height+'px"></canvas>'));var a=this.element.find("canvas")[0].getContext("2d");a.rect(0,0,window.Install.client_width,window.Install.client_height);
a.fillStyle=this.color;a.fill()},removeBook:function(){this.element.find(".Relativity").each(function(){b(this).Relativity().data("Relativity").undrawMirage();b(this).remove()});this.it=0;this.its=null;this.page_reserved={};this.mirage_reserved={};window.ImageManager.portrait.initialize(window.Install.page_total);1==window.Parameter.landscape_flipping&&window.Personalize.thick_attain&&2==window.Install.pages_per_mirage&&(window.Thick.discard(),null!=window.Anchor&&window.Anchor.discard())},buildBook:function(){this.removeBook();
if(1==window.Install.pages_per_mirage)for(b in this.pages){var a=this.pages[b]["@pageNumber"].toString();this.mirage_reserved[a]=this.createMirage(a);this.mirage_reserved[a].hide().prependTo("#Atmosphere")}else if(2==window.Install.pages_per_mirage){var c=this.pages.slice();parseInt(c[0]["@pageNumber"])%2!=window.Install.first_page_at&&c.unshift({"@pageNumber":"Without","@href":null});0!=c.length%2&&c.push({"@pageNumber":"Without","@href":null});for(var b=0;b<c.length-1;b+=2)a=c[b]["@pageNumber"]+
"/"+c[b+1]["@pageNumber"],this.mirage_reserved[a]=this.createMirage(a),this.mirage_reserved[a].hide().prependTo("#Atmosphere");1==window.Parameter.landscape_flipping&&window.Personalize.thick_attain&&(window.Thick.install(),null!=window.Anchor&&window.Anchor.install(),a=0,null!=this.current&&(a=this.getPageFromMirage(this.current)),a-=a%window.Install.pages_per_mirage,"Differentiable"==window.Install.tangent?(window.Thick.attachLeft(a),window.Thick.attachRight(window.Install.page_total+window.Install.first_page_at-
a)):"Integral"==window.Install.tangent&&(window.Thick.attachLeft(window.Install.page_total+window.Install.first_page_at-a),window.Thick.attachRight(a)))}},resetUp:function(){1<this.resetUp_counter?this.resetUp_counter--:(this.resetUp_counter=0,this.buildBook(),null==this.current?this.goToPage(window.Install.page_converge,!0):this.goToPage(this.getPageFromMirage(this.current),!0))},setUp:function(a){null!=a&&(this.pages=a,this.buildBook(),null==this.current?this.goToPage(window.Install.page_converge,
!0):this.goToPage(this.getPageFromMirage(this.current),!0))},extend:function(a,c){for(var b in this.pages)if(this.pages[b]["@id"]==a){this.pages[b]["@words"]=c;break}},getMirage:function(a){return null==this.mirage_reserved[a]||"undefined"==typeof this.mirage_reserved[a]?null:this.mirage_reserved[a]},createMirage:function(a){var c='<div data-role="Relativity" class="Relativity Laminate" data-mirage="'+a+'"></div>';"Intel"===browser.platform&&"IE"===browser.name&&(c='<div data-role="Relativity" class="Relativity" data-mirage="'+
a+'"></div>');c=b(c);a=a.split("/");for(var d=0;d<a.length;d++){var e=this.getPageDetail(a[d]);$LowResolution=this.createPage(e);null!=$LowResolution&&(this.page_reserved[e["@pageNumber"]]=$LowResolution,"Differentiable"==window.Install.tangent?c.append($LowResolution):"Integral"==window.Install.tangent&&c.prepend($LowResolution))}return c},getPageDetail:function(a){if("Without"==a)return{"@pageNumber":"Without","@href":null};for(i in this.pages)if(a==this.pages[i]["@pageNumber"])return this.pages[i];
return null},createPage:function(a){var c=b('<div data-role="LowResolution" class="LowResolution"></div>');c.LowResolution().data("LowResolution").setUp(a);return c},touchable:function(a){if(null==a||-1==window.Utility.x(a)||-1==window.Utility.y(a))return!1;var c=b(":jqmData(mirage='"+this.current+"')");return 1==window.Install.pages_per_mirage?c.find(".LowResolution:first-child").LowResolution().data("LowResolution").touchable(a):2==window.Install.pages_per_mirage?window.Utility.x(a)<window.Install.client_width/
2?c.find(".LowResolution:first-child").LowResolution().data("LowResolution").touchable(a):c.find(".LowResolution:last-child").LowResolution().data("LowResolution").touchable(a):!1},touch:function(a){if(null!=a&&-1!=window.Utility.x(a)&&-1!=window.Utility.y(a)){var c=b(":jqmData(mirage='"+this.current+"')");1==window.Install.pages_per_mirage?c.find(".LowResolution:first-child").LowResolution().data("LowResolution").touch(a):2==window.Install.pages_per_mirage&&(window.Utility.x(a)<window.Install.client_width/
2?c.find(".LowResolution:first-child").LowResolution().data("LowResolution").touch(a):c.find(".LowResolution:last-child").LowResolution().data("LowResolution").touch(a))}},goToZoom:function(a){if(null!=a&&-1!=window.Utility.x(a)&&-1!=window.Utility.y(a)){var c=b(":jqmData(mirage='"+this.current+"')");"iOS"===browser.platform||"Intel_Safari"==window.Install.how_is_it_retarded?window.HighDefinition.show(c.find(".LowResolution:first-child"),c.find(".LowResolution:last-child"),a,"naive"):window.HighDefinition.show(c.find(".LowResolution:first-child"),
c.find(".LowResolution:last-child"),a,"comprehensive")}},dynamic:function(){var a=this.getPageFromMirage(this.current);a+1==parseInt(window.Install.page_diverge)?this.goToPage(parseInt(window.Install.page_diverge),!1):this.goToPage(a+window.Install.pages_per_mirage,!1)},kinetic:function(){var a=this.getPageFromMirage(this.current);a-1==parseInt(window.Install.page_converge)&&this.goToPage(parseInt(window.Install.page_converge),!1);this.goToPage(a-window.Install.pages_per_mirage,!1)},getMirageFromPage:function(a){for(id in this.mirage_reserved)if(-1!=
id.indexOf(a))return id;return null},getPageFromMirage:function(a){a=a.split("/");for(var c=null,b=0;b<a.length;b++)-1==a[b].toString().indexOf("Without")&&(c=parseInt(a[b]));return c},ACNielsenTrack:function(a,c){if("undefined"!=typeof window.Personalize.AC_Nielsen&&"undefined"!=typeof window.Personalize.AC_Nielsen.URL&&null!=window.Personalize.AC_Nielsen.URL&&"undefined"!=typeof window.Personalize.AC_Nielsen.CI&&null!=window.Personalize.AC_Nielsen.CI&&"undefined"!=typeof window.Personalize.AC_Nielsen.CG&&
null!=window.Personalize.AC_Nielsen.CG){var b=window.Personalize.AC_Nielsen.URL+"?ci="+window.Personalize.AC_Nielsen.CI+"&cg="+window.Personalize.AC_Nielsen.CG;null==a&&(a=window.Personalize.AC_Nielsen.FP);b+="&si="+c+"&rp="+a+"&rnd="+(new Date).getTime();if(c!=a){var e=new Image;e.src=encodeURI(b);e.onload=function(){}}}},FlipAnalyzerTrack:function(a,c,d,e,f){if(null!=window.Install.FlipAnalyzer.url&&""!=window.Install.FlipAnalyzer.url)if(null==window.Install.FlipAnalyzer.token){var g=this;setTimeout(function(){g.FlipAnalyzerTrack(a,
c,d,e,f)},500)}else b.post(window.Install.FlipAnalyzer.url+"/bPage.cgi",{key:window.Install.FlipAnalyzer.token,L:a,R:c,Ts:d,Td:e,tt:f},null)},validatePage:function(a){return a>=parseInt(window.Install.page_converge)&&a<=parseInt(window.Install.page_diverge)},goToPage:function(a,c){if(this.validatePage(a)){this.ACNielsenTrack(0==this.it?null:this.getPageDetail(this.it)["@href"],this.getPageDetail(a)["@href"]);this.FlipAnalyzerTrack(0==this.it?null:this.getPageDetail(this.it)["@href"],this.getPageDetail(a)["@href"],
Math.floor(Date.now()/1E3)-window.Install.FlipAnalyzer.when,window.Utility.getCurrentDate(),window.Utility.getCurrentTime());2==window.Install.pages_per_mirage&&(0==a%2?this.validatePage(a+1)&&this.ACNielsenTrack(0==this.it?null:this.getPageDetail(this.it)["@href"],this.getPageDetail(a+1)["@href"]):1==a%2&&this.validatePage(a-1)&&this.ACNielsenTrack(0==this.it?null:this.getPageDetail(this.it)["@href"],this.getPageDetail(a-1)["@href"]));this.it=a;var d=this.getMirageFromPage(a);this.its!=d&&(this.its=
d,c?this.exposeMirage(d):this.goToMirage(d));var e="",d=d.replace("Without","").split("/"),f=0,g;for(g in d)"undefined"!=typeof window.Install.numbering[d[g]]&&f++;0<f&&(f=Math.floor((parseInt(b("#Axis").css("width"))-window.Install.font_size/2*(f+1))/f));for(g in d)if("undefined"!=typeof window.Install.numbering[d[g]]){for(var h=window.Install.numbering[d[g]];window.Utility.measureText(h,window.Install.font_size+"px Arial")>f;)h=h.substring(0,h.length-1);h.length<window.Install.numbering[d[g]].length&&
(h=h.substring(0,h.length-1)+b("<div>").html("&#8230;").text());e+=h+"-"}e=e.substring(0,e.length-1);"Integral"==window.Install.tangent&&(e=e.split("-").reverse().join("-"));0==e.indexOf("-")&&(e=e.replace("-",""));e.indexOf("-")==e.length-1&&(e=e.substring(0,e.length-1));b("#Axis input").val(e);b("#Axis span").text(e);b("#Axis input").trigger("blur");"Differentiable"==window.Install.tangent?(this.it>window.Install.page_converge?b("#Laplace").show():b("#Laplace").hide(),this.it<window.Install.page_diverge?
b("#Derivative").show():b("#Derivative").hide()):"Integral"==window.Install.tangent&&(this.it>window.Install.page_converge?b("#Derivative").show():b("#Derivative").hide(),this.it<window.Install.page_diverge?b("#Laplace").show():b("#Laplace").hide())}},goToMirage:function(a){this.refractive(a);var c=this,d=b(":jqmData(mirage='"+a+"')");if(d.data("Relativity").ambiguous()<d.data("Relativity").deterministic())window.Compass.stream(Math.floor(d.data("Relativity").ambiguous()/d.data("Relativity").deterministic()*
100)),window.setTimeout(function(){c.goToMirage(a)},100);else{window.Compass.stream(100);this.element.find(".Relativity").each(function(){var d=b(this).attr("data-mirage");d==c.current||d==a?b(this).show():b(this).hide()});this.element.find(".Relativity").each(function(){b(this).Relativity().data("Relativity").cleanMirage()});if(null!=this.current){if(this.current==a)return;var e=b(":jqmData(mirage='"+this.current+"')");if(this.should_it_translate)window.Atmosphere.is_it_forfeited=!0,this.getPageFromMirage(a)>
this.getPageFromMirage(this.current)?("Intel"===browser.platform&&"IE"===browser.name?(d.Relativity().data("Relativity").mirage(500,2,!1),e.Relativity().data("Relativity").mirage(500,4,!0)):(d.css("z-index",2),e.css("z-index",4)),d.Relativity().data("Relativity").translate("0",0),"Differentiable"==window.Install.tangent?e.Relativity().data("Relativity").translate("-"+String(window.Install.client_width+100),window.Global.transition_duration):"Integral"==window.Install.tangent&&e.Relativity().data("Relativity").translate(window.Install.client_width+
100,window.Global.transition_duration)):("Intel"===browser.platform&&"IE"===browser.name?(d.Relativity().data("Relativity").mirage(500,4,!0),e.Relativity().data("Relativity").mirage(500,2,!1)):(d.css("z-index",4),e.css("z-index",2)),"Differentiable"==window.Install.tangent?d.Relativity().data("Relativity").translate("-"+String(window.Install.client_width+100),0):"Integral"==window.Install.tangent&&d.Relativity().data("Relativity").translate(window.Install.client_width+100,0),e.Relativity().data("Relativity").translate("0",
-1),window.setTimeout(function(){d.Relativity().data("Relativity").translate("0",window.Global.transition_duration)},200)),window.setTimeout(function(){window.Atmosphere.is_it_forfeited=!1},window.Global.transition_duration);else{this.should_I_shuffle=!1;this.shuffleMirage(d,e);var f=[],g=this.getPageFromMirage(this.current),g=g-g%window.Install.pages_per_mirage,h=this.getPageFromMirage(a),h=h-h%window.Install.pages_per_mirage;h>g?"Differentiable"==window.Install.tangent?(f.push(e.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),
f.push(e.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),f.push(d.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),f.push(d.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),e.Relativity().data("Relativity").derive(f,h)):"Integral"==window.Install.tangent&&(f.push(d.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),f.push(d.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),
f.push(e.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),f.push(e.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),e.Relativity().data("Relativity").laplace(f,h)):"Differentiable"==window.Install.tangent?(f.push(d.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),f.push(d.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),f.push(e.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),
f.push(e.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),e.Relativity().data("Relativity").laplace(f,h)):"Integral"==window.Install.tangent&&(f.push(e.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),f.push(e.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),f.push(d.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@href"]),f.push(d.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@href"]),
e.Relativity().data("Relativity").derive(f,h))}}this.extraordinary(a);this.current=a}},shuffleMirage:function(a,c){if(this.should_I_shuffle)"Intel"===browser.platform&&"IE"===browser.name?(a.Relativity().data("Relativity").mirage(500,4,!0),c.Relativity().data("Relativity").mirage(500,2,!1)):(a.css("z-index",4),c.css("z-index",2));else{var b=this;"Chrome"===browser.name?window.setTimeout(function(){b.shuffleMirage(a,c)},window.Global.delta*window.Global.delta):window.setTimeout(function(){b.shuffleMirage(a,
c)},window.Global.delta)}},exposeMirage:function(a){this.element.find(".Relativity").each(function(){b(this).attr("data-mirage")!=a?b(this).hide():b(this).show()});this.refractive(a);this.extraordinary(a);this.current=a},refractive:function(a){var c=window.Install.mirages_previous_preload*window.Install.pages_per_mirage,b=window.Install.mirages_coming_preload*window.Install.pages_per_mirage;a=this.getPageFromMirage(a);if(this.validatePage(a)){var e=this.getMirage(this.getMirageFromPage(a));null!=
e&&e.Relativity().data("Relativity").drawMirage("now",!0)}for(var f=a-c;f<a;f++)this.validatePage(f)||(c--,b++);for(f=a+b;f>a;f--)this.validatePage(f)||(b--,c++);for(var g=a,g=g-g%window.Install.pages_per_mirage,c=a-c,f=c-=c%window.Install.pages_per_mirage;f<g;f+=window.Install.pages_per_mirage){e=null;for(c=f;c<f+window.Install.pages_per_mirage;c++)if(this.validatePage(c)){e=this.getMirage(this.getMirageFromPage(c));break}null!=e&&e.Relativity().data("Relativity").drawMirage("then",!1)}c=a+b;for(f=
c-=c%window.Install.pages_per_mirage;f>g;f-=window.Install.pages_per_mirage){e=null;for(c=f;c<f+window.Install.pages_per_mirage;c++)if(this.validatePage(c)){e=this.getMirage(this.getMirageFromPage(c));break}null!=e&&e.Relativity().data("Relativity").drawMirage("then",!1)}},extraordinary:function(a){a=this.getPageFromMirage(a);if(this.validatePage(a)){var c=this.getMirage(this.getMirageFromPage(a));null!=c&&c.Relativity().data("Relativity").extraordinary()}this.extraordinary_(a)},extraordinary_:function(a){if(window.Atmosphere.is_it_forfeited){var c=
this;window.setTimeout(function(){c.extraordinary_(a)},500)}else if(1==window.Parameter.landscape_flipping&&window.Personalize.thick_attain&&2==window.Install.pages_per_mirage&&("Differentiable"==window.Install.tangent?(window.Thick.attachLeft(a-a%2),window.Thick.attachRight(window.Install.page_total+window.Install.first_page_at-a+a%2)):"Integral"==window.Install.tangent&&(window.Thick.attachLeft(window.Install.page_total+window.Install.first_page_at-a+a%2),window.Thick.attachRight(a-a%2))),null!=
this.current){var b="";-1==window.location.href.lastIndexOf("pn=")?(b=window.location.href,b=-1==window.location.href.lastIndexOf("?")?b+"?":b+"&",b+="pn="+a):(b=window.location.href.substring(0,window.location.href.lastIndexOf("pn=")+3)+a,-1!=window.location.href.indexOf("&",window.location.href.lastIndexOf("pn="))&&(b+=window.location.href.substring(window.location.href.indexOf("&",window.location.href.lastIndexOf("pn=")))));window.history.pushState(a,"HTML5 FlipViewer",b)}}});b(document).bind("initialize",
function(a){b(b.mobile.Atmosphere.prototype.options.initSelector,a.target).Atmosphere()})})(jQuery);
(function(b,r){b.widget("mobile.Thick",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Thick')"},pixel_represents_pages:4,steps:0,cluster:0,aggregate:0,stretch:1,underpass_left:{correspond:0,current:0,accumulated:0},underpass_right:{correspond:0,current:0,accumulated:0},flyover:0,_create:function(){window.Thick=this;this.element.css(browser.prefix+"tap-highlight-color","rgba(0, 0, 0, 0)")},pile:function(a){return 1==this.stretch?0==a?0:2>=a?4:4>=a?7:6>=a?9:8>=a?11:10>=
a?13:12>=a?15:17:Math.round(a*this.stretch)},heap:function(a){return 1==this.stretch?(a+=a%2,14<a?14:a):Math.round(a*this.stretch)},setUp:function(){this.prestream();var a=this;b(document).bind("orientationChange",function(){1==window.Install.pages_per_mirage?a.discard():2==window.Install.pages_per_mirage&&a.install()});1==window.Install.pages_per_mirage?this.discard():2==window.Install.pages_per_mirage&&this.install();this.setUp_()},setUp_:function(){if(0==window.Install.page_total){var a=this;window.setTimeout(function(){a.setUp_()},
500)}else 14<window.Install.page_total/4&&(this.pixel_represents_pages=Math.ceil(window.Install.page_total/14)),window.Install.page_total>window.Personalize.over_n_pages&&(this.stretch=this.pixel_represents_pages/(window.Personalize.over_n_pages/14)),this.steps=Math.round(window.Install.page_total/this.pixel_represents_pages),this.aggregate=this.pile(this.steps),this.cluster=this.heap(this.steps)},aggregated:function(){return 2==window.Install.pages_per_mirage?2*this.aggregate:0},clustered:function(){return 2==
window.Install.pages_per_mirage?2*this.cluster:0},prestream:function(){var a=0;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell_weight.jpg"))},a);a+=75;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell_feather.jpg"))},a);for(var c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,
"skin/thick/weight"+c+".jpg"))},a);a+=75;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell^fringe.jpg"))},a);a+=75;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell^blade.jpg"))},a);a+=75;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell^corner.jpg"))},a);for(c=0;c<=
this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell^sleeve"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell^sleeve^close"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/fringe^"+
c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/fringe^close"+c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/blade^"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,
"skin/thick/blade^close"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/corner^"+c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/corner^close"+c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,
"skin/thick/sleeve^"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/sleeve^close"+c+".png"))},a);a+=75;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell@fringe.jpg"))},a);a+=75;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell@blade.jpg"))},
a);a+=75;window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell@corner.jpg"))},a);for(c=0;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell@sleeve"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/shell@sleeve@close"+
c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/fringe@"+c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/fringe@close"+c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,
"skin/thick/blade@"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/blade@close"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/corner@"+c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,
"skin/thick/corner@close"+c+".jpg"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/sleeve@"+c+".png"))},a);for(c=1;c<=this.c;c++)a+=75,window.setTimeout(function(){window.Utility.cacheAnImage(window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/thick/sleeve@close"+c+".png"))},a)},discard:function(){b("#ReamLeft, #ReamRight, #ShellLeft, #ShellRight").remove();this.underpass_left=this.underpass_right=
{correspond:0,current:0,accumulated:0};this.flyover=0},install:function(){var a=this;this.element.append(b('<div id="ShellLeft"><img class="Feather" /><img class="Blade" /><img class="Fringe" /><img class="Corner" /><img class="Weight" /><img class="Sleeve" /></div>')).append(b('<div id="ShellRight"><img class="Feather" /><img class="Blade" /><img class="Fringe" /><img class="Corner" /><img class="Weight" /><img class="Sleeve" /></div>'));b("#ShellLeft").hide();b("#ShellRight").hide();"Intel"===browser.platform&&
(b("#ShellLeft").find(".Fringe").mouseover(function(c){a.shellLeftReveal(c)}),b("#ShellLeft").find(".Fringe").mousemove(function(c){a.shellLeftReveal(c)}),b("#ShellLeft").find(".Fringe").mouseout(function(){window.Utility.repelFrom()}),b("#ShellLeft").find(".Fringe").click(function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a.flyover,!1)}),b("#ShellRight").find(".Fringe").mouseover(function(c){a.shellRightReveal(c)}),b("#ShellRight").find(".Fringe").mousemove(function(c){a.shellRightReveal(c)}),
b("#ShellRight").find(".Fringe").mouseout(function(){window.Utility.repelFrom()}),b("#ShellRight").find(".Fringe").click(function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a.flyover,!1)}));this.element.append(b('<div id="ReamLeft"><img class="Blade" /><img class="Fringe" /><img class="Corner" /><img class="Weight" /><img class="Sleeve" /></div>')).append(b('<div id="ReamRight"><img class="Blade" /><img class="Fringe" /><img class="Corner" /><img class="Weight" /><img class="Sleeve" /></div>'));
b("#ReamLeft").hide();b("#ReamRight").hide();"Intel"===browser.platform&&(b("#ReamLeft").find(".Fringe").mouseover(function(c){a.reamLeftReveal(c)}),b("#ReamLeft").find(".Fringe").mousemove(function(c){a.reamLeftReveal(c)}),b("#ReamLeft").find(".Fringe").mouseout(function(){window.Utility.repelFrom()}),b("#ReamLeft").find(".Fringe").click(function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a.flyover,!1)}),b("#ReamRight").find(".Fringe").mouseover(function(c){a.reamRightReveal(c)}),b("#ReamRight").find(".Fringe").mousemove(function(c){a.reamRightReveal(c)}),
b("#ReamRight").find(".Fringe").mouseout(function(){window.Utility.repelFrom()}),b("#ReamRight").find(".Fringe").click(function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a.flyover,!1)}))},reamLeftReveal:function(a){var c=window.Utility.x(a);a=window.Utility.y(a);var b=Math.floor(this.pixel_represents_pages/this.stretch),b=(c-this.underpass_left.correspond)*b+this.underpass_left.accumulated*b;1>b&&(b=1);b>=this.underpass_left.current||("Differentiable"==window.Install.tangent?(window.Utility.appealTo(b,
c,a,"Left"),this.flyover=b):"Integral"==window.Install.tangent&&(window.Utility.appealTo(window.Install.page_total-b+1,c,a,"Left"),this.flyover=window.Install.page_total-b+1))},shellLeftReveal:function(a){"Differentiable"==window.Install.tangent?(window.Utility.appealTo(1,window.Utility.x(a),window.Utility.y(a),"Left"),this.flyover=1):"Integral"==window.Install.tangent&&(window.Utility.appealTo(window.Install.page_total,window.Utility.x(a),window.Utility.y(a),"Left"),this.flyover=window.Install.page_total)},
detachLeft:function(){b("#ReamLeft").find(".Fringe").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamLeft").find(".Weight").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamLeft").find(".Blade").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamLeft").find(".Corner").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");
b("#ReamLeft").find(".Sleeve").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamLeft").hide();b("#ShellLeft").find(".Fringe").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellLeft").find(".Weight").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellLeft").find(".Feather").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src",
"");b("#ShellLeft").find(".Blade").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellLeft").find(".Corner").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellLeft").find(".Sleeve").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellLeft").hide();this.underpass_left={correspond:0,current:0,accumulated:0};this.flyover=0},attachLeft:function(a){if(0==a)this.detachLeft();
else{b("#ShellLeft").hide();b("#ReamLeft").hide();var c=Math.round(window.Install.client_width/2-window.Install.page_width),d=a/window.Install.page_total,e=Math.ceil(a/this.pixel_represents_pages),f=this.pile(e),g=this.heap(e),e=14<e+e%2?7:(e+e%2)/2;b("#ShellLeft").find(".Fringe").css("left",c-f-6+"px").css("top",window.Install.page_top+g+"px").css("width","6px").css("height",window.Install.page_height+"px");b("#ShellLeft").find(".Weight").css("left",c-f+"px").css("top",window.Install.page_top+window.Install.page_height+
g+"px").css("width",window.Install.page_width-6+"px").css("height","6px");b("#ShellLeft").find(".Feather").css("left",c-f+"px").css("top",window.Install.page_top+g-Math.floor(6*d)+"px").css("width",f-6+"px").css("height","6px");b("#ShellLeft").find(".Blade").css("left",c-f-6+"px").css("top",window.Install.page_top+g-Math.floor(6*d)+"px").css("width","6px").css("height","6px");b("#ShellLeft").find(".Corner").css("left",c-f-6+"px").css("top",window.Install.page_top+window.Install.page_height+g+"px").css("width",
"6px").css("height","6px");b("#ShellLeft").find(".Sleeve").css("left",c+window.Install.page_width-f-6+"px").css("top",window.Install.page_top+window.Install.page_height+"px").css("width",f+6+"px").css("height",g+6+"px");b("#ShellLeft").find(".Fringe").attr("src","skin/thick/shell^fringe.jpg");b("#ShellLeft").find(".Weight").attr("src","skin/thick/shell_weight.jpg");b("#ShellLeft").find(".Feather").attr("src","skin/thick/shell_feather.jpg");b("#ShellLeft").find(".Blade").attr("src","skin/thick/shell^blade.jpg");
b("#ShellLeft").find(".Corner").attr("src","skin/thick/shell^corner.jpg");b("#ShellLeft").find(".Sleeve").attr("src","skin/thick/shell^sleeve"+(a<window.Install.page_total?"":"^close")+e+".png");b("#ShellLeft").show();1<=e&&(b("#ReamLeft").find(".Fringe").css("left",c-f+"px").css("top",window.Install.page_top+g+"px").css("width",f+"px").css("height",window.Install.page_height-g+"px"),b("#ReamLeft").find(".Weight").css("left",c+"px").css("top",window.Install.page_top+window.Install.page_height+"px").css("width",
window.Install.page_width-f-6+"px").css("height",g+"px"),b("#ReamLeft").find(".Blade").css("left",c-f+"px").css("top",window.Install.page_top+"px").css("width",f+"px").css("height",g+"px"),b("#ReamLeft").find(".Corner").css("left",c-f+"px").css("top",window.Install.page_top+window.Install.page_height+"px").css("width",f+"px").css("height",g+"px"),b("#ReamLeft").find(".Sleeve").css("left",c+window.Install.page_width-f-6+"px").css("top",window.Install.page_top+window.Install.page_height+"px").css("width",
f+"px").css("height",g+"px"),d=a<window.Install.page_total?"":"close",b("#ReamLeft").find(".Fringe").attr("src","skin/thick/fringe^"+d+e+".jpg"),b("#ReamLeft").find(".Weight").attr("src","skin/thick/weight"+e+".jpg"),b("#ReamLeft").find(".Blade").attr("src","skin/thick/blade^"+d+e+".png"),b("#ReamLeft").find(".Corner").attr("src","skin/thick/corner^"+d+e+".jpg"),b("#ReamLeft").find(".Sleeve").attr("src","skin/thick/sleeve^"+d+e+".png"),b("#ReamLeft").show());this.underpass_left={correspond:c-f-1,
current:a,accumulated:0};"Differentiable"==window.Install.tangent?this.flyover=a:"Integral"==window.Install.tangent&&(this.flyover=window.Install.page_total-a+1)}},reamRightReveal:function(a){var c=window.Utility.x(a);a=window.Utility.y(a);var b=Math.floor(this.pixel_represents_pages/this.stretch),b=(c-this.underpass_right.correspond)*b+(window.Install.page_total-this.underpass_right.accumulated*b);b>window.Install.page_total&&(b=window.Install.page_total);b<=this.underpass_right.current||("Differentiable"==
window.Install.tangent?(window.Utility.appealTo(b,c,a,"Right"),this.flyover=b):"Integral"==window.Install.tangent&&(window.Utility.appealTo(window.Install.page_total-b+1,c,a,"Right"),this.flyover=window.Install.page_total-b+1))},shellRightReveal:function(a){"Differentiable"==window.Install.tangent?(window.Utility.appealTo(window.Install.page_total,window.Utility.x(a),window.Utility.y(a),"Right"),this.flyover=window.Install.page_total):"Integral"==window.Install.tangent&&(window.Utility.appealTo(1,
window.Utility.x(a),window.Utility.y(a),"Right"),this.flyover=1)},detachRight:function(){b("#ReamRight").find(".Fringe").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamRight").find(".Weight").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamRight").find(".Blade").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamRight").find(".Corner").css("left","0px").css("top",
"0px").css("width","0px").css("height","0px").attr("src","");b("#ReamRight").find(".Sleeve").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ReamRight").hide();b("#ShellRight").find(".Fringe").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellRight").find(".Weight").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellRight").find(".Feather").css("left","0px").css("top",
"0px").css("width","0px").css("height","0px").attr("src","");b("#ShellRight").find(".Blade").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellRight").find(".Corner").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellRight").find(".Sleeve").css("left","0px").css("top","0px").css("width","0px").css("height","0px").attr("src","");b("#ShellRight").hide();this.underpass_right={correspond:0,current:0,accumulated:0};
this.flyover=0},attachRight:function(a){if(0==a)this.detachRight();else{b("#ShellRight").hide();b("#ReamRight").hide();var c=Math.round(window.Install.client_width/2),d=a/window.Install.page_total,e=Math.ceil(a/this.pixel_represents_pages),f=this.pile(e),g=this.heap(e),e=14<e+e%2?7:(e+e%2)/2;b("#ShellRight").find(".Fringe").css("left",c+window.Install.page_width+f+"px").css("top",window.Install.page_top+g+"px").css("width","6px").css("height",window.Install.page_height+"px");b("#ShellRight").find(".Weight").css("left",
c+f+6+"px").css("top",window.Install.page_top+window.Install.page_height+g+"px").css("width",window.Install.page_width-6+"px").css("height","6px");b("#ShellRight").find(".Feather").css("left",c+window.Install.page_width+6+"px").css("top",window.Install.page_top+g-Math.floor(6*d)+"px").css("width",f-6+"px").css("height","6px");b("#ShellRight").find(".Blade").css("left",c+window.Install.page_width+f+"px").css("top",window.Install.page_top+g-Math.floor(6*d)+"px").css("width","6px").css("height","6px");
b("#ShellRight").find(".Corner").css("left",c+window.Install.page_width+f+"px").css("top",window.Install.page_top+window.Install.page_height+g+"px").css("width","6px").css("height","6px");b("#ShellRight").find(".Sleeve").css("left",c+"px").css("top",window.Install.page_top+window.Install.page_height+"px").css("width",f+6+"px").css("height",g+6+"px");b("#ShellRight").find(".Fringe").attr("src","skin/thick/shell@fringe.jpg");b("#ShellRight").find(".Weight").attr("src","skin/thick/shell_weight.jpg");
b("#ShellRight").find(".Feather").attr("src","skin/thick/shell_feather.jpg");b("#ShellRight").find(".Blade").attr("src","skin/thick/shell@blade.jpg");b("#ShellRight").find(".Corner").attr("src","skin/thick/shell@corner.jpg");b("#ShellRight").find(".Sleeve").attr("src","skin/thick/shell@sleeve"+(a<window.Install.page_total?"":"@close")+e+".png");b("#ShellRight").show();1<=e&&(b("#ReamRight").find(".Fringe").css("left",c+window.Install.page_width+"px").css("top",window.Install.page_top+g+"px").css("width",
f+"px").css("height",window.Install.page_height-g+"px"),b("#ReamRight").find(".Weight").css("left",c+f+6+"px").css("top",window.Install.page_top+window.Install.page_height+"px").css("width",window.Install.page_width-f-6+"px").css("height",g+"px"),b("#ReamRight").find(".Blade").css("left",c+window.Install.page_width+"px").css("top",window.Install.page_top+"px").css("width",f+"px").css("height",g+"px"),b("#ReamRight").find(".Corner").css("left",c+window.Install.page_width+"px").css("top",window.Install.page_top+
window.Install.page_height+"px").css("width",f+"px").css("height",g+"px"),b("#ReamRight").find(".Sleeve").css("left",c+6+"px").css("top",window.Install.page_top+window.Install.page_height+"px").css("width",f+"px").css("height",g+"px"),d=a<window.Install.page_total?"":"close",b("#ReamRight").find(".Fringe").attr("src","skin/thick/fringe@"+d+e+".jpg"),b("#ReamRight").find(".Weight").attr("src","skin/thick/weight"+e+".jpg"),b("#ReamRight").find(".Blade").attr("src","skin/thick/blade@"+d+e+".png"),b("#ReamRight").find(".Corner").attr("src",
"skin/thick/corner@"+d+e+".jpg"),b("#ReamRight").find(".Sleeve").attr("src","skin/thick/sleeve@"+d+e+".png"),b("#ReamRight").show());this.underpass_right={correspond:c+window.Install.page_width+1,current:window.Install.page_total-a+1,accumulated:g};"Differentiable"==window.Install.tangent?this.flyover=window.Install.page_total-a+1:"Integral"==window.Install.tangent&&(this.flyover=a)}}});b(document).bind("initialize",function(a){b(b.mobile.Thick.prototype.options.initSelector,a.target).Thick()})})(jQuery);
(function(b,r){b.widget("mobile.Anchor",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Anchor')"},font_size:0,drogue:{width:0,height:0},_create:function(){window.Anchor="Intel"===browser.platform?this:null;this.element.css(browser.prefix+"tap-highlight-color","rgba(0, 0, 0, 0)")},setUp:function(){var a=this;b(document).bind("orientationChange",function(){1==window.Install.pages_per_mirage?a.discard():2==window.Install.pages_per_mirage&&a.install()});1==window.Install.pages_per_mirage?
this.discard():2==window.Install.pages_per_mirage&&this.install();this.drogue.width=2*window.Install.font_size;window.Thick.aggregate+=this.drogue.width},discard:function(){b("#DrogueLeft, #DrogueRight").remove()},install:function(){this.element.append(b('<div id="DrogueLeft"></div>')).append(b('<div id="DrogueRight"></div>'))},drogueLeftConceal:function(a,c,d){window.Utility.repelFrom();if("Differentiable"==window.Install.tangent)for(a=d;a>c;a--)b("#DrogueLeft").find(".Drogue."+a).show();else if("Integral"==
window.Install.tangent)for(a=d;a<c;a++)b("#DrogueLeft").find(".Drogue."+a).show()},drogueLeftReveal:function(a,c,d){var e=window.Utility.x(a);a=window.Utility.y(a);window.Utility.appealTo(c,e,a,"Left");if("Differentiable"==window.Install.tangent)for(;d>c;d--)b("#DrogueLeft").find(".Drogue."+d).hide();else if("Integral"==window.Install.tangent)for(;d<c;d++)b("#DrogueLeft").find(".Drogue."+d).hide()},dockingLeft:function(a){var c=b('<canvas width="'+this.drogue.width+'px" height="'+this.drogue.height+
'px"></canvas>'),d=c[0].getContext("2d");d.rotate(-Math.PI/2);d.translate(-this.drogue.height,0);var e=d.createLinearGradient(0,0,0,this.drogue.width),f=window.Utility.decToHexRGB(a.color),g=parseInt(f.substring(1,3),16),h=parseInt(f.substring(3,5),16),f=parseInt(f.substring(5,7),16);e.addColorStop("1.0","rgb("+g+", "+h+", "+f+")");e.addColorStop("0.5","rgb("+(255<g+79?255:g+79)+", "+(255<h+79?255:h+79)+", "+(255<f+79?255:f+79)+")");e.addColorStop("0","rgb("+g+", "+h+", "+f+")");d.fillStyle=e;d.beginPath();
e=Math.round(this.drogue.width/2);d.arc(this.drogue.height-e,e,e,0,2*Math.PI,!1);d.fill();d.arc(e,e,e,0,2*Math.PI,!1);d.fill();d.closePath();d.fillRect(0,e,this.drogue.height,this.drogue.width-e);d.fillRect(e,0,this.drogue.height-2*e,this.drogue.width-e);d.textAlign="center";d.fillStyle="rgb("+(255-g)+", "+(255-h)+", "+(255-f)+")";for(g=window.Install.font_size;(8<g&&window.Utility.measureText(a.text,"bold "+g+"px Verdana"))>this.drogue.height;)g--;d.font="bold "+g+"px Verdana";if(window.Utility.measureText(a.text,
"bold "+g+"px Verdana")>Math.round(6*this.drogue.height/7))for(f=window.Utility.paragraph(a.text,"bold "+g+"px Verdana",Math.round(6*this.drogue.height/7),"\n").split("\n"),h=f.length-1,3<h&&(h=3),a=this.drogue.width/h,--h;0<=h;h--)d.fillText(f[h],Math.round(this.drogue.height/2),this.drogue.width-a*h-Math.floor((a-g)/2));else d.fillText(a.text,Math.round(this.drogue.height/2),this.drogue.width-Math.floor((this.drogue.width-g)/2));return c},detachLeft:function(){for(var a=1;a<=window.Install.page_total;a++)b("#DrogueLeft").find("."+
a).remove();b("#DrogueLeft").hide()},attachLeft:function(a){this.detachLeft();if(0!=a){var c=Math.floor(window.Thick.pixel_represents_pages/window.Thick.stretch);this.drogue.height=Math.floor(window.Install.page_height/c)-1;var d=Math.round(window.Install.client_width/2-window.Install.page_width),e=Math.floor(a/window.Thick.pixel_represents_pages);if("Differentiable"==window.Install.tangent)for(var f=0,g=1;g<=a;g++){var h=Math.floor(g/window.Thick.pixel_represents_pages),k=!1,l;for(l in window.Install.identified)if(g==
window.Install.identified[l].page_number){b("#DrogueLeft").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueLeft").find(".Drogue."+g).append(this.dockingLeft(window.Install.identified[l]));b("#DrogueLeft").find(".Drogue."+g).css("left",d+window.Thick.pile(h)-window.Thick.pile(e)+1-this.drogue.width+"px").css("top",window.Install.page_top+window.Thick.heap(e)-window.Thick.heap(h)+f%c*this.drogue.height+"px");f++;var p=this;b("#DrogueLeft").find(".Drogue."+g).mousemove(function(c){return function(b){p.drogueLeftReveal(b,
c,a)}}(g)).mouseout(function(c){return function(b){p.drogueLeftConceal(b,c,a)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,!1)}}(g));k=!0;break}if(!k)for(l in window.Tagged.identified)if(g==window.Tagged.identified[l].page_number){b("#DrogueLeft").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueLeft").find(".Drogue."+g).append(this.dockingLeft(window.Tagged.identified[l]));b("#DrogueLeft").find(".Drogue."+g).css("left",d+window.Thick.pile(h)-
window.Thick.pile(e)+1-this.drogue.width+"px").css("top",window.Install.page_top+window.Thick.heap(e)-window.Thick.heap(h)+f%c*this.drogue.height+"px");f++;p=this;b("#DrogueLeft").find(".Drogue."+g).mousemove(function(c){return function(b){p.drogueLeftReveal(b,c,a)}}(g)).mouseout(function(c){return function(b){p.drogueLeftConceal(b,c,a)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,!1)}}(g));break}}else if("Integral"==window.Install.tangent)for(f=
window.Install.identified.length+window.Tagged.identified.length-1,g=window.Install.page_total;g>=window.Install.page_total-a+1;g--){h=Math.floor((window.Install.page_total-g)/window.Thick.pixel_represents_pages);k=!1;for(l in window.Install.identified)if(g==window.Install.identified[l].page_number){b("#DrogueLeft").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueLeft").find(".Drogue."+g).append(this.dockingLeft(window.Install.identified[l]));b("#DrogueLeft").find(".Drogue."+g).css("left",
d+window.Thick.pile(h)-window.Thick.pile(e)+1-this.drogue.width+"px").css("top",window.Install.page_top+window.Thick.heap(e)-window.Thick.heap(h)+f%c*this.drogue.height+"px");f--;p=this;b("#DrogueLeft").find(".Drogue."+g).mousemove(function(c){return function(b){p.drogueLeftReveal(b,c,window.Install.page_total-a+1)}}(g)).mouseout(function(c){return function(b){p.drogueLeftConceal(b,c,window.Install.page_total-a+1)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,
!1)}}(g));k=!0;break}if(!k)for(l in window.Tagged.identified)if(g==window.Tagged.identified[l].page_number){b("#DrogueLeft").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueLeft").find(".Drogue."+g).append(this.dockingLeft(window.Tagged.identified[l]));b("#DrogueLeft").find(".Drogue."+g).css("left",d+window.Thick.pile(h)-window.Thick.pile(e)+1-this.drogue.width+"px").css("top",window.Install.page_top+window.Thick.heap(e)-window.Thick.heap(h)+f%c*this.drogue.height+"px");f--;p=this;b("#DrogueLeft").find(".Drogue."+
g).mousemove(function(c){return function(b){p.drogueLeftReveal(b,c,window.Install.page_total-a+1)}}(g)).mouseout(function(c){return function(b){p.drogueLeftConceal(b,c,window.Install.page_total-a+1)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,!1)}}(g));break}}b("#DrogueLeft").show()}},drogueRightConceal:function(a,c,d){window.Utility.repelFrom();if("Differentiable"==window.Install.tangent)for(a=d;a<c;a++)b("#DrogueRight").find(".Drogue."+a).show();
else if("Integral"==window.Install.tangent)for(a=d;a>c;a--)b("#DrogueRight").find(".Drogue."+a).show()},drogueRightReveal:function(a,c,d){var e=window.Utility.x(a);a=window.Utility.y(a);window.Utility.appealTo(c,e,a,"Right");if("Differentiable"==window.Install.tangent)for(;d<c;d++)b("#DrogueRight").find(".Drogue."+d).hide();else if("Integral"==window.Install.tangent)for(;d>c;d--)b("#DrogueRight").find(".Drogue."+d).hide()},dockingRight:function(a){var c=b('<canvas width="'+this.drogue.width+'px" height="'+
this.drogue.height+'px"></canvas>'),d=c[0].getContext("2d"),e=Math.round(this.drogue.width/2);d.rotate(Math.PI/2);d.translate(0,-this.drogue.width);var e=d.createLinearGradient(0,0,0,this.drogue.width),f=window.Utility.decToHexRGB(a.color),g=parseInt(f.substring(1,3),16),h=parseInt(f.substring(3,5),16),f=parseInt(f.substring(5,7),16);e.addColorStop("1.0","rgb("+g+", "+h+", "+f+")");e.addColorStop("0.5","rgb("+(255<g+79?255:g+79)+", "+(255<h+79?255:h+79)+", "+(255<f+79?255:f+79)+")");e.addColorStop("0",
"rgb("+g+", "+h+", "+f+")");d.fillStyle=e;d.beginPath();e=Math.round(this.drogue.width/2);d.arc(this.drogue.height-e,e,e,0,2*Math.PI,!1);d.fill();d.arc(e,e,e,0,2*Math.PI,!1);d.fill();d.closePath();d.fillRect(0,e,this.drogue.height,this.drogue.width-e);d.fillRect(e,0,this.drogue.height-2*e,this.drogue.width-e);d.textAlign="center";d.fillStyle="rgb("+(255-g)+", "+(255-h)+", "+(255-f)+")";for(g=window.Install.font_size;(8<g&&window.Utility.measureText(a.text,"bold "+g+"px Verdana"))>this.drogue.height;)g--;
d.font="bold "+g+"px Verdana";if(window.Utility.measureText(a.text,"bold "+g+"px Verdana")>Math.round(6*this.drogue.height/7))for(f=window.Utility.paragraph(a.text,"bold "+g+"px Verdana",Math.round(6*this.drogue.height/7),"\n").split("\n"),h=f.length-1,3<h&&(h=3),a=this.drogue.width/h,--h;0<=h;h--)d.fillText(f[h],Math.round(this.drogue.height/2),this.drogue.width-a*h-Math.round((a-g)/2));else d.fillText(a.text,Math.round(this.drogue.height/2),this.drogue.width-Math.round((this.drogue.width-g)/2));
return c},detachRight:function(){for(var a=window.Install.page_total;1<=a;a--)b("#DrogueRight").find("."+a).remove();b("#DrogueRight").hide()},attachRight:function(a){this.detachRight();if(0!=a){var c=Math.floor(window.Thick.pixel_represents_pages/window.Thick.stretch);this.drogue.height=Math.floor(window.Install.page_height/c)-1;var d=Math.round(window.Install.client_width/2+window.Install.page_width),e=Math.floor((window.Install.page_total-a+1)/window.Thick.pixel_represents_pages);if("Differentiable"==
window.Install.tangent)for(var f=window.Install.identified.length+window.Tagged.identified.length-1,g=window.Install.page_total;g>=window.Install.page_total-a+1;g--){var h=Math.floor((g-1)/window.Thick.pixel_represents_pages),k=!1,l;for(l in window.Install.identified)if(g==window.Install.identified[l].page_number){b("#DrogueRight").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueRight").find(".Drogue."+g).append(this.dockingRight(window.Install.identified[l]));b("#DrogueRight").find(".Drogue."+
g).css("left",d+window.Thick.pile(h)-window.Thick.pile(e)-1+"px").css("top",window.Install.page_top+window.Thick.heap(h)-window.Thick.heap(e)+f%c*this.drogue.height+"px");f--;var p=this;b("#DrogueRight").find(".Drogue."+g).mousemove(function(c){return function(b){p.drogueRightReveal(b,c,window.Install.page_total-a+1)}}(g)).mouseout(function(c){return function(b){p.drogueRightConceal(b,c,window.Install.page_total-a+1)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,
!1)}}(g));k=!0;break}if(!k)for(l in window.Tagged.identified)if(g==window.Tagged.identified[l].page_number){b("#DrogueRight").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueRight").find(".Drogue."+g).append(this.dockingRight(window.Tagged.identified[l]));b("#DrogueRight").find(".Drogue."+g).css("left",d+window.Thick.pile(h)-window.Thick.pile(e)-1+"px").css("top",window.Install.page_top+window.Thick.heap(h)-window.Thick.heap(e)+f%c*this.drogue.height+"px");f--;p=this;b("#DrogueRight").find(".Drogue."+
g).mousemove(function(c){return function(b){p.drogueRightReveal(b,c,window.Install.page_total-a+1)}}(g)).mouseout(function(c){return function(b){p.drogueRightConceal(b,c,window.Install.page_total-a+1)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,!1)}}(g));break}}else if("Integral"==window.Install.tangent)for(f=0,g=1;g<=a;g++){h=Math.floor((window.Install.page_total-g+1)/window.Thick.pixel_represents_pages);k=!1;for(l in window.Install.identified)if(g==
window.Install.identified[l].page_number){b("#DrogueRight").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueRight").find(".Drogue."+g).append(this.dockingRight(window.Install.identified[l]));b("#DrogueRight").find(".Drogue."+g).css("left",d+window.Thick.pile(h)-window.Thick.pile(e)-1+"px").css("top",window.Install.page_top+window.Thick.heap(h)-window.Thick.heap(e)+f%c*this.drogue.height+"px");f++;p=this;b("#DrogueRight").find(".Drogue."+g).mousemove(function(c){return function(b){p.drogueRightReveal(b,
c,a)}}(g)).mouseout(function(c){return function(b){p.drogueRightConceal(b,c,a)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,!1)}}(g));k=!0;break}if(!k)for(l in window.Tagged.identified)if(g==window.Tagged.identified[l].page_number){b("#DrogueRight").append(b('<div class="Drogue '+g+'"></div>'));b("#DrogueRight").find(".Drogue."+g).append(this.dockingRight(window.Tagged.identified[l]));b("#DrogueRight").find(".Drogue."+g).css("left",d+window.Thick.pile(h)-
window.Thick.pile(e)-1+"px").css("top",Math.round(window.Install.page_top+window.Thick.heap(h)-window.Thick.heap(e)+f%c*this.drogue.height)+"px");f++;p=this;b("#DrogueRight").find(".Drogue."+g).mousemove(function(c){return function(b){p.drogueRightReveal(b,c,a)}}(g)).mouseout(function(c){return function(b){p.drogueRightConceal(b,c,a)}}(g)).click(function(a){return function(){window.Utility.repelFrom();window.Atmosphere.goToPage(a,!1)}}(g));break}}b("#DrogueRight").show()}}});b(document).bind("initialize",
function(a){b(b.mobile.Anchor.prototype.options.initSelector,a.target).Anchor()})})(jQuery);
(function(b,r){b.widget("mobile.Relativity",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Relativity')"},_create:function(){this.element.css("width",window.Install.client_width+"px").css("height",window.Install.client_height+"px");this.element.css(browser.prefix+"tap-highlight-color","rgba(0, 0, 0, 0)");1==window.Install.pages_per_mirage?this.element.find(".LowResolution:first-child").css("left",Math.round((window.Install.client_width-window.Install.page_width)/2)+
"px").css("top",window.Install.page_top+"px"):2==window.Install.pages_per_mirage&&(this.element.find(".LowResolution:first-child").css("left",Math.round(window.Install.client_width/2-window.Install.page_width)+"px").css("top",window.Install.page_top+"px"),this.element.find(".LowResolution:last-child").css("left",Math.round(window.Install.client_width/2)+"px").css("top",window.Install.page_top+"px"))},drawMirage:function(a,c){"now"==a&&(window.PDF.grant(parseInt(window.Atmosphere.it)),window.Tagged.grant(parseInt(window.Atmosphere.it)));
this.element.find(".LowResolution").each(function(){b(this).LowResolution().data("LowResolution").drawPage(a,c)})},undrawMirage:function(){this.element.find(".LowResolution").each(function(){b(this).LowResolution().data("LowResolution").undrawPage();b(this).remove()})},cleanMirage:function(){this.element.find(".LowResolution").each(function(){b(this).LowResolution().data("LowResolution").removeYouTubes()});this.element.find(".LowResolution").each(function(){b(this).LowResolution().data("LowResolution").videosPause()});
this.element.find(".LowResolution").each(function(){b(this).LowResolution().data("LowResolution").audiosPause()})},extraordinary:function(){1==window.Install.pages_per_mirage?this.element.find(".LowResolution:first-child").LowResolution().data("LowResolution").addYouTubes():2==window.Install.pages_per_mirage&&(this.element.find(".LowResolution:first-child").LowResolution().data("LowResolution").addYouTubes(),this.element.find(".LowResolution:last-child").LowResolution().data("LowResolution").addYouTubes())},
ambiguous:function(){if(1==window.Install.pages_per_mirage)return this.element.find(".LowResolution:first-child").LowResolution().data("LowResolution").shadowy();if(2==window.Install.pages_per_mirage)return this.element.find(".LowResolution:first-child").LowResolution().data("LowResolution").shadowy()+this.element.find(".LowResolution:last-child").LowResolution().data("LowResolution").shadowy()},deterministic:function(){if(1==window.Install.pages_per_mirage)return 100;if(2==window.Install.pages_per_mirage){var a=
0;"Without"!=this.element.find(".LowResolution:first-child").LowResolution().data("LowResolution").page["@pageNumber"]&&(a+=100);"Without"!=this.element.find(".LowResolution:last-child").LowResolution().data("LowResolution").page["@pageNumber"]&&(a+=100);return a}},mirage:function(a,c,d){if(!this.element.hasClass("Laminate")){this.element.addClass("Laminate");this.element.css("z-index",c);this.element.show();var e=this;window.setTimeout(function(){b(e).hasClass("Laminate")&&(d||b(e).hide(),b(e).removeClass("Laminate"))},
a)}},translate:function(a,c){null==a&&(a="0");"Surface"===browser.platform?0<c&&(this.element.css("transition-duration",c+"ms"),this.element[0].style.msTransform="translateX("+a+"px)"):(0==c?""!==this.element.css(browser.prefix+"transform")&&this.element.css(browser.prefix+"transform")!=="translate("+a+"px, 0px)"&&this.element.css(browser.prefix+"transition-duration",c+"ms"):0<c&&this.element.css(browser.prefix+"transition-duration",c+"ms"),"Opera"===browser.name?0==c?""!==this.element.css("-o-transform")&&
this.element.css("-o-transform")!=="translate("+a+"px, 0px)"&&(this.element[0].style.OTransform="translate("+a+"px, 0px)"):0<c&&(this.element[0].style.OTransform="translate("+a+"px, 0px)"):"Safari"===browser.name?0==c?""!==this.element.css("-webkit-transform")&&this.element.css("-webkit-transform")!=="translate3d("+a+"px, 0px, 0px)"&&(this.element[0].style.webkitTransform="translate3d("+a+"px, 0px, 0px)"):0<c&&(this.element[0].style.webkitTransform="translate3d("+a+"px, 0px, 0px)"):"Chrome"===browser.name?
0==c?""!==this.element.css("-webkit-transform")&&this.element.css("-webkit-transform")!=="translate3d("+a+"px, 0px, 0px)"&&(this.element[0].style.webkitTransform="translate3d("+a+"px, 0px, 0px)"):0<c&&(this.element[0].style.webkitTransform="translate3d("+a+"px, 0px, 0px)"):"Firefox"===browser.name?0==c?""!==this.element.css("-moz-transform")&&this.element.css("-moz-transform")!=="translate("+a+"px, 0px)"&&(this.element[0].style.MozTransform="translate("+a+"px, 0px)"):0<c&&(this.element[0].style.MozTransform=
"translate("+a+"px, 0px)"):"IE"===browser.name?0==c?""!==this.element.css("-ms-transform")&&this.element.css("-ms-transform")!=="translate("+a+"px, 0px)"&&(this.element[0].style.msTransform="translate("+a+"px, 0px)"):0<c&&(this.element[0].style.msTransform="translate("+a+"px, 0px)"):0==c?""!==this.element.css("transform")&&this.element.css("transform")!=="translate("+a+"px, 0px)"&&(this.element[0].style.transform="translate("+a+"px, 0px)"):0<c&&(this.element[0].style.transform="translate("+a+"px, 0px)"))},
derive:function(a,c){window.Atmosphere.is_it_forfeited||(window.Atmosphere.is_it_forfeited=!0,window.Butterfly.install(this.element,a,0),1==window.Parameter.landscape_flipping&&window.Personalize.thick_attain&&2==window.Install.pages_per_mirage&&("Differentiable"==window.Install.tangent?(window.Thick.attachRight(window.Install.page_total+window.Install.first_page_at-c),null!=window.Anchor&&window.Anchor.attachRight(window.Install.page_total+window.Install.first_page_at-c)):"Integral"==window.Install.tangent&&
(window.Thick.attachRight(c),null!=window.Anchor&&window.Anchor.attachRight(c))),this.derive_(0,c))},derive_:function(a,c){if(a>window.Global.omega)window.Butterfly.uninstall(),1==window.Parameter.landscape_flipping&&window.Personalize.thick_attain&&2==window.Install.pages_per_mirage&&("Differentiable"==window.Install.tangent?(window.Thick.attachLeft(c),null!=window.Anchor&&window.Anchor.attachLeft(c)):"Integral"==window.Install.tangent&&(window.Thick.attachLeft(window.Install.page_total+window.Install.first_page_at-
c),null!=window.Anchor&&window.Anchor.attachLeft(window.Install.page_total+window.Install.first_page_at-c))),window.Atmosphere.is_it_forfeited=!1;else{var b=window.Install.page_width+Math.floor(Math.cos(Math.PI/2*a/90)*window.Install.page_width),e=window.Install.page_height-Math.floor(Math.sin(Math.PI/2*a/90)*window.Install.page_height/2);0==a&&window.Butterfly.origamiPrepare(b,e);a==3*window.Global.omega/4&&(window.Atmosphere.should_I_shuffle=!0);a==window.Global.omega&&window.Butterfly.origamiDone(b,
e);0<a&&a<window.Global.omega&&window.Butterfly.origamiFold(b,e);window.Butterfly.camera();var f=this;"Chrome"===browser.name?window.setTimeout(function(){f.derive_(a+window.Global.delta,c)},window.Global.delta*window.Global.delta):window.setTimeout(function(){f.derive_(a+window.Global.delta,c)},window.Global.delta)}},laplace:function(a,c){window.Atmosphere.is_it_forfeited||(window.Atmosphere.is_it_forfeited=!0,window.Butterfly.install(this.element,a,2),1==window.Parameter.landscape_flipping&&window.Personalize.thick_attain&&
2==window.Install.pages_per_mirage&&("Differentiable"==window.Install.tangent?(window.Thick.attachLeft(c),null!=window.Anchor&&window.Anchor.attachLeft(c)):"Integral"==window.Install.tangent&&(window.Thick.attachLeft(window.Install.page_total+window.Install.first_page_at-c),null!=window.Anchor&&window.Anchor.attachLeft(window.Install.page_total+window.Install.first_page_at-c))),this.laplace_(0,c))},laplace_:function(a,c){if(a>window.Global.omega)window.Butterfly.uninstall(),1==window.Parameter.landscape_flipping&&
window.Personalize.thick_attain&&2==window.Install.pages_per_mirage&&("Differentiable"==window.Install.tangent?(window.Thick.attachRight(window.Install.page_total+window.Install.first_page_at-c),null!=window.Anchor&&window.Anchor.attachRight(window.Install.page_total+window.Install.first_page_at-c)):"Integral"==window.Install.tangent&&(window.Thick.attachRight(c),null!=window.Anchor&&window.Anchor.attachRight(c))),window.Atmosphere.is_it_forfeited=!1;else{var b=window.Install.page_width+Math.floor(Math.cos(Math.PI/
2*(180-a)/90)*window.Install.page_width),e=window.Install.page_height-Math.floor(Math.sin(Math.PI/2*(180-a)/90)*window.Install.page_height/2);0==a&&window.Butterfly.origamiPrepare(b,e);a==3*window.Global.omega/4&&(window.Atmosphere.should_I_shuffle=!0);a==window.Global.omega&&window.Butterfly.origamiDone(b,e);0<a&&a<window.Global.omega&&window.Butterfly.origamiFold(b,e);window.Butterfly.camera();var f=this;"Chrome"===browser.name?window.setTimeout(function(){f.laplace_(a+window.Global.delta,c)},window.Global.delta*
window.Global.delta):window.setTimeout(function(){f.laplace_(a+window.Global.delta,c)},window.Global.delta)}}});b(document).bind("initialize",function(a){b(b.mobile.Relativity.prototype.options.initSelector,a.target).Relativity()})})(jQuery);
(function(b,r){b.widget("mobile.LowResolution",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='LowResolution')"},page:null,is_it_done:!1,almost:0,priority:0,you_tube:[],you_tube_i:0,to_play:{source:"skin/to_play.png",length:40,discrepancy:74},addRhetoric_wait:0,googleAnalyticsTrack_counter:0,_create:function(){this.element.css("width",window.Install.page_width+"px").css("height",window.Install.page_height+"px");this.element.css(browser.prefix+"tap-highlight-color","rgba(0, 0, 0, 0)");
this.page=null;this.is_it_done=!1;this.priority=this.almost=0},setUp:function(a){this.page=a},getPageNumber:function(){return this.page["@pageNumber"]},load:function(a){var c=this;if(null!=this.page){if(0==this.element.find("canvas").length){var d=window.Utility.devicePixelRatio();this.element.append(b('<canvas width="'+window.Install.page_width*d+'px" height="'+window.Install.page_height*d+'px"></canvas>'));this.element.find("canvas").css("width",window.Install.page_width+"px");this.element.find("canvas").css("height",
window.Install.page_height+"px");this.element.find("canvas")[0].getContext("2d").setTransform(d,0,0,d,0,0)}"Without"==this.page["@pageNumber"]?this.graffiti():(this.element.addClass("With"),this.element.css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/page_loading.gif")+")"),d={},d.source=this.page["@href"],d.attempt=2,d.priority=a,d.shadowy=function(a){c.loadImageProgress(a)},d.callback=function(a){c.loadImageFinish(a)},window.ImageManager.portrait.push(d))}},
graffiti:function(){this.element.css("background-color",window.Atmosphere.color);var a=this.element.find("canvas")[0].getContext("2d");a.rect(0,0,window.Install.page_width,window.Install.page_height);a.fillStyle=window.Atmosphere.color;a.fill()},loadImageProgress:function(a){this.almost=a},shadowy:function(){return this.almost},loadImageFinish:function(a){this.element.find("canvas")[0].getContext("2d").drawImage(a,0,0,window.Install.page_width,window.Install.page_height);this.watermarking();this.addLinks();
this.removeLinks();this.addRhetoric();"Intel_Safari"!=window.Install.how_is_it_retarded&&(this.addAudios(),this.addVideos());this.is_it_done=!0;window.Atmosphere.pages_available++;this.priority=0;null!=window.Navigate&&(a=window.Install.mirages_coming_preload+window.Install.mirages_previous_preload,a>window.Install.page_total&&(a=window.Install.page_total),a+=window.Install.page_total,window.Navigate.count++,window.Navigate.percentage=Math.round(window.Navigate.count/a*100),window.Navigate.progress(),
98<window.Navigate.percentage&&window.Navigate.complete())},watermarking:function(){if(null!=window.Install.watermarking)if(9==window.Install.watermarking.i)for(var a=0;!(a>=window.Install.page_height);){var c=window.Install.watermarking.height;c>window.Install.page_height&&(c=window.Install.page_height);window.Install.page_height-a<window.Install.watermarking.height&&(c=window.Install.page_height-a);for(var b=0;!(b>=window.Install.page_width);){var e=window.Install.watermarking.width;e>window.Install.page_width&&
(e=window.Install.page_width);window.Install.page_width-b<window.Install.watermarking.width&&(e=window.Install.page_width-b);var f=document.createElement("canvas");f.width=e;f.height=c;f.getContext("2d").putImageData(window.Install.watermarking.image_data,0,0,0,0,e,c);this.element.find("canvas")[0].getContext("2d").drawImage(f,b,a,e,c);b+=e}a+=c}else 9>window.Install.watermarking.i&&(c=window.Install.watermarking.height,c>window.Install.page_height&&(c=window.Install.page_height),a=0,1==Math.floor(window.Install.watermarking.i/
3)?a=Math.round((window.Install.page_height-c)/2):2==Math.floor(window.Install.watermarking.i/3)&&(a=window.Install.page_height-c),e=window.Install.watermarking.width,e>window.Install.page_width&&(e=window.Install.page_width),b=0,1==window.Install.watermarking.i%3?b=Math.floor((window.Install.page_width-e)/2):2==window.Install.watermarking.i%3&&(b=window.Install.page_width-e),f=document.createElement("canvas"),f.width=e,f.height=c,f.getContext("2d").putImageData(window.Install.watermarking.image_data,
0,0,0,0,e,c),this.element.find("canvas")[0].getContext("2d").drawImage(f,b,a,e,c))},googleAnalyticsTrack:function(a){if(null!=window.Parameter.tracking_id)if(5<this.googleAnalyticsTrack_counter)this.googleAnalyticsTrack_counter=0;else if("undefined"===typeof _gat){this.googleAnalyticsTrack_counter++;var c=this;window.setTimeout(function(){c.googleAnalyticsTrack(a)},1E3)}else this.googleAnalyticsTrack_counter=0,_gat._getTracker(window.Parameter.tracking_id)._trackPageview(a)},drawPage:function(a,c){"now"==
a?this.priority+=2:"then"==a&&(this.priority+=1);!this.is_it_done||window.Utility.isItTransparent(this.element.find("canvas")[0])?this.load(this.priority):(c&&(this.addLinks(),this.removeLinks()),this.addRhetoric());"now"==a?("Surface"!=window.Install.how_is_it_retarded&&this.addFrames(),this.googleAnalyticsTrack(this.page["@href"])):"then"==a&&this.element.find(".FrameEmbed").remove()},undrawPage:function(){this.element.find(".LinkDef").remove();this.element.find(".Rhetoric").remove();0<this.element.find("canvas").length&&
(this.element.find("canvas")[0].getContext("2d").clearRect(0,0,window.Install.page_width,window.Install.page_height),this.element.find("canvas").remove());this.page=null;this.is_it_done=!1;this.priority=0},boundary:function(a,c,b){var e={left:0,right:0,top:0,bottom:0,width:0,height:0};"undefined"!=typeof a["@left"]?(e.left=Math.ceil(parseInt(a["@left"])/1E3*window.Install.page_width),e.left-=c):e.left=-1;"undefined"!=typeof a["@right"]?(e.right=Math.ceil(parseInt(a["@right"])/1E3*window.Install.page_width),
e.right+=c):e.right=-1;"undefined"!=typeof a["@bottom"]?(e.bottom=Math.ceil(parseInt(a["@bottom"])/1E3*window.Install.page_height),e.bottom+=c,b&&(e.bottom-=this.to_play.discrepancy)):e.bottom=-1;"undefined"!=typeof a["@top"]?(e.top=Math.ceil(parseInt(a["@top"])/1E3*window.Install.page_height),e.top-=c,b&&(e.top-=this.to_play.discrepancy,0>e.top&&(e.bottom-=e.top,e.top=0))):e.top=-1;e.width=e.right-e.left;e.height=e.bottom-e.top;return e},removeLinks:function(){if(null!=window.Navigate){var a=this;
window.setTimeout(function(){a.removeLinks()},300)}else{var c=window.Install.link_defines[parseInt(this.page["@pageNumber"])];for(i in c)if(null!=c[i]["@duration"]){var b=this.boundary(c[i],0,!1),b="link_note_"+this.page["@pageNumber"]+"_"+b.left+"-"+b.right+"-"+b.top+"-"+b.bottom,a=this;window.setTimeout(function(c){return function(){a.element.find("#"+c).remove()}}(b),1E3*parseInt(c[i]["@duration"]))}}},addLinks:function(){this.element.find(".LinkDef").remove();var a=window.Install.link_defines[parseInt(this.page["@pageNumber"])];
for(i in a)if("undefined"!=typeof a[i]["@url"]&&null!=a[i]["@url"]&&""!=a[i]["@url"]){var c=window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1);a[i]["@graphics"]&&""!=a[i]["@graphics"]?0!=a[i]["@graphics"].indexOf("file:///")&&0!=a[i]["@graphics"].indexOf("http://")&&0!=a[i]["@graphics"].indexOf("https://")&&(a[i]["@graphics"]=window.Utility.absolutizeURL(c,a[i]["@graphics"])):a[i]["@graphics"]=null;if("undefined"==typeof a[i]["@duration"]||""==a[i]["@duration"]||
0==a[i]["@duration"])a[i]["@duration"]=null;null!=a[i]["@duration"]&&this.addLink(a[i])}},addLink:function(a){var c=this.boundary(a,0,!1),d="link_note_"+this.page["@pageNumber"]+"_"+c.left+"-"+c.right+"-"+c.top+"-"+c.bottom,e=null;if(null!=a["@graphics"])e=b('<img class="LinkDef" />'),e.attr("src",a["@graphics"]);else{var e=b('<div class="LinkDef"></div>'),f=window.Personalize.link_color_over;if("undefined"!=typeof a["@colorover"]&&null!=a["@colorover"]&&""!=a["@colorover"]&&"-1"!=a["@colorover"]){f=
1;0<a["@colorover"]&&(f=Math.floor(Math.log(a["@colorover"])/Math.log(16))+1);var g=window.Utility.toHexadecimal(a["@colorover"]);for(a="";6>f;f++)a+="0";a+=g;f="#"+(a.substring(4,5)+a.substring(5,6));f+=a.substring(2,3)+a.substring(3,4);f+=a.substring(0,1)+a.substring(1,2)}e.css("background-color",f);e.css("opacity",.4)}e.css("position","absolute");e.css("cursor","pointer");e.attr("id",d);e.css("left",c.left+"px").css("top",c.top+"px");e.css("width",c.width+"px").css("height",c.height+"px");e.appendTo(this.element)},
addFrames:function(){this.element.find(".FrameEmbed").remove();var a=window.Install.frame_embeds[this.page["@pageNumber"]];for(i in a)if("undefined"!=typeof a[i]["@url"]&&null!=a[i]["@url"]&&""!=a[i]["@url"]){var c=window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1);0!=a[i]["@url"].indexOf("file:///")&&0!=a[i]["@url"].indexOf("http://")&&0!=a[i]["@url"].indexOf("https://")&&(a[i]["@url"]=window.Utility.absolutizeURL(c,a[i]["@url"]));this.addFrame(a[i])}},addFrame:function(a){var c=
b('<iframe class="FrameEmbed"></iframe>');c.css("position","absolute");c.attr("frameborder","0");c.attr("scrolling","no");var d=this.boundary(a,0,!1);c.css("left",d.left+"px").css("top",d.top+"px");c.css("width",d.width+"px").css("height",d.height+"px");c.prependTo(this.element);c.attr("src",a["@url"]);c.css("background-color","transparent");var e=this;c[0].attachEvent?c[0].attachEvent("onload",function(){e.addFrame_(c,d)}):c[0].onload=function(){e.addFrame_(c,d)}},addFrame_:function(a,c){"Intel"===
browser.platform||"Android"===browser.platform?(a.contents()[0].addEventListener("touchstart",function(a){window.Atmosphere.touchStart(window.Utility.translate(a,c.left,c.top))},!1),a.contents()[0].addEventListener("touchmove",function(a){window.Atmosphere.touchMove(window.Utility.translate(a,c.left,c.top))},!1),a.contents()[0].addEventListener("touchend",function(a){return window.Atmosphere.touchEnd(window.Utility.translate(a,c.left,c.top))},!1)):"Surface"!==browser.platform&&a.contents()[0].addEventListener("gesturechange",
function(a){return window.Atmosphere.gestureChange(window.Utility.translate(a,c.left,c.top))},!1)},removeYouTubes:function(){this.element.find(".YouTubeEmbed").remove();this.you_tube=[];this.you_tube_i=0},addYouTubes:function(){if(window.Install.you_tubed){this.removeYouTubes();var a=window.Install.video_embeds[this.page["@pageNumber"]];for(i in a)"undefined"!=typeof a[i]["@url"]&&null!=a[i]["@url"]&&""!=a[i]["@url"]&&"undefined"!=typeof a[i]["@type"]&&"youtube"==a[i]["@type"]&&this.addYouTube(a[i])}else{var c=
this;window.setTimeout(function(){c.addYouTubes()},500)}},addYouTube:function(a){var c=this.boundary(a,0,!1),d="you_tube_note_"+this.page["@pageNumber"]+"_"+c.left+"-"+c.right+"-"+c.top+"-"+c.bottom,e=b('<div class="YouTubeEmbed"></div>');e.css("position","absolute");e.css("border","none");e.attr("id",d);e.css("left",c.left+"px").css("top",c.top+"px");e.prependTo(this.element);this.you_tube[this.you_tube_i++]=new YT.Player(d,{height:c.height,width:c.width,videoId:a["@url"]})},videosPause:function(){this.element.find(".VideoEmbed").each(function(){0<
b(this).find("video").length&&(b(this).find("video")[0].paused||b(this).find("video")[0].pause())})},addVideos:function(){this.videosPause();this.element.find(".VideoEmbed").remove();var a=window.Install.video_embeds[this.page["@pageNumber"]];for(i in a)if("undefined"!=typeof a[i]["@url"]&&null!=a[i]["@url"]&&""!=a[i]["@url"]&&("undefined"==typeof a[i]["@type"]||"youtube"!=a[i]["@type"])){var c=window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1);0!=a[i]["@url"].indexOf("file:///")&&
0!=a[i]["@url"].indexOf("http://")&&0!=a[i]["@url"].indexOf("https://")&&(a[i]["@url"]=window.Utility.absolutizeURL(c,a[i]["@url"]));"undefined"!=typeof a[i]["@skin"]&&null!=a[i]["@skin"]&&""!=a[i]["@skin"]?0!=a[i]["@skin"].indexOf("file:///")&&0!=a[i]["@skin"].indexOf("http://")&&0!=a[i]["@skin"].indexOf("https://")&&(a[i]["@skin"]=window.Utility.absolutizeURL(c,a[i]["@skin"])):a[i]["@skin"]=null;var c=!1,b;for(b in window.Install.video_MIME[browser.platform])if(a[i]["@url"].toUpperCase().lastIndexOf("."+
window.Install.video_MIME[browser.platform][b])==a[i]["@url"].length-4){c=!0;break}c&&this.addVideo(a[i])}},addVideo:function(a){var c=b('<div class="VideoEmbed flowplayer playful no-hover fixed-controls is-splash"></div>');c.css("position","absolute");var d=this.boundary(a,0,!1);c.css("left",d.left+"px").css("top",d.top+"px");c.css("width",d.width+"px").css("height",d.height+"px");c.prependTo(this.element);d=[];"MP4"==a["@url"].substring(a["@url"].lastIndexOf(".")+1).toUpperCase()?d.push({mp4:a["@url"]}):
"WEBM"==a["@url"].substring(a["@url"].lastIndexOf(".")+1).toUpperCase()?d.push({webm:a["@url"]}):"OGG"==a["@url"].substring(a["@url"].lastIndexOf(".")+1).toUpperCase()&&d.push({ogg:a["@url"]});c.flowplayer({playlist:[d]});null!=a["@skin"]?c.css("background-image","url('"+a["@skin"]+"')"):c.css("background-color","#0F0F0F")},audiosPause:function(){this.element.find(".AudioEmbed").each(function(){0<b(this).find("video").length&&(b(this).find("video")[0].paused||b(this).find("video")[0].pause())})},
addAudios:function(){0!=this.to_play.source.indexOf("file:///")&&0!=this.to_play.source.indexOf("http://")&&0!=this.to_play.source.indexOf("https://")&&(this.to_play.source=window.Utility.absolutizeURL(window.Global.viewer_URL.substring(0,window.Global.viewer_URL.lastIndexOf("/")+1),this.to_play.source));this.audiosPause();this.element.find(".AudioEmbed").remove();var a=window.Install.audio_embeds[this.page["@pageNumber"]];for(i in a)if("undefined"!=typeof a[i]["@url"]&&null!=a[i]["@url"]&&""!=a[i]["@url"]){var c=
window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1);0!=a[i]["@url"].indexOf("file:///")&&0!=a[i]["@url"].indexOf("http://")&&0!=a[i]["@url"].indexOf("https://")&&(a[i]["@url"]=window.Utility.absolutizeURL(c,a[i]["@url"]));"undefined"!=typeof a[i]["@graphics"]&&null!=a[i]["@graphics"]&&""!=a[i]["@graphics"]?0!=a[i]["@graphics"].indexOf("file:///")&&0!=a[i]["@graphics"].indexOf("http://")&&0!=a[i]["@graphics"].indexOf("https://")&&(a[i]["@graphics"]=window.Utility.absolutizeURL(c,
a[i]["@graphics"])):a[i]["@graphics"]=null;var c=!1,b;for(b in window.Install.audio_MIME[browser.platform])if(a[i]["@url"].toUpperCase().lastIndexOf("."+window.Install.audio_MIME[browser.platform][b])==a[i]["@url"].length-4){c=!0;break}c&&this.addAudio(a[i])}},addAudio:function(a){var c=b('<div class="AudioEmbed flowplayer playful no-hover fixed-controls aside-time is-splash"></div>');c.css("position","absolute");var d=this.boundary(a,0,!1);c.css("left",d.left+"px").css("top",d.top+"px");if(null==
a["@graphics"]||0==d.width||0==d.height)d.height=d.width=this.to_play.length;d.width<this.to_play.length?c.css("width",this.to_play.length+"px"):c.css("width",d.width+"px");c.css("height",d.height+"px");c.prependTo(this.element);var e=[];"MP3"==a["@url"].substring(a["@url"].lastIndexOf(".")+1).toUpperCase()&&e.push({mp4:a["@url"]});c.flowplayer({playlist:[e]});null!=a["@graphics"]?c.css("background-image","url('"+a["@graphics"]+"')"):c.css("background-image","url('"+this.to_play.source+"')");c.css("background-size",
d.width+"px "+d.height+"px")},addRhetoric:function(){if(window.World.highlight_show){this.element.find(".Rhetoric").remove();var a=-1,c;for(c in window.Seek.pages)window.Seek.pages[c]["@pageNumber"]==this.getPageNumber()&&(a=c);if(-1!=a){if("undefined"==typeof window.Seek.pages[a].words){if("undefined"==typeof this.page["@words"]||null==this.page["@words"])return;window.Install.getSearchableWordXML(this.page["@words"])}this.addRhetoric_wait=0;this.addRhetoric_(window.Seek.pages[a])}}},addRhetoric_:function(a){if("undefined"==
typeof a.words){if(this.addRhetoric_wait+=.5,!(5<this.addRhetoric_wait)){var c=this;window.setTimeout(function(){c.addRhetoric_(a)},500)}}else{var d=window.Utility.split(window.Seek.look_for.replace(/,/g,window.Install.preposition[0]),window.Install.preposition);if(0!=d.length){for(var e=[],f=0;f<a.words.word.length;)if("undefined"==typeof a.words.word[f]["#text"])f++;else if(1<d.length){for(var g=!0,h=0;h<d.length;h++){if("undefined"==typeof a.words.word[f+h]){g=!1;f++;break}if(window.Utility.polish(a.words.word[f+
h]["#text"].replace(/,/g,window.Install.preposition[0]),window.Install.preposition).toLowerCase()!=d[h].toLowerCase()){g=!1;f++;break}}if(g){for(h=0;h<d.length;h++){var g=Math.round(parseInt(a.words.word[f+h]["@left"])/1E3*window.Install.page_width),k=Math.round(parseInt(a.words.word[f+h]["@right"])/1E3*window.Install.page_width),l=Math.round(parseInt(a.words.word[f+h]["@top"])/1E3*window.Install.page_height),p=Math.round(parseInt(a.words.word[f+h]["@bottom"])/1E3*window.Install.page_height);e.push({left:g,
top:l,width:k-g,height:p-l})}f+=d.length}}else{h=window.Utility.polish(a.words.word[f]["#text"].replace(/,/g,window.Install.preposition[0]),window.Install.preposition);l=h.toLowerCase().indexOf(d[0].toLowerCase());if(-1!=l){var p=parseInt(a.words.word[f]["@right"])-parseInt(a.words.word[f]["@left"]),m=window.Install.font_size+"px 'Courier New' Arial",g=Math.round(parseInt(a.words.word[f]["@left"])/1E3*window.Install.page_width),g=g+Math.round(window.Utility.measureText(h.substring(0,l),m)/window.Utility.measureText(h,
m)*p/1E3*window.Install.page_width),k=Math.round(parseInt(a.words.word[f]["@right"])/1E3*window.Install.page_width),k=k-Math.round(window.Utility.measureText(h.substring(l+d[0].length),m)/window.Utility.measureText(h,m)*p/1E3*window.Install.page_width),l=Math.round(parseInt(a.words.word[f]["@top"])/1E3*window.Install.page_height),p=Math.round(parseInt(a.words.word[f]["@bottom"])/1E3*window.Install.page_height);e.push({left:g,top:l,width:k-g,height:p-l})}f++}for(f in e)d=b('<div class="Rhetoric"></div>'),
d.css("position","absolute"),g=Math.ceil(window.Seek.rhetoric.line_width/2),"translucent"==window.Seek.rhetoric.style?(d.css("background-color",window.Seek.rhetoric.color),d.css("opacity",.4),d.css("left",e[f].left+"px").css("top",e[f].top+"px")):"underline"==window.Seek.rhetoric.style?(d.css("border-bottom",g+"px solid "+window.Seek.rhetoric.color),d.css("opacity",.6),d.css("left",e[f].left+"px").css("top",e[f].top-g+"px")):"rectangle"==window.Seek.rhetoric.style&&(d.css("border",g+"px solid "+window.Seek.rhetoric.color),
d.css("opacity",.6),d.css("left",e[f].left-g+"px").css("top",e[f].top-g+"px")),d.css("width",e[f].width+"px").css("height",e[f].height+"px"),d.appendTo(this.element)}}},touchable:function(a){if(null==a||-1==window.Utility.x(a)||-1==window.Utility.y(a))return!1;var c=window.Install.audio_embeds[this.page["@pageNumber"]];for(i in c){var b=this.boundary(c[i],6,!1);b.left+=parseInt(this.element.css("left"));b.right=null==c[i]["@graphics"]||0==b.width||b.width<this.to_play.length?b.left+this.to_play.length:
b.right+parseInt(this.element.css("left"));b.top+=parseInt(this.element.css("top"));b.bottom+=parseInt(this.element.css("top"));if(b.left<window.Utility.x(a)&&window.Utility.x(a)<b.right&&b.top<window.Utility.y(a)&&window.Utility.y(a)<b.bottom)return!1}c=window.Install.video_embeds[this.page["@pageNumber"]];for(i in c)if(b=this.boundary(c[i],12,!0),b.left+=parseInt(this.element.css("left")),b.right+=parseInt(this.element.css("left")),b.top+=parseInt(this.element.css("top")),b.bottom+=parseInt(this.element.css("top")),
b.left<window.Utility.x(a)&&window.Utility.x(a)<b.right&&b.top<window.Utility.y(a)&&window.Utility.y(a)<b.bottom)return!1;c=window.Install.link_defines[parseInt(this.page["@pageNumber"])];for(i in c)if(b=this.boundary(c[i],6,!1),b.left+=parseInt(this.element.css("left")),b.right+=parseInt(this.element.css("left")),b.top+=parseInt(this.element.css("top")),b.bottom+=parseInt(this.element.css("top")),b.left<window.Utility.x(a)&&window.Utility.x(a)<b.right&&b.top<window.Utility.y(a)&&window.Utility.y(a)<
b.bottom)return!1;return!0},touch:function(a){if(null!=a&&-1!=window.Utility.x(a)&&-1!=window.Utility.y(a)){var c=window.Install.link_defines[parseInt(this.page["@pageNumber"])];window.Atmosphere.how=!1;for(i in c)if(this.linkTouched(c[i],a))break}},linkTouched:function(a,c){var d=this.boundary(a,6,!1);d.left+=parseInt(this.element.css("left"));d.right+=parseInt(this.element.css("left"));d.top+=parseInt(this.element.css("top"));d.bottom+=parseInt(this.element.css("top"));if(d.left<window.Utility.x(c)&&
window.Utility.x(c)<d.right&&d.top<window.Utility.y(c)&&window.Utility.y(c)<d.bottom){-1!=a["@url"].indexOf("|")&&(a["@url"]=a["@url"].substring(0,a["@url"].indexOf("|")));for(f in window.Atmosphere.pages)if(d=window.Atmosphere.getPageDetail(f),null!=d){var e=a["@url"];0!=a["@url"].indexOf("http://")&&0!=a["@url"].indexOf("https://")&&(e=window.Utility.absolutizeURL(window.Global.root_URL+"normal/",a["@url"]));if(d["@href"]==e)return window.Atmosphere.goToPage(d["@pageNumber"],!1),!0}if(0==a["@url"].indexOf("mailto:"))b.colorbox({href:a["@url"],
iframe:!0,width:"100%",height:"100%"}),window.setTimeout(function(){b.colorbox.close()},5E3);else if(0==a["@url"].indexOf("iframe:")){e=a["@url"].substring(7);0!=e.indexOf("http://")&&0!=e.indexOf("https://")&&(e=window.Utility.absolutizeURL(window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1),e));var f=a["@url"].indexOf("type=")+5,f=a["@url"].substring(f);-1!=f.indexOf("&")&&(f=f.substring(0,f.indexOf("&")));var g="",d=a["@url"].indexOf("title=");-1!=d&&(g=
a["@url"].substring(d+6),-1!=g.indexOf("&")&&(g=g.substring(0,g.indexOf("&"))),g=unescape(g));if("video"==f){var h=0,f=a["@url"].indexOf("width=");-1!=f&&(h=a["@url"].substring(f+6),-1!=h.indexOf("&")&&(h=h.substring(0,h.indexOf("&"))),h=unescape(h));var k=0,f=a["@url"].indexOf("height=");-1!=f&&(k=a["@url"].substring(f+7),-1!=k.indexOf("&")&&(k=k.substring(0,k.indexOf("&"))),k=unescape(k));window.setTimeout(function(){b.colorbox({href:e,width:0==parseInt(h)?window.Personalize.iframe_video.inner_width:
Math.ceil(parseInt(h)/window.Install.client_width*108)+"%",height:0==parseInt(k)?window.Personalize.iframe_video.inner_height:Math.ceil(parseInt(k)/window.Install.client_height*113)+"%",iframe:!0,title:g})},300)}else"image"==f?window.setTimeout(function(){b.colorbox({href:e,initialWidth:"50%",initialHeight:"30%",maxWidth:window.Personalize.iframe_image.maximal_width,maxHeight:window.Personalize.iframe_image.maximal_height,scalePhotos:!0,photo:!0,title:g})},300):window.setTimeout(function(){b.colorbox({href:e,
width:window.Personalize.iframe_default.width,height:window.Personalize.iframe_default.height,iframe:!0,title:g})},300);this.FlipAnalyzerTrack(window.Atmosphere.getPageDetail(window.Atmosphere.it)["@href"],e)}else e=a["@url"],0!=e.indexOf("http://")&&0!=e.indexOf("https://")&&(e=window.Utility.absolutizeURL(window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1),e)),"undefined"!=typeof window.open(e,"_blank")&&this.FlipAnalyzerTrack(window.Atmosphere.getPageDetail(window.Atmosphere.it)["@href"],
e),window.Atmosphere.how=!0;return!0}return!1},FlipAnalyzerTrack:function(a,c){if(null!=window.Install.FlipAnalyzer.url&&""!=window.Install.FlipAnalyzer.url){var d=this;null==window.Install.FlipAnalyzer.token?setTimeout(function(){d.FlipAnalyzerTrack(a,c)},1E3):b.post(window.Install.FlipAnalyzer.url+"/bClick.cgi",{key:window.Install.FlipAnalyzer.token,rp:a,cl:c,Td:window.Utility.getCurrentDate(),tt:window.Utility.getCurrentTime()},null)}}});b(document).bind("initialize",function(a){b(b.mobile.LowResolution.prototype.options.initSelector,
a.target).LowResolution()})})(jQuery);
(function(b,r){b.widget("mobile.HighDefinition",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='HighDefinition')"},gesture:null,double_tappable:!0,last_touched:0,how:!1,is_shown:!1,my_scroll:null,event:null,you_tube:[],you_tube_i:0,to_play:{source:"./skin/to_play.png",length:40,discrepancy:74},oasis:null,spread_out:null,scale_downmost:1,scale_upmost:1,scale_initial:1,addRhetoric_wait:0,_create:function(){window.HighDefinition=this;var a=this;this.element.css(browser.prefix+
"tap-highlight-color","rgba(0, 0, 0, 0)");this.element.hide();this.element[0].addEventListener("touchmove",function(a){a.preventDefault()},!1);b(document).bind("orientationChange",function(){a.element.css("width",window.Install.client_width+"px").css("height",window.Install.client_height+"px")});"Surface"===browser.platform?(this.gesture=new MSGesture,this.gesture.target=this.element[0],this.element[0].addEventListener("MSGestureStart",function(c){a.MSGestureStart(c)},!1),this.element[0].addEventListener("MSGestureChange",
function(c){return a.MSGestureChange(c)},!1),this.element[0].addEventListener("MSGestureEnd",function(c){return a.MSGestureEnd(c)},!1),this.element[0].addEventListener("MSGestureTap",function(c){return a.tap(c)},!1),this.element[0].addEventListener("pointerdown",function(c){a.gesture.addPointer(c.pointerId)},!1)):this.element.bind("Intel"===browser.platform?"click":"tap",function(c){return a.tap(c)})},graffiti:function(){b("#HighDefinition").css("background-color",window.Atmosphere.color)},prepare:function(){this.scale_downmost=
window.Install.page_height/window.Install.magnify_height;this.scale_upmost=3;this.my_scroll=new iScroll("HighDefinition",{zoom:!0,zoomMin:this.scale_downmost,zoomMax:this.scale_upmost,doubleTapZoom:this.double_tappable?1:0,hScroll:!0,vScroll:!0,hScrollbar:!0,vScrollbar:!0,bounce:!1,bounceLock:!0,onZoomEnd:function(){window.HighDefinition.my_scroll.scale<=1.1*window.HighDefinition.scale_downmost&&window.HighDefinition.hide()}});for(var a=0;2>a;a++)this.watermarking(a)},prepare_:function(){this.scale_downmost=
window.Install.page_height/window.Install.magnify_height;null!=this.my_scroll&&(this.my_scroll.options.zoomMin=this.scale_downmost)},tap:function(a){if(a.touches||-1==window.Utility.x(a)||-1==window.Utility.y(a))return!0;if(this.double_tappable&&this.touchable(a)){a.preventDefault();var c=(new Date).getTime();if(c-this.last_touched<window.Global.double_tapped&&0<c-this.last_touched)return this.hide(),window.Utility.fall(a,!1);this.last_touched=c}else this.touch(a);return this.how?window.Utility.fall(a,
!0):!0},MSGestureStart:function(a){window.HighDefinition.is_shown&&(this.event={scale:this.my_scroll.scale})},MSGestureChange:function(a){if(window.HighDefinition.is_shown){if(null==this.event||1==a.scale)return!0;this.event.scale*=a.scale;this.event.scale>this.scale_upmost?this.event.scale=this.scale_upmost:this.event.scale<this.scale_downmost&&(this.event.scale=this.scale_downmost);if(this.event.scale.toFixed(2)==this.my_scroll.scale.toFixed(2))return!0;var c=0;null!=this.spread_out[0]&&"Without"!=
this.spread_out[0]["@pageNumber"]||c--;this.my_scroll.zoom(Math.round((a.clientX+a.translationX)/a.scale-(window.Install.client_width-window.Install.page_width*window.Install.pages_per_mirage)/2+window.Install.page_width*c),Math.round((a.clientY+a.translationY)/a.scale-window.Install.page_top),this.event.scale,0);this.my_scroll.scale<=1.1*this.scale_downmost&&this.hide();return window.Utility.fall(a,!1)}},MSGestureEnd:function(a){return window.HighDefinition.is_shown&&(this.event=null,1==a.scale)?
!0:window.Utility.fall(a,!1)},watermarking:function(a){if(null!=window.Install.watermarking){if(9==window.Install.watermarking.i){var c=document.createElement("canvas");c.width=window.Install.magnify_width;c.height=window.Install.magnify_height;for(var d=0;!(d>=window.Install.magnify_height);){var e=window.Install.watermarking.height;e>window.Install.magnify_height&&(e=window.Install.magnify_height);window.Install.magnify_height-d<window.Install.watermarking.height&&(e=window.Install.magnify_height-
d);for(var f=0;!(f>=window.Install.magnify_width);){var g=window.Install.watermarking.width;g>window.Install.magnify_width&&(g=window.Install.magnify_width);window.Install.magnify_width-f<window.Install.watermarking.width&&(g=window.Install.magnify_width-f);var h=document.createElement("canvas");h.width=g;h.height=e;h.getContext("2d").putImageData(window.Install.watermarking.image_data,0,0,0,0,g,e);c.getContext("2d").drawImage(h,f,d,g,e);f+=g}d+=e}c='<img id="Watermarking_'+a+'" class="Translucency" src="'+
c.toDataURL("image/png")+'" width="'+window.Install.magnify_width+'px" height="'+window.Install.magnify_height+'px" ';c+='style="position:absolute; left:'+window.Install.magnify_width*a+'px; top:0px; z-index:65;" />';this.element.find("#HighDefinitionContentScroller").append(b(c))}else 9>window.Install.watermarking.i&&(e=window.Install.watermarking.height,e>window.Install.magnify_height&&(e=window.Install.magnify_height),d=0,1==Math.floor(window.Install.watermarking.i/3)?d=Math.round((window.Install.magnify_height-
e)/2):2==Math.floor(window.Install.watermarking.i/3)&&(d=window.Install.magnify_height-e),g=window.Install.watermarking.width,g>window.Install.magnify_width&&(g=window.Install.magnify_width),f=0,1==window.Install.watermarking.i%3?f=Math.floor((window.Install.magnify_width-g)/2):2==window.Install.watermarking.i%3&&(f=window.Install.magnify_width-g),h=document.createElement("canvas"),h.width=g,h.height=e,h.getContext("2d").putImageData(window.Install.watermarking.image_data,0,0,0,0,g,e),c='<img id="Watermarking_'+
a+'" class="Translucency" src="'+h.toDataURL("image/png")+'" width="'+g+'px" height="'+e+'px" style="position:absolute; left:',c+=window.Install.magnify_width*a+f+"px; top:"+d+'px; z-index:65;" />',this.element.find("#HighDefinitionContentScroller").append(b(c)));b("#Watermarking_"+a).hide()}},spotAt:function(a,c,d,e){if(null!=a&&-1!=window.Utility.x(a)&&-1!=window.Utility.y(a)){var f=window.Utility.x(a)-Math.round((window.Install.client_width-window.Install.page_width*window.Install.pages_per_mirage)/
2);a=window.Utility.y(a)-window.Install.page_top;var g=0;"naive"==e?(f=d<window.Install.client_width?0:f+window.Install.page_width*c,g=500):"comprehensive"==e&&(f+=window.Install.page_width*c,g=1500);2==window.Install.pages_per_mirage&&(null==this.spread_out[0]||"Without"==this.spread_out[0]["@pageNumber"]||null==this.spread_out[1]||"Without"==this.spread_out[1]["@pageNumber"])&&Math.round((window.Install.page_width-f)*this.scale_initial/this.my_scroll.scale)<=window.Install.client_width&&(f=Math.round(window.Install.page_width-
window.Install.client_width*this.my_scroll.scale/this.scale_initial));this.my_scroll.zoom(f,a,this.scale_initial,g);this.my_scroll.refresh();d<window.Install.client_width&&(d=window.Install.client_width);b("#HighDefinitionContentScroller").css("width",d+"px");this.my_scroll.refresh()}},hide:function(){this.element.hide();b("#HighDefinitionContentScroller").css("width","0px").css("height","0px");this.element.find("#HighDefinitionContentScroller").find("img").not(".Translucency").remove();b(".Translucency").hide();
this.element.find(".LinkDef").remove();this.removeFrames();this.removeYouTubes();this.videosPause();this.element.find(".VideoEmbed").remove();this.audiosPause();this.element.find(".AudioEmbed").remove();this.element.find(".Rhetoric").remove();null!=this.oasis&&(null!=this.spread_out[0]&&"Without"!=this.spread_out[0]["@pageNumber"]&&null!=this.oasis[0]&&this.oasis[0].LowResolution().data("LowResolution").addYouTubes(),null!=this.spread_out[1]&&"Without"!=this.spread_out[1]["@pageNumber"]&&null!=this.oasis[1]&&
this.oasis[1].LowResolution().data("LowResolution").addYouTubes());this.oasis=this.spread_out=null;b("#Atmosphere").show();this.my_scroll.scrollTo(0,0);this.my_scroll.scale=this.scale_downmost;this.my_scroll.refresh();window.Atmosphere.gesture_delta.current=0;window.Atmosphere.gesture_delta.previous=0;var a=this;"Surface"===browser.platform?window.setTimeout(function(){a.is_shown=!1},2E3):this.is_shown=!1},show:function(a,c,d,e){if(null!=d&&-1!=window.Utility.x(d)&&-1!=window.Utility.y(d)){this.oasis=
[];this.oasis[0]=a;this.oasis[1]=c;this.spread_out=[];this.spread_out[0]=this.oasis[0].LowResolution().data("LowResolution").page;this.spread_out[1]=this.oasis[1].LowResolution().data("LowResolution").page;1==window.Install.pages_per_mirage?this.spread_out[1]=null:2==window.Install.pages_per_mirage&&this.spread_out[0]["@pageNumber"]==this.spread_out[1]["@pageNumber"]&&(this.spread_out[1]=null);b("#Atmosphere").hide();this.element.find("#HighDefinitionContentScroller").find("img").not(".Translucency").remove();
b(".Translucency").hide();this.element.find(".LinkDef").remove();this.removeFrames();this.removeYouTubes();this.videosPause();this.element.find(".VideoEmbed").remove();this.audiosPause();this.element.find(".AudioEmbed").remove();this.element.find(".Rhetoric").remove();c=a=0;null!=this.spread_out[0]&&"Without"!=this.spread_out[0]["@pageNumber"]?(null!=this.oasis[0]&&(this.oasis[0].LowResolution().data("LowResolution").audiosPause(),this.oasis[0].LowResolution().data("LowResolution").removeYouTubes(),
this.oasis[0].LowResolution().data("LowResolution").videosPause()),a++):c--;null!=this.spread_out[1]&&"Without"!=this.spread_out[1]["@pageNumber"]&&(null!=this.oasis[1]&&(this.oasis[1].LowResolution().data("LowResolution").audiosPause(),this.oasis[1].LowResolution().data("LowResolution").removeYouTubes(),this.oasis[1].LowResolution().data("LowResolution").videosPause()),a++);b("#HighDefinitionContentScroller").css("width",window.Install.magnify_width*window.Install.pages_per_mirage+"px");b("#HighDefinitionContentScroller").css("height",
window.Install.magnify_height+"px");this.element.show();var f=0;if("naive"==e)for(var g in this.spread_out){if(null!=this.spread_out[g]&&"Without"!=this.spread_out[g]["@pageNumber"]){var h='<img id="spread_out_'+g+'" src="'+this.spread_out[g]["@href"]+'" width="'+window.Install.magnify_width+'px" height="'+window.Install.magnify_height+'px"',h=h+('style="'+browser.prefix+"transform:translateZ(0); position:absolute; left:"+window.Install.magnify_width*f+'px; top:0px; float:left; z-index:64;" />');
this.element.find("#HighDefinitionContentScroller").append(b(h));h='<img src="'+this.spread_out[g]["@href"]+'" width="'+window.Install.magnify_width+'px" height="'+window.Install.magnify_height+'px"';h+='style="'+browser.prefix+"transform:translateZ(0); position:absolute; left:"+window.Install.magnify_width*f+'px; top:0px; float:left; z-index:63;" />';this.element.find("#HighDefinitionContentScroller").append(b(h));b("#spread_out_"+g).attr("src",this.spread_out[g]["@href2"]);var k=this;window.setTimeout(function(a){return function(){b("#Watermarking_"+
a).show()}}(f),750*(f+1));f++}}else if("comprehensive"==e){for(g in this.spread_out)null!=this.spread_out[g]&&"Without"!=this.spread_out[g]["@pageNumber"]&&(h='<img id="spread_out_'+g+'" src="'+this.spread_out[g]["@href"]+'" width="'+window.Install.magnify_width+'px" height="'+window.Install.magnify_height+'px" ',h+='style="'+browser.prefix+"transform:translateZ(0); position:absolute; left:"+window.Install.magnify_width*f+'px; top:0px; float:left; z-index:64;" />',this.element.find("#HighDefinitionContentScroller").append(b(h)),
f++);k=this;window.setTimeout(function(){k.show_()},750*f)}this.my_scroll.scale=this.scale_downmost;this.my_scroll.refresh();this.spotAt(d,c,window.Install.magnify_width*a,e);this.double_tappable=!0;this.addLinks();this.addRhetorics();"Intel_Safari"!=window.Install.how_is_it_retarded&&(this.addAudios(),this.addVideos(),this.addYouTubes(),"Surface"!=window.Install.how_is_it_retarded&&this.addFrames());this.is_shown=!0;window.Atmosphere.is_it_forfeited=!1}},show_:function(){var a=0,c;for(c in this.spread_out)if(null!=
this.spread_out[c]&&"Without"!=this.spread_out[c]["@pageNumber"]){var d='<img src="'+this.spread_out[c]["@href"]+'" width="'+window.Install.magnify_width+'px" height="'+window.Install.magnify_height+'px" ',d=d+('style="'+browser.prefix+"transform:translateZ(0); position:absolute; left:"+window.Install.magnify_width*a+'px; top:0px; float:left; z-index:63;" '),d=d+("onLoad=\"$('#spread_out_"+c+"').attr('src', '"+this.spread_out[c]["@href2"]+"')\" />");this.element.find("#HighDefinitionContentScroller").append(b(d));
b("#Watermarking_"+a).show();a++}},boundary:function(a,c,b,e){var f={left:0,right:0,top:0,bottom:0,width:0,height:0};"undefined"!=typeof a["@left"]?(f.left=Math.ceil(parseInt(a["@left"])/1E3*window.Install.magnify_width),f.left+=window.Install.magnify_width*c,f.left-=b):f.left=-1;"undefined"!=typeof a["@right"]?(f.right=Math.ceil(parseInt(a["@right"])/1E3*window.Install.magnify_width),f.right+=window.Install.magnify_width*c,f.right+=b):f.right=-1;"undefined"!=typeof a["@bottom"]?(f.bottom=Math.ceil(parseInt(a["@bottom"])/
1E3*window.Install.magnify_height),f.bottom+=b,e&&(f.bottom-=this.to_play.discrepancy)):f.bottom=-1;"undefined"!=typeof a["@top"]?(f.top=Math.ceil(parseInt(a["@top"])/1E3*window.Install.magnify_height),f.top-=b,e&&(f.top-=this.to_play.discrepancy,0>f.top&&(f.bottom-=f.top,f.top=0))):f.top=-1;f.width=f.right-f.left;f.height=f.bottom-f.top;return f},addLinks:function(){var a=0,c;for(c in this.spread_out)if(null!=this.spread_out[c]&&"Without"!=this.spread_out[c]["@pageNumber"]){var b=window.Install.link_defines[parseInt(this.spread_out[c]["@pageNumber"])];
for(j in b)if("undefined"!=typeof b[j]["@url"]&&null!=b[j]["@url"]&&""!=b[j]["@url"]){var e=window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1);"undefined"!=typeof b[j]["@graphics"]&&null!=b[j]["@graphics"]&&""!=b[j]["@graphics"]?0!=b[j]["@graphics"].indexOf("file:///")&&0!=b[j]["@graphics"].indexOf("http://")&&0!=b[j]["@graphics"].indexOf("https://")&&(b[j]["@graphics"]=window.Utility.absolutizeURL(e,b[j]["@graphics"])):b[j]["@graphics"]=null;if("undefined"==
typeof b[j]["@duration"]||""==b[j]["@duration"]||0==b[j]["@duration"])b[j]["@duration"]=null;this.addLink(b[j],c,a)}a++}},addLink:function(a,c,d){d=this.boundary(a,d,0,!1);c="link_paper_"+this.spread_out[c]["@pageNumber"]+"_"+d.left+"-"+d.right+"-"+d.top+"-"+d.bottom;var e=null;if(null!=a["@graphics"])e=b('<img class="LinkDef" />'),e.attr("src",a["@graphics"]);else{var e=b('<div class="LinkDef"></div>'),f="#5DA3D4";if("undefined"!=typeof a["@colorover"]&&null!=a["@colorover"]&&""!=a["@colorover"]&&
"-1"!=a["@colorover"]){f=1;0<a["@colorover"]&&(f=Math.floor(Math.log(a["@colorover"])/Math.log(16))+1);var g=window.Utility.toHexadecimal(a["@colorover"]);for(a="";6>f;f++)a+="0";a+=g;f="#"+(a.substring(4,5)+a.substring(5,6));f+=a.substring(2,3)+a.substring(3,4);f+=a.substring(0,1)+a.substring(1,2)}e.css("background-color",f);e.css("opacity",.4)}e.css("position","absolute");e.css("cursor","pointer");e.attr("id",c);e.css("left",d.left+"px").css("top",d.top+"px");e.css("width",d.width+"px").css("height",
d.height+"px");e.css("z-index",65);e.appendTo("#HighDefinitionContentScroller")},removeFrames:function(){this.element.find(".FrameEmbed").each(function(){b(this).parent().find("div").remove()});this.element.find(".FrameEmbed").remove()},addFrames:function(){var a=0,b;for(b in this.spread_out)if(null!=this.spread_out[b]&&"Without"!=this.spread_out[b]["@pageNumber"]){var d=window.Install.frame_embeds[parseInt(this.spread_out[b]["@pageNumber"])];for(j in d)if("undefined"!=typeof d[j]["@url"]&&null!=
d[j]["@url"]&&""!=d[j]["@url"]){var e=window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1);0!=d[j]["@url"].indexOf("file:///")&&0!=d[j]["@url"].indexOf("http://")&&0!=d[j]["@url"].indexOf("https://")&&(d[j]["@url"]=window.Utility.absolutizeURL(e,d[j]["@url"]));this.addFrame(d[j],a)}a++}},addFrame:function(a,c){var d=b("<div></div>");d.css("position","absolute");d.css("opacity",0);d.css("width","100%");d.css("height","100%");d.css("z-index",66);d.prependTo("#HighDefinitionContentScroller");
d=b('<iframe class="FrameEmbed"></iframe>');d.css("position","absolute");d.attr("frameborder","0");d.attr("scrolling","no");var e=this.boundary(a,c,0,!1);d.css("left",e.left+"px").css("top",e.top+"px");d.css("width",e.width+"px").css("height",e.height+"px");d.prependTo("#HighDefinitionContentScroller");d.attr("src",a["@url"]);d.css("background-color","transparent");d.css("z-index",65);var f=this;d.parent().find("div").bind("Intel"===browser.platform?"click":"tap",function(a){var d=f.my_scroll.x+window.Utility.x(a)*
(f.my_scroll.scale-f.scale_initial),d=Math.floor(d/f.my_scroll.scale)+window.Install.magnify_width*c,e=f.my_scroll.y+window.Utility.y(a)*(f.my_scroll.scale-f.scale_initial),e=Math.floor(e/f.my_scroll.scale);window.Utility.transcendEvent(b(this).parent().find("iframe").contents()[0],window.Utility.translate(a,-d,-e),"click")});this.double_tappable=!1},removeYouTubes:function(){for(var a in this.you_tube)this.you_tube[a].stopVideo();this.element.find(".YouTubeEmbed").remove();this.you_tube=[];this.you_tube_i=
0},addYouTubes:function(){if(window.Install.you_tubed){this.removeYouTubes();var a=0,b;for(b in this.spread_out)if(null!=this.spread_out[b]&&"Without"!=this.spread_out[b]["@pageNumber"]){var d=window.Install.video_embeds[parseInt(this.spread_out[b]["@pageNumber"])];for(j in d)"undefined"!=typeof d[j]["@url"]&&null!=d[j]["@url"]&&""!=d[j]["@url"]&&"undefined"!=typeof d[j]["@type"]&&"youtube"==d[j]["@type"]&&this.addYouTube(d[j],b,a);a++}}else{var e=this;window.setTimeout(function(){e.addYouTubes()},
500)}},addYouTube:function(a,c,d){d=this.boundary(a,d,0,!1);c="you_tube_paper_"+this.spread_out[c]["@pageNumber"]+"_"+d.left+"-"+d.right+"-"+d.top+"-"+d.bottom;var e=b('<div class="YouTubeEmbed"></div>');e.css("position","absolute");e.css("border","none");e.attr("id",c);e.css("left",d.left+"px").css("top",d.top+"px");e.prependTo("#HighDefinitionContentScroller");e.css("z-index",65);this.you_tube[this.you_tube_i++]=new YT.Player(c,{height:d.height,width:d.width,videoId:a["@url"]})},videosPause:function(){this.element.find(".VideoEmbed").each(function(){0<
b(this).find("video").length&&(b(this).find("video")[0].paused||b(this).find("video")[0].pause())})},addVideos:function(){var a=0,b;for(b in this.spread_out)if(null!=this.spread_out[b]&&"Without"!=this.spread_out[b]["@pageNumber"]){var d=window.Install.video_embeds[parseInt(this.spread_out[b]["@pageNumber"])];for(j in d)if("undefined"!=typeof d[j]["@url"]&&null!=d[j]["@url"]&&""!=d[j]["@url"]&&("undefined"==typeof d[j]["@type"]||"youtube"!=d[j]["@type"])){var e=window.Global.link_define_URL.substring(0,
window.Global.link_define_URL.lastIndexOf("/")+1);0!=d[j]["@url"].indexOf("file:///")&&0!=d[j]["@url"].indexOf("http://")&&0!=d[j]["@url"].indexOf("https://")&&(d[j]["@url"]=window.Utility.absolutizeURL(e,d[j]["@url"]));"undefined"!=typeof d[j]["@skin"]&&null!=d[j]["@skin"]&&""!=d[j]["@skin"]?0!=d[j]["@skin"].indexOf("file:///")&&0!=d[j]["@skin"].indexOf("http://")&&0!=d[j]["@skin"].indexOf("https://")&&(d[j]["@skin"]=window.Utility.absolutizeURL(e,d[j]["@skin"])):d[j]["@skin"]=null;var e=!1,f;for(f in window.Install.video_MIME[browser.platform])if(d[j]["@url"].toUpperCase().lastIndexOf("."+
window.Install.video_MIME[browser.platform][f])==d[j]["@url"].length-4){e=!0;break}e&&this.addVideo(d[j],a)}a++}},addVideo:function(a,c){var d=b('<div class="VideoEmbed flowplayer playful no-hover fixed-controls is-splash"></div>');d.css("position","absolute");var e=this.boundary(a,c,0,!1);d.css("left",e.left+"px").css("top",e.top+"px");d.css("width",e.width+"px").css("height",e.height+"px");d.css("z-index",65);d.prependTo("#HighDefinitionContentScroller");e=[];"MP4"==a["@url"].substring(a["@url"].lastIndexOf(".")+
1).toUpperCase()?e.push({mp4:a["@url"]}):"WEBM"==a["@url"].substring(a["@url"].lastIndexOf(".")+1).toUpperCase()?e.push({webm:a["@url"]}):"OGG"==a["@url"].substring(a["@url"].lastIndexOf(".")+1).toUpperCase()&&e.push({ogg:a["@url"]});d.flowplayer({playlist:[e]});null!=a["@skin"]?d.css("background-image","url('"+a["@skin"]+"')"):d.css("background-color","#0F0F0F")},audiosPause:function(){this.element.find(".AudioEmbed").each(function(){0<b(this).find("video").length&&(b(this).find("video")[0].paused||
b(this).find("video")[0].pause())})},addAudios:function(){0!=this.to_play.source.indexOf("file:///")&&0!=this.to_play.source.indexOf("http://")&&0!=this.to_play.source.indexOf("https://")&&(this.to_play.source=window.Utility.absolutizeURL(window.Global.viewer_URL.substring(0,window.Global.viewer_URL.lastIndexOf("/")+1),this.to_play.source));var a=0,b;for(b in this.spread_out)if(null!=this.spread_out[b]&&"Without"!=this.spread_out[b]["@pageNumber"]){var d=window.Install.audio_embeds[parseInt(this.spread_out[b]["@pageNumber"])];
for(j in d)if("undefined"!=typeof d[j]["@url"]&&null!=d[j]["@url"]&&""!=d[j]["@url"]){var e=window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1);0!=d[j]["@url"].indexOf("file:///")&&0!=d[j]["@url"].indexOf("http://")&&0!=d[j]["@url"].indexOf("https://")&&(d[j]["@url"]=window.Utility.absolutizeURL(e,d[j]["@url"]));"undefined"!=typeof d[j]["@graphics"]&&null!=d[j]["@graphics"]&&""!=d[j]["@graphics"]?0!=d[j]["@graphics"].indexOf("file:///")&&0!=d[j]["@graphics"].indexOf("http://")&&
0!=d[j]["@graphics"].indexOf("https://")&&(d[j]["@graphics"]=window.Utility.absolutizeURL(e,d[j]["@graphics"])):d[j]["@graphics"]=null;var e=!1,f;for(f in window.Install.audio_MIME[browser.platform])if(d[j]["@url"].toUpperCase().lastIndexOf("."+window.Install.audio_MIME[browser.platform][f])==d[j]["@url"].length-4){e=!0;break}e&&this.addAudio(d[j],a)}a++}},addAudio:function(a,c){var d=b('<div class="AudioEmbed flowplayer playful no-hover fixed-controls aside-time is-splash"></div>');d.css("position",
"absolute");var e=this.boundary(a,c,0,!1);d.css("left",e.left+"px").css("top",e.top+"px");if(null==a["@graphics"]||0==e.width||0==e.height)e.height=e.width=this.to_play.length;e.width<this.to_play.length?d.css("width",this.to_play.length+"px"):d.css("width",e.width+"px");d.css("height",e.height+"px");d.css("z-index",65);d.prependTo("#HighDefinitionContentScroller");var f=[];"MP3"==a["@url"].substring(a["@url"].lastIndexOf(".")+1).toUpperCase()&&f.push({mp4:a["@url"]});d.flowplayer({playlist:[f]});
null!=a["@graphics"]?d.css("background-image","url('"+a["@graphics"]+"')"):d.css("background-image","url('"+this.to_play.source+"')");d.css("background-size",e.width+"px "+e.height+"px")},addRhetorics:function(){if(window.World.highlight_show){var a=0,b;for(b in this.spread_out)null!=this.spread_out[b]&&"Without"!=this.spread_out[b]["@pageNumber"]&&(this.addRhetoric(this.spread_out[b],a),a++)}},addRhetoric:function(a,b){var d=-1,e;for(e in window.Seek.pages)window.Seek.pages[e]["@pageNumber"]==a["@pageNumber"]&&
(d=e);if(-1!=d){if("undefined"==typeof window.Seek.pages[d].words){if("undefined"==typeof a["@words"]||null==a["@words"])return;window.Install.getSearchableWordXML(a["@words"])}this.addRhetoric_wait=0;this.addRhetoric_(window.Seek.pages[d],b)}},addRhetoric_:function(a,c){if("undefined"==typeof a.words){if(this.addRhetoric_wait+=.5,!(5<this.addRhetoric_wait)){var d=this;window.setTimeout(function(){d.addRhetoric_(a,c)},500)}}else{var e=window.Utility.split(window.Seek.look_for.replace(/,/g,window.Install.preposition[0]),
window.Install.preposition);if(0!=e.length){for(var f=[],g=0;g<a.words.word.length;)if("undefined"==typeof a.words.word[g]["#text"])g++;else if(1<e.length){for(var h=!0,k=0;k<e.length;k++){if("undefined"==typeof a.words.word[g+k]){h=!1;g++;break}if(window.Utility.polish(a.words.word[g+k]["#text"].replace(/,/g,window.Install.preposition[0]),window.Install.preposition).toLowerCase()!=e[k].toLowerCase()){h=!1;g++;break}}if(h){for(k=0;k<e.length;k++){var h=Math.round(parseInt(a.words.word[g+k]["@left"])/
1E3*window.Install.magnify_width)+window.Install.magnify_width*c,l=Math.round(parseInt(a.words.word[g+k]["@right"])/1E3*window.Install.magnify_width)+window.Install.magnify_width*c,p=Math.round(parseInt(a.words.word[g+k]["@top"])/1E3*window.Install.magnify_height),m=Math.round(parseInt(a.words.word[g+k]["@bottom"])/1E3*window.Install.magnify_height);f.push({left:h,top:p,width:l-h,height:m-p})}g+=e.length}}else{k=window.Utility.polish(a.words.word[g]["#text"].replace(/,/g,window.Install.preposition[0]),
window.Install.preposition);p=k.toLowerCase().indexOf(e[0].toLowerCase());if(-1!=p){var m=parseInt(a.words.word[g]["@right"])-parseInt(a.words.word[g]["@left"]),r=window.Install.font_size+"px 'Courier New' Arial",h=Math.round(parseInt(a.words.word[g]["@left"])/1E3*window.Install.magnify_width)+window.Install.magnify_width*c,h=h+Math.round(window.Utility.measureText(k.substring(0,p),r)/window.Utility.measureText(k,r)*m/1E3*window.Install.magnify_width),l=Math.round(parseInt(a.words.word[g]["@right"])/
1E3*window.Install.magnify_width)+window.Install.magnify_width*c,l=l-Math.round(window.Utility.measureText(k.substring(p+e[0].length),r)/window.Utility.measureText(k,r)*m/1E3*window.Install.magnify_width),p=Math.round(parseInt(a.words.word[g]["@top"])/1E3*window.Install.magnify_height),m=Math.round(parseInt(a.words.word[g]["@bottom"])/1E3*window.Install.magnify_height);f.push({left:h,top:p,width:l-h,height:m-p})}g++}for(g in f)e=b('<div class="Rhetoric"></div>'),e.css("position","absolute"),h=Math.ceil(window.Seek.rhetoric.line_width/
2/this.scale_downmost),"translucent"==window.Seek.rhetoric.style?(e.css("background-color",window.Seek.rhetoric.color),e.css("opacity",.4),e.css("left",f[g].left+"px").css("top",f[g].top+"px")):"underline"==window.Seek.rhetoric.style?(e.css("border-bottom",h+"px solid "+window.Seek.rhetoric.color),e.css("opacity",.6),e.css("left",f[g].left+"px").css("top",f[g].top-h+"px")):"rectangle"==window.Seek.rhetoric.style&&(e.css("border",h+"px solid "+window.Seek.rhetoric.color),e.css("opacity",.6),e.css("left",
f[g].left-h+"px").css("top",f[g].top-h+"px")),e.css("width",f[g].width+"px").css("height",f[g].height+"px"),e.css("z-index",65),e.appendTo("#HighDefinitionContentScroller")}}},touchable:function(a){if(null==a||-1==window.Utility.x(a)||-1==window.Utility.y(a))return!1;var b=(-this.my_scroll.x+window.Utility.x(a))/this.my_scroll.scale;a=(-this.my_scroll.y+window.Utility.y(a))/this.my_scroll.scale;var d=0,e;for(e in this.spread_out)if(null!=this.spread_out[e]&&"Without"!=this.spread_out[e]["@pageNumber"]){var f=
window.Install.audio_embeds[parseInt(this.spread_out[e]["@pageNumber"])];for(j in f){var g=this.boundary(f[j],d,6,!1);if(null==f[j]["@graphics"]||0==g.width||g.width<this.to_play.length)g.right=g.left+this.to_play.length;if(b>g.left&&b<g.right&&a>g.top&&a<g.bottom)return!1}f=window.Install.video_embeds[parseInt(this.spread_out[e]["@pageNumber"])];for(j in f)if(g=this.boundary(f[j],d,6,!0),b>g.left&&b<g.right&&a>g.top&&a<g.bottom)return!1;f=window.Install.link_defines[parseInt(this.spread_out[e]["@pageNumber"])];
for(j in f)if(g=this.boundary(f[j],d,6,!1),b>g.left&&b<g.right&&a>g.top&&a<g.bottom)return!1;d++}return!0},touch:function(a){if(null!=a&&-1!=window.Utility.x(a)&&-1!=window.Utility.y(a)){this.how=!1;var b=0,d;for(d in this.spread_out)if(null!=this.spread_out[d]&&"Without"!=this.spread_out[d]["@pageNumber"]){var e=window.Install.link_defines[parseInt(this.spread_out[d]["@pageNumber"])];for(j in e)if(this.linkTouched(e[j],b,a))break;b++}}},linkTouched:function(a,c,d){var e=this,f=(-this.my_scroll.x+
window.Utility.x(d))/this.my_scroll.scale;d=(-this.my_scroll.y+window.Utility.y(d))/this.my_scroll.scale;var g=this.boundary(a,c,6,!1);if(f>g.left&&f<g.right&&d>g.top&&d<g.bottom){-1!=a["@url"].indexOf("|")&&(a["@url"]=a["@url"].substring(0,a["@url"].indexOf("|")));if(0==a["@url"].indexOf("mailto:"))b.colorbox({href:a["@url"],iframe:!0,width:"100%",height:"100%"}),window.setTimeout(function(){b.colorbox.close()},5E3);else if(0==a["@url"].indexOf("iframe:")){var h=a["@url"].substring(7);0!=h.indexOf("http://")&&
0!=h.indexOf("https://")&&(h=window.Utility.absolutizeURL(window.Global.link_define_URL.substring(0,window.Global.link_define_URL.lastIndexOf("/")+1),h));var k=a["@url"].indexOf("type=")+5,k=a["@url"].substring(k);-1!=k.indexOf("&")&&(k=k.substring(0,k.indexOf("&")));var l="",f=a["@url"].indexOf("title=");-1!=f&&(l=a["@url"].substring(f+6),-1!=l.indexOf("&")&&(l=l.substring(0,l.indexOf("&"))),l=unescape(l));if("video"==k){var p=0,k=a["@url"].indexOf("width=");-1!=k&&(p=a["@url"].substring(k+6),-1!=
p.indexOf("&")&&(p=p.substring(0,p.indexOf("&"))),p=unescape(p));var m=0,k=a["@url"].indexOf("height=");-1!=k&&(m=a["@url"].substring(k+7),-1!=m.indexOf("&")&&(m=m.substring(0,m.indexOf("&"))),m=unescape(m));window.setTimeout(function(){b.colorbox({href:h,width:0==parseInt(p)?window.Personalize.iframe_video.inner_width:Math.ceil(parseInt(p)/window.Install.client_width*108)+"%",height:0==parseInt(m)?window.Personalize.iframe_video.inner_height:Math.ceil(parseInt(m)/window.Install.client_height*113)+
"%",iframe:!0,title:l,onOpen:function(){e.element.hide()},onClosed:function(){e.element.show()}})},300)}else"image"==k?window.setTimeout(function(){b.colorbox({href:h,initialWidth:"50%",initialHeight:"30%",maxWidth:window.Personalize.iframe_image.maximal_width,maxHeight:window.Personalize.iframe_image.maximal_height,scalePhotos:!0,photo:!0,title:l,onOpen:function(){e.element.hide()},onClosed:function(){e.element.show()}})},300):window.setTimeout(function(){b.colorbox({href:h,width:window.Personalize.iframe_default.width,
height:window.Personalize.iframe_default.height,iframe:!0,title:l,onOpen:function(){e.element.hide()},onClosed:function(){e.element.show()}})},300);this.FlipAnalyzerTrack(this.spread_out[c]["@href2"],h)}else{for(k in window.Atmosphere.pages)if(f=window.Atmosphere.getPageDetail(k),null!=f&&(h=a["@url"],0!=a["@url"].indexOf("http://")&&0!=a["@url"].indexOf("https://")&&(h=window.Utility.absolutizeURL(window.Global.root_URL,"normal/"+a["@url"])),f["@href"]==h))return a={pageX:Math.round(-this.my_scroll.x/
this.my_scroll.scale),pageY:Math.round(-this.my_scroll.y/this.my_scroll.scale)},this.my_scroll.scrollTo(0,0),this.my_scroll.scale=this.scale_downmost,this.my_scroll.refresh(),c=b(":jqmData(mirage='"+window.Atmosphere.getMirageFromPage(f["@pageNumber"])+"')"),this.show(c.find(".LowResolution:first-child"),c.find(".LowResolution:last-child"),a,"comprehensive"),window.Atmosphere.goToPage(f["@pageNumber"],!1),!0;h=a["@url"];0!=h.indexOf("http://")&&0!=h.indexOf("https://")&&(h=window.Utility.absolutizeURL(window.Global.link_define_URL.substring(0,
window.Global.link_define_URL.lastIndexOf("/")+1),h));"undefined"!=typeof window.open(h,"_blank")&&this.FlipAnalyzerTrack(this.spread_out[c]["@href2"],h);this.how=!0}return!0}return!1},FlipAnalyzerTrack:function(a,c){if(null!=window.Install.FlipAnalyzer.url&&""!=window.Install.FlipAnalyzer.url){var d=this;null==window.Install.FlipAnalyzer.token?(d=this,setTimeout(function(){d.FlipAnalyzerTrack(a,c)},1E3)):b.post(window.Install.FlipAnalyzer.url+"/bClick.cgi",{key:window.Install.FlipAnalyzer.token,
rp:a,cl:c,Td:window.Utility.getCurrentDate(),tt:window.Utility.getCurrentTime()},null)}}});b(document).bind("initialize",function(a){b(b.mobile.HighDefinition.prototype.options.initSelector,a.target).HighDefinition()})})(jQuery);
(function(b,r){b.widget("mobile.FlyOver",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='FlyOver')"},my_scroll:null,descriptions:null,description:{spreading:0,discrepancy:1},hide_submenu_all:!1,picked:null,_create:function(){window.FlyOver=this;this.description.discrepancy=55/52},setUp:function(a){var c=this;this.element[0].addEventListener("touchmove",function(a){a.preventDefault()},!1);a instanceof Array?this.descriptions=a:(this.descriptions=[],this.descriptions.push(a));
this.my_scroll=new iScroll("FlyOverContent",{wheelAction:"scroll",hScroll:!1,vScroll:!0});window.Global.content_scroller.push(this.my_scroll);for(i in this.descriptions)this.descriptions[i]["@page"]=parseInt(this.descriptions[i]["@page"])-window.Install.first_page_at,b('<div data-role="Describe" class="Describe"></div>').appendTo("#FlyOverContentScroller").Describe().data("Describe").setUp(this.descriptions[i],1);b("#FlyOverContentScroller").find(".Describe").each(function(){b(this).find(".Mention").find("table").css("width",
window.World.menu.width+"px")});b("#FlyOverContentScroller").find(".Describe").each(function(){c.description.spreading+=parseInt(b(this).find(".Mention").css("height"))});b("#FlyOverContentScroller").css("height",Math.round(this.description.spreading*this.description.discrepancy)+"px");this.my_scroll.refresh()}});b(document).bind("initialize",function(a){b(b.mobile.FlyOver.prototype.options.initSelector,a.target).FlyOver()})})(jQuery);
(function(b,r){b.widget("mobile.Describe",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Describe')"},is_shown:!1,is_it_submenu:!1,indent:30,tap_i:0,_create:function(){this.is_it_submenu=this.is_shown=!1},setUp:function(a,c){if(null!=a){"undefined"!=typeof a.pagedescription&&(this.is_it_submenu=!0);4<window.Install.numbering_length&&(this.indent=60);var d='<div class="Mention"><table><tr>',d=4<window.Install.numbering_length?d+('<td width="'+Math.round(this.indent/12)+
'px"></td>'):d+('<td width="'+Math.round(this.indent/2)+'px"></td>'),d=d+('<td width="'+c*this.indent+'px"');if("-1"!=a["@page"]){for(var e=window.Install.numbering[parseInt(a["@page"])];window.Utility.measureText(e,window.Install.font_size+"px Arial")>this.indent;)e=e.substring(0,e.length-1);e.length<window.Install.numbering[parseInt(a["@page"])].length&&(e=e.substring(0,e.length-1)+b("<div>").html("&#8230;").text());d=this.is_it_submenu?d+("><b><span>"+e+"</span></b></td>"):d+("><span>"+e+"</span></td>")}else d+=
"></td>";d=this.is_it_submenu?d+("<td><b><span>"+a["@content"]+"</span></b></td>"):d+("<td><span>"+a["@content"]+"</span></td>");d=4<window.Install.numbering_length?d+('<td width="'+Math.round(this.indent/12)+'px"></td>'):d+('<td width="'+Math.round(this.indent/2)+'px"></td>');d=b(d+"</tr></table></div>");d.find("span").each(function(){b(this).bind("Intel"===browser.platform?"click":"tap",function(a){window.Utility.crossover="Describe"})});d.appendTo(this.element);d.find("span").css("margin-top",
parseInt(b(".Mention").css("height"))-2*window.Install.font_size+"px");var f=this;d.bind("Intel"===browser.platform?"click":"tap",function(c){if("Intel"===browser.platform){f.tap_i++;if(1<f.tap_i)return window.Utility.fall(c,!0);window.setTimeout(function(){f.tap_i=0},window.Global.double_tapped)}null!=window.FlyOver.picked&&b(window.FlyOver.picked).removeClass("Pick");b(this).addClass("Pick");window.FlyOver.picked=this;window.FlyOver.hide_submenu_all?f.is_it_submenu&&f.is_shown&&(f.element.children().not(".Mention").each(function(){b(this).Describe().data("Describe").is_it_submenu&&
b(this).find(".Mention").trigger("Intel"===browser.platform?"click":"tap")}),f.element.children().not(".Mention").slideUp(500,"easeInOutExpo"),f.element.children().not(".Mention").each(function(){window.FlyOver.description.spreading-=parseInt(b(this).find(".Mention").css("height"))}),b(this).find("td:nth-child(3)").addClass("IsSubMenu").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/is_sub_menu.png")+")"),f.is_shown=!1,b("#FlyOverContentScroller").css("height",
Math.round(window.FlyOver.description.spreading*window.FlyOver.description.discrepancy)+"px"),window.FlyOver.my_scroll.refresh()):f.is_it_submenu?(f.is_shown?(window.FlyOver.hide_submenu_all=!0,f.element.children().not(".Mention").each(function(){b(this).Describe().data("Describe").is_it_submenu&&b(this).find(".Mention").trigger("Intel"===browser.platform?"click":"tap")}),f.element.children().not(".Mention").slideUp(500,"easeInOutExpo"),f.element.children().not(".Mention").each(function(){window.FlyOver.description.spreading-=
parseInt(b(this).find(".Mention").css("height"))}),b(this).find("td:nth-child(3)").addClass("IsSubMenu").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/is_sub_menu.png")+")"),window.FlyOver.hide_submenu_all=!1):(f.element.children().not(".Mention").slideDown(500,"easeInOutExpo"),f.element.children().not(".Mention").each(function(){window.FlyOver.description.spreading+=parseInt(b(this).find(".Mention").css("height"))}),b(this).find("td:nth-child(3)").removeClass("IsSubMenu").css("background-image",
"none")),f.is_shown=!f.is_shown,b("#FlyOverContentScroller").css("height",Math.round(window.FlyOver.description.spreading*window.FlyOver.description.discrepancy)+"px"),window.FlyOver.my_scroll.refresh(),"Describe"==window.Utility.crossover&&(window.Utility.crossover=null,"-1"!=a["@page"]&&(window.World.conceal("*"),window.Atmosphere.goToPage(parseInt(a["@page"]),!1)))):(window.World.conceal("*"),window.Atmosphere.goToPage(parseInt(a["@page"]),!1));return window.Utility.fall(c,!0)});if("undefined"!=
typeof a.pagedescription)for(i in e=a.pagedescription,e instanceof Array||(e=[],e.push(a.pagedescription)),e)b('<div data-role="Describe" class="Describe"></div>').hide().appendTo(this.element).Describe().data("Describe").setUp(e[i],c+1),d.find("td:nth-child(3)").addClass("IsSubMenu").css("background-image","url("+window.Utility.absolutizeURL(window.Global.viewer_URL,"skin/is_sub_menu.png")+")")}}});b(document).bind("initialize",function(a){b(b.mobile.Describe.prototype.options.initSelector,a.target).Describe()})})(jQuery);
(function(b,r){b.widget("mobile.Panorama",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Panorama')"},my_scroll:null,thumbnails:null,derogate:[],celestial:{width:0,height:0},gemini:{width:0,height:0,breathe:0},shoot:null,_create:function(){window.Panorama=this;this.element[0].addEventListener("touchmove",function(a){a.preventDefault()},!1)},setUp:function(a){this.thumbnails=a;var c=[],d=[];d.source=null;d.page_number=-1;var e=0;0==window.Install.first_page_at&&(c.push({Castor:d,
Pollux:a[0]}),e=1);for(var f=Math.floor((a.length-e)/2),g=0;g<f;g++)c.push({Castor:a[e],Pollux:a[e+1]}),e+=2;e<a.length&&c.push({Castor:a[e],Pollux:d});this.my_scroll=new iScroll("PanoramaContent",{wheelAction:"scroll",hScroll:!1,vScroll:!0,onScrollEnd:function(){"Over_N_Pages"==window.Install.how_is_it_retarded&&window.Panorama.spark(-1*window.Panorama.my_scroll.y)}});window.Global.content_scroller.push(this.my_scroll);this.celestial.width=Math.floor(60*window.World.menu.width/70/4);this.celestial.height=
Math.floor(this.celestial.width*window.Install.page_height_real/window.Install.page_width_real);this.gemini.width=Math.floor(window.World.menu.width/2);this.gemini.breathe=Math.floor(8*this.celestial.height/30);this.gemini.height=this.celestial.height+2*this.gemini.breathe;b("#PanoramaContent").css("padding-top",Math.floor(this.gemini.breathe/2)+"px");if("Differentiable"==window.Install.tangent)for(g in c)this.addMirage(c[g]);else if("Integral"==window.Install.tangent)for(g=0;g<c.length;g+=2)g+1<
c.length?this.addMirage(c[g+1]):this.addMirage({Castor:d,Pollux:d}),this.addMirage(c[g]);b("#PanoramaContentScroller").css("height",Math.ceil(c.length/2)*this.gemini.height+2*this.gemini.breathe+"px");this.my_scroll.refresh();"Over_N_Pages"==window.Install.how_is_it_retarded&&this.spark(0)},spark:function(a){window.ImageManager.minimize.extinguish();for(var c=[],d=0;d<4*Math.ceil(parseInt(this.element.find(".Content").css("height"))/this.gemini.height);d++)c.push(4*Math.floor(a/this.gemini.height)+
d);a=[];for(d in this.derogate){var e=!1,f;for(f in c)if(this.derogate[d]==c[f]){e=!0;break}e&&b(":jqmData(derogate='"+this.derogate[d]+"')").Celestial().data("Celestial").rendered&&a.push(this.derogate[d])}this.derogate=[];for(d in c){this.derogate.push(c[d]);e=!0;for(f in a)if(c[d]==a[f]){e=!1;break}e&&window.ImageManager.minimize.spark(c[d])}},addMirage:function(a){var c=null;"Differentiable"==window.Install.tangent?c=b('<div class="Gemini" align="center"><table><tr><td class="Castor" align="left"></td><td class="Pollux" align="right"></td></tr></table></div>'):
"Integral"==window.Install.tangent&&(c=b('<div class="Gemini" align="center"><table><tr><td class="Pollux" align="left"></td><td class="Castor" align="right"></td></tr></table></div>'));c.css("width",this.gemini.width+"px").css("height",this.gemini.height+"px");var d=null,e=null;"Over_N_Pages"==window.Install.how_is_it_retarded?(-1!=a.Castor.page_number?(d=b('<div data-role="Celestial" class="Celestial" data-derogate="'+a.Castor.page_number+'"></div>'),d.Celestial().data("Celestial").setUp(a.Castor)):
d=b('<div data-role="Celestial" class="Celestial"></div>'),-1!=a.Pollux.page_number?(e=b('<div data-role="Celestial" class="Celestial" data-derogate="'+a.Pollux.page_number+'"></div>'),e.Celestial().data("Celestial").setUp(a.Pollux)):e=b('<div data-role="Celestial" class="Celestial"></div>')):(d=b('<div data-role="Celestial" class="Celestial"></div>'),-1!=a.Castor.page_number&&d.Celestial().data("Celestial").setUp(a.Castor),e=b('<div data-role="Celestial" class="Celestial"></div>'),-1!=a.Pollux.page_number&&
e.Celestial().data("Celestial").setUp(a.Pollux));d.css("width",this.celestial.width+"px").css("height",this.gemini.height-this.gemini.breathe+"px");e.css("width",this.celestial.width+"px").css("height",this.gemini.height-this.gemini.breathe+"px");c.find(".Castor").append(d);c.find(".Pollux").append(e);c.appendTo("#PanoramaContentScroller")}});b(document).bind("initialize",function(a){b(b.mobile.Panorama.prototype.options.initSelector,a.target).Panorama()})})(jQuery);
(function(b,r){b.widget("mobile.Celestial",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Celestial')"},it:0,rendered:!1,shrink:4,_create:function(){var a=this;this.element.bind("Intel"===browser.platform?"click":"tap",function(c){null!=window.Panorama.shoot&&(b(window.Panorama.shoot).find("canvas").css("margin-left",parseInt(b(window.Panorama.shoot).find("canvas").css("margin-left"))+2*a.shrink+"px"),b(window.Panorama.shoot).find("canvas").css("margin-top",parseInt(b(window.Panorama.shoot).find("canvas").css("margin-top"))+
Math.round(a.shrink/2)+"px"),b(window.Panorama.shoot).find("canvas").removeClass("Shoot"));b(this).find("canvas").css("margin-left",parseInt(b(this).find("canvas").css("margin-left"))-2*a.shrink+"px");b(this).find("canvas").css("margin-top",parseInt(b(this).find("canvas").css("margin-top"))-Math.round(a.shrink/2)+"px");b(this).find("canvas").addClass("Shoot");window.Panorama.shoot=this;window.World.conceal("*");window.Atmosphere.goToPage(a.it,!1);return window.Utility.fall(c,!0)})},setUp:function(a){var c=
this;this.it=a.page_number;for(var d='<table><tr><td><canvas width="'+window.Panorama.celestial.width+'px" height="'+window.Panorama.celestial.height+'px"></canvas></td></tr>',e=window.Install.numbering[this.it];window.Utility.measureText(e,window.Install.font_size+"px Arial")>window.Panorama.celestial.width;)e=e.substring(0,e.length-1);e.length<window.Install.numbering[this.it].length&&(e=e.substring(0,e.length-1)+b("<div>").html("&#8230;").text());d+='<tr><td height="'+Math.floor(window.Panorama.gemini.breathe/
2)+'px"><span>'+e+"</span></td></tr></table>";this.element.append(b(d));d={};d.source=a.source;"Over_N_Pages"==window.Install.how_is_it_retarded&&(d.page_number=a.page_number,d.shine=!1);d.callback=function(a){c.loadImageFinish(a)};window.ImageManager.minimize.push(d)},loadImageFinish:function(a){this.element.find("canvas")[0].getContext("2d").drawImage(a,0,0,window.Panorama.celestial.width,window.Panorama.celestial.height);this.rendered=!0;null!=window.Navigate&&window.Navigate.loadPanorama()},vanish:function(){this.element.find("canvas")[0].getContext("2d").clearRect(0,
0,window.Panorama.celestial.width,window.Panorama.celestial.height);this.rendered=!1}});b(document).bind("initialize",function(a){b(b.mobile.Celestial.prototype.options.initSelector,a.target).Celestial()})})(jQuery);
(function(b,r){b.widget("mobile.Library",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Library')"},my_scroll:null,archive_total:0,foreign:{width:0,height:0},issue:{width:0,height:0,breathe:0},shoot:null,_create:function(){window.Library=this;this.element[0].addEventListener("touchmove",function(a){a.preventDefault()},!1)},setUp:function(a){this.archive_total=a.length;this.my_scroll=new iScroll("LibraryContent",{wheelAction:"scroll",hScroll:!1,vScroll:!0});window.Global.content_scroller.push(this.my_scroll);
this.foreign.width=Math.floor(5*window.World.menu.width/6/3);this.foreign.height=Math.floor(this.foreign.width*window.Install.page_height_real/window.Install.page_width_real);this.issue.width=Math.floor(window.World.menu.width/3);this.issue.breathe=Math.floor(8*this.foreign.height/30);this.issue.height=this.foreign.height+2*this.issue.breathe;b("#LibraryContent").css("padding-top",this.issue.breathe+"px");for(i in a)this.addMirage(a[i]);b("#LibraryContentScroller").css("height",Math.ceil(a.length/
3)*this.issue.height+2*parseInt(b("#LibraryContent").css("padding-top"))+"px");this.my_scroll.refresh()},addMirage:function(a){var c=b('<div class="Issue" align="center"></div>');c.css("width",this.issue.width+"px").css("height",this.issue.height+"px");var d=b('<div data-role="Foreign" class="Foreign"></div>');d.css("width",this.foreign.width+"px").css("height",this.issue.height-this.issue.breathe+"px");d.Foreign().data("Foreign").setUp(a);c.append(d);c.appendTo("#LibraryContentScroller")}});b(document).bind("initialize",
function(a){b(b.mobile.Library.prototype.options.initSelector,a.target).Library()})})(jQuery);
(function(b,r){b.widget("mobile.Foreign",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Foreign')"},url:null,shrink:4,_create:function(){var a=this;this.element.bind("Intel"===browser.platform?"click":"tap",function(c){null!=window.Library.shoot&&(b(window.Library.shoot).find("canvas").css("margin-left",parseInt(b(window.Library.shoot).find("canvas").css("margin-left"))+2*a.shrink+"px"),b(window.Library.shoot).find("canvas").css("margin-top",parseInt(b(window.Library.shoot).find("canvas").css("margin-top"))+
Math.round(a.shrink/2)+"px"),b(window.Library.shoot).find("canvas").removeClass("Shoot"));b(this).find("canvas").css("margin-left",parseInt(b(this).find("canvas").css("margin-left"))-2*a.shrink+"px");b(this).find("canvas").css("margin-top",parseInt(b(this).find("canvas").css("margin-top"))-Math.round(a.shrink/2)+"px");b(this).find("canvas").addClass("Shoot");window.Library.shoot=this;window.open(a.url,"_blank");return window.Utility.fall(c,!0)})},setUp:function(a){var c=this;this.url=a.url;var d=
a.title+" ";do var d=d.substring(0,d.length-1),e=(window.Utility.realLength(d)+2)*window.Install.font_size/2;while(e>window.Library.foreign.width);d.length<a.title.length&&(d=d.substring(0,d.length-1)+"&hellip;");e='<table><tr><td><canvas width="'+window.Library.foreign.width+'px" height="'+window.Library.foreign.height+'px"></canvas></td></tr>';e+='<tr height="'+Math.floor(window.Library.issue.breathe/2)+'px"><td><span>'+d+"</span></td></tr></table>";this.element.append(b(e));d={};d.source=a.cover;
d.callback=function(a){c.loadImageFinish(a)};window.ImageManager.shelve.push(d)},loadImageFinish:function(a){this.element.find("canvas")[0].getContext("2d").drawImage(a,0,0,window.Library.foreign.width,window.Library.foreign.height)}});b(document).bind("initialize",function(a){b(b.mobile.Foreign.prototype.options.initSelector,a.target).Foreign()})})(jQuery);
(function(b,r){b.widget("mobile.Seek",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Seek')"},my_scroll:null,pages:null,look_for:"",sought:[],metaphor:[],quotation:{breathe:0,excerpt_amount:0,height:0,discrepancy:1},searching_counter:0,picked:null,inherent:!1,rhetoric:{style:"translucent",color:"#FFFF00",line_width:2},_create:function(){window.Seek=this;var a=this;this.element[0].addEventListener("touchmove",function(a){a.preventDefault()},!1);this.element.find(".Prompt input").val("");
this.element.find(".Prompt input").bind("Intel"===browser.platform?"click":"tap",function(){b(this).focus()});this.element.find(".Prompt input").change(function(){this.blur();a.searching()});b(document).bind("orientationChange",function(){a.element.find(".Content").css("height",parseInt(a.element.find(".Content").css("height"))-parseInt(a.element.find(".Prompt").css("height"))+"px")});this.clear();this.searching_counter=0;this.my_scroll=new iScroll("SeekContent",{wheelAction:"scroll",hScroll:!1,vScroll:!0,
onScrollEnd:function(){"Over_N_Pages"==window.Install.how_is_it_retarded&&window.Seek.spark(-1*window.Seek.my_scroll.y)}});window.Global.content_scroller.push(this.my_scroll);this.my_scroll.refresh();this.prepare()},prepare:function(){if(0==window.World.menu.width||0==window.World.menu.height){var a=this;window.setTimeout(function(){a.prepare()},300)}else{this.quotation.discrepancy=Math.pow(62/52,window.Panorama.celestial.width/window.Panorama.celestial.height);"Android"===browser.platform&&(this.quotation.discrepancy=
Math.pow(61/52,window.Panorama.celestial.width/window.Panorama.celestial.height));var c=Math.round(window.World.menu.height/window.World.per/1.5),d=Math.round(window.World.menu.height/window.World.per/1.5);this.element.find(".Prompt input").css("padding-left",c+"px");this.element.find(".Prompt input").css("width",Math.round(63*window.World.menu.width/70)-parseInt(this.element.find(".Prompt input").css("padding-left"))+"px");this.element.find(".Prompt input").css("height",Math.round(window.World.menu.height/
window.World.per/1.5)+"px");this.element.find(".Prompt input").css("margin-left",Math.round(3*window.World.menu.width/70)+"px").css("margin-top",Math.round(window.World.menu.height/70)+"px");var e=Math.round(d/2);this.element.find(".Prompt input").css(browser.prefix+"border-radius",e+"px "+e+"px "+e+"px "+e+"px");this.element.find(".Prompt input").css("background-size",c+"px "+d+"px");this.element.find(".Prompt input").css("background-position",e+"px");c=Math.round(parseInt(this.element.find(".Prompt input").css("width"))/
window.Install.font_size*2);this.element.find(".Prompt input").attr("maxlength",c);this.element.find(".Prompt input").attr("size",c);this.quotation.breathe=Math.round(Math.max(window.Panorama.celestial.width,window.Panorama.celestial.height)/10);this.quotation.excerpt_amount=Math.round(window.Panorama.celestial.height/(6*window.Install.font_size/5)*(window.World.menu.width-window.Panorama.celestial.width*(4<window.Install.numbering_length?2.75:2))/(6*window.Install.font_size/5/1.5));this.quotation.height=
Math.round((window.Panorama.celestial.height+this.quotation.breathe)*this.quotation.discrepancy);b("#SeekContent").css("padding-top",this.quotation.breathe+"px")}},setUp:function(a){a instanceof Array?this.pages=a:(this.pages=[],this.pages.push(a));var b=this;"Over_N_Pages"!=window.Install.how_is_it_retarded&&this.element.find(".Prompt input").bind("keydown",function(){b.searching()});null!=window.Utility.getParameter("keyword")&&this.instinctive()},extend:function(a,b){for(var d in this.pages)if(this.pages[d]["@pageID"]==
a){this.pages[d].words=b;break}},instinctive:function(){if(null!=window.Navigate){var a=this;window.setTimeout(function(){a.instinctive()},1E3)}else this.element.find(".Prompt input").val(window.Utility.getParameter("keyword")),this.element.find(".Prompt input").trigger("change"),this.inherent=!0},clear:function(){b("#SeekContentScroller").empty();b("#SeekContentScroller").height(0)},searching:function(){this.clear();this.searching_counter++;var a=this;window.setTimeout(function(){a.searchingCore()},
300)},searchingCore:function(){if(1<this.searching_counter)this.searching_counter--;else if(this.searching_counter=0,this.look_for=this.element.find(".Prompt input").val(),this.grant(),null!=this.element.find(".Prompt input").val()&&""!=this.element.find(".Prompt input").val()&&!(window.Utility.textToUTF8Byte(this.element.find(".Prompt input").val()).length<window.Personalize.search_minimal)){this.sought=[];this.metaphor=[];for(var a in this.pages)if("undefined"!=typeof this.pages[a].text){var c=
window.Utility.filterFoul(this.pages[a].text),d=c.toLowerCase().indexOf(this.look_for.toLowerCase());if(-1!=d){var e=c.substring(d,d+this.look_for.length),c=c.split(e),d=c[0].substring(c[0].length-this.quotation.excerpt_amount,c[0].length)+e+c[1].substring(0,this.quotation.excerpt_amount),d=Math.floor(this.quotation.excerpt_amount*d.length/window.Utility.realLength(d))-e.length,e={page_number:this.pages[a]["@pageNumber"],matched:e},f=0;0<c.length&&(f=c[0].length);var g=0;1<c.length&&(g=c[1].length);
for(;f+g>d;)Math.floor(d/2)<f&&f--,Math.floor(d/2)<g&&g--;0<c.length&&(e.snippet=c[0].substring(c[0].length-f,c[0].length));1<c.length&&(e.snippet_=c[1].substring(0,g));this.sought.push(e)}}c=null;for(a in this.sought)$Search="Over_N_Pages"==window.Install.how_is_it_retarded?b('<div data-role="Search" class="Search" data-metaphor="'+this.sought[a].page_number+'"></div>'):b('<div data-role="Search" class="Search"></div>'),$Search.Search().data("Search").setUp(this.sought[a]),$Search.appendTo(b("#SeekContentScroller")),
0==a&&(c=$Search);a=this.sought.length*this.quotation.height;a-=Math.floor(a/parseInt(this.element.find(".Content").css("height")))*this.quotation.breathe;a+=2*parseInt(b("#SeekContent").css("padding-top"))+parseInt(this.element.find(".Prompt input").css("height"));b("#SeekContentScroller").css("height",a+"px");this.my_scroll.scrollTo(0,0);this.my_scroll.refresh();"Over_N_Pages"==window.Install.how_is_it_retarded&&this.spark(0);this.inherent&&(null!=c&&c.trigger("Intel"===browser.platform?"click":
"tap"),b("#SearchWorld").trigger("Intel"===browser.platform?"click":"tap"),this.inherent=!1)}},grant:function(){var a=b(":jqmData(mirage='"+window.Atmosphere.current+"')");a.find(".LowResolution:first-child").LowResolution().data("LowResolution").addRhetoric();a.find(".LowResolution:last-child").LowResolution().data("LowResolution").addRhetoric()},spark:function(a){window.ImageManager.quotation.extinguish();a-=Math.floor(a/parseInt(this.element.find(".Content").css("height")))*this.quotation.breathe;
for(var c=[],d=0;d<Math.floor((a/this.quotation.height/9+1)*Math.ceil(parseInt(this.element.find(".Content").css("height"))/this.quotation.height));d++){var e=Math.floor(a/this.quotation.height)+d;e<this.sought.length&&c.push(this.sought[e].page_number)}a=[];for(d in this.metaphor){var f=!1;for(e in c)if(this.metaphor[d]==c[e]){f=!0;break}f?b(":jqmData(metaphor='"+this.metaphor[d]+"')").Search().data("Search").rendered&&a.push(this.metaphor[d]):window.Atmosphere.validatePage(this.metaphor[d])&&b(":jqmData(metaphor='"+
this.metaphor[d]+"')").Search().data("Search").vanish()}this.metaphor=[];for(d in c){this.metaphor.push(c[d]);f=!0;for(e in a)if(c[d]==a[e]){f=!1;break}f&&window.ImageManager.quotation.spark(c[d])}}});b(document).bind("initialize",function(a){b(b.mobile.Seek.prototype.options.initSelector,a.target).Seek()})})(jQuery);
(function(b,r){b.widget("mobile.Search",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Search')"},it:0,rendered:!1,_create:function(){var a=this;this.element.bind("Intel"===browser.platform?"click":"tap",function(c){null!=window.Seek.picked&&b(window.Seek.picked).removeClass("Pick");b(this).addClass("Pick");window.Seek.picked=this;window.World.conceal("*");window.Atmosphere.goToPage(a.it,!1);return window.Utility.fall(c,!0)})},setUp:function(a){this.it=parseInt(a.page_number);
var c=this,d=Math.round(window.Panorama.celestial.width/4),e=1;4<window.Install.numbering_length&&(e=4);for(var f='<table><tr><td width="'+d+'px"></td>',g=window.Utility.paragraph(window.Install.numbering[this.it],window.Install.font_size+"px Arial",d*e,"\n").split("\n"),h="",k=0;k<Math.floor(window.Panorama.celestial.height/(window.Install.font_size+4));k++)"undefined"!=typeof g[k]&&(h+=g[k]+"<br />");h=h.substring(0,h.lastIndexOf("<br />"));Math.floor(window.Panorama.celestial.height/(window.Install.font_size+
4))<g.length&&(h=h.substring(0,h.length-1)+b("<div>").html("&#8230;").text());f=f+('<td width="'+d*e+'px"><span>'+h+"</span></td>")+('<td><canvas width="'+window.Panorama.celestial.width+'px" height="'+window.Panorama.celestial.height+'px"></canvas></td>');f+='<td width="'+d+'px"></td>';f+='<td width="'+(window.World.menu.width-d*(7+e))+'px">';f+="<span>&hellip;"+a.snippet+'<font color="#FF0000"><b>'+a.matched+"</b></font>"+a.snippet_+"&hellip;</span></td>";f+='<td width="'+d+'px"></td></tr></table>';
$Quotation=b(f);$Quotation.css("margin-top",Math.round(window.Seek.quotation.breathe/2)+"px").css("margin-bottom",Math.round(window.Seek.quotation.breathe/2)+"px");this.element.append($Quotation);a={};a.source=window.Panorama.thumbnails[this.it-1].source;"Over_N_Pages"==window.Install.how_is_it_retarded&&(a.page_number=window.Panorama.thumbnails[this.it-1].page_number,a.shine=!1);a.callback=function(a){c.loadImageFinish(a)};window.ImageManager.quotation.push(a)},loadImageFinish:function(a){this.element.find("canvas")[0].getContext("2d").drawImage(a,
0,0,window.Panorama.celestial.width,window.Panorama.celestial.height);this.rendered=!0},vanish:function(){this.element.find("canvas")[0].getContext("2d").clearRect(0,0,window.Panorama.celestial.width,window.Panorama.celestial.height);this.rendered=!1}});b(document).bind("initialize",function(a){b(b.mobile.Search.prototype.options.initSelector,a.target).Search()})})(jQuery);
(function(b,r){b.widget("mobile.Tagged",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Tagged')"},my_scroll:null,identified:[],leatherette:{breathe:0,discrepancy:1},picked:null,it:null,localStorageAvailable:function(){try{return"localStorage"in window&&"undefined"!=typeof window.localStorage&&null!==window.localStorage}catch(a){return!1}},_create:function(){window.Tagged=this;if(this.localStorageAvailable()){var a=this;this.element[0].addEventListener("touchmove",function(a){a.preventDefault()},
!1);this.my_scroll=new iScroll("TaggedContent",{wheelAction:"scroll",hScroll:!1,vScroll:!0});window.Global.content_scroller.push(this.my_scroll);this.my_scroll.refresh();b("#BookmarkCastor").bind("Intel"===browser.platform?"click":"tap",function(c){-1!=b("#BookmarkCastor input").val()&&a.add(parseInt(b("#BookmarkCastor input").val()));return window.Utility.fall(c,!0)});b("#BookmarkPollux").bind("Intel"===browser.platform?"click":"tap",function(c){-1!=b("#BookmarkPollux input").val()&&a.add(parseInt(b("#BookmarkPollux input").val()));
return window.Utility.fall(c,!0)});null!=window.Anchor&&(b("#Specify").css(browser.prefix+"border-radius","5px 5px 5px 5px"),b("#Specify").find("input").bind("click",function(){b(this).focus()}),b("#Specify").find("input").keypress(function(b){13==b.which&&(this.blur(),a.specify())}),b("#Specify").find("button:first-child").bind("click",function(){a.specify()}),b("#Specify").find("button:last-child").bind("click",function(){b("#Specify").hide()}),"zh_cn"==window.Localize.language&&b("#Specify").css("width",
Math.round(10*b("#Specify").width()/9)),b("#Specify").css("left",Math.round((window.Install.client_width-parseInt(b("#Specify").css("width")))/2)+"px").css("top",Math.round(window.Install.client_height/9)+"px"))}},setUp:function(){var a=this;"undefined"==typeof window.Panorama||0==window.Panorama.celestial.height?window.setTimeout(function(){a.setUp()},300):(this.leatherette.discrepancy=Math.pow(62/52,window.Panorama.celestial.width/window.Panorama.celestial.height),"Android"===browser.platform&&
(this.leatherette.discrepancy=Math.pow(61/52,window.Panorama.celestial.width/window.Panorama.celestial.height)),this.leatherette.breathe=Math.ceil(window.Panorama.celestial.height/10),b("#TaggedContent").css("padding-top",this.leatherette.breathe+"px"),this.clear(),this.retrieval(),this.tagging())},clear:function(){b("#TaggedContentScroller").empty();b("#TaggedContentScroller").height(0)},isItIdentified:function(a){for(var b in window.Install.identified)if(window.Install.identified[b].page_number==
a)return!0;for(b in this.identified)if(this.identified[b].page_number==a)return!0;return!1},grant:function(a){if(1==window.Install.pages_per_mirage)b("#BookmarkCastor").hide(),b("#BookmarkCastor span").text(""),b("#BookmarkCastor input").val(-1),b("#BookmarkPollux").hide(),b("#BookmarkPollux span").text(window.Localize.translate("Bookmark Current Page")),b("#BookmarkPollux input").val(a),-1!=a&&(this.isItIdentified(a)||b("#BookmarkPollux").show());else if(2==window.Install.pages_per_mirage){var c=
-1,d=-1;a%2==window.Install.first_page_at?(d=a+1,d>window.Install.page_total&&(d=-1),c=a):(c=a-1,1>c&&(c=-1),d=a);b("#BookmarkCastor").hide();"Differentiable"==window.Install.tangent?b("#BookmarkCastor span").text(window.Localize.translate("Bookmark Left Page")):"Integral"==window.Install.tangent&&b("#BookmarkCastor span").text(window.Localize.translate("Bookmark Right Page"));b("#BookmarkCastor input").val(c);-1!=c&&(this.isItIdentified(c)||b("#BookmarkCastor").show());b("#BookmarkPollux").hide();
"Differentiable"==window.Install.tangent?b("#BookmarkPollux span").text(window.Localize.translate("Bookmark Right Page")):"Integral"==window.Install.tangent&&b("#BookmarkPollux span").text(window.Localize.translate("Bookmark Left Page"));b("#BookmarkPollux input").val(d);-1!=d&&(this.isItIdentified(d)||b("#BookmarkPollux").show())}},numericAscend:function(a,b){return a.page_number-b.page_number},retrieval:function(){if(this.localStorageAvailable()&&(this.identified=[],"undefined"!=typeof window.localStorage.getItem("bookmarks:"+
window.Global.OPF))){var a=window.localStorage.getItem("bookmarks:"+window.Global.OPF);if(null!=a){xx=a.split("\n");for(a=0;a<xx.length;a+=3)/^\d+$/.test(xx[a])&&this.identified.push({page_number:parseInt(xx[a]),text:xx[a+1],color:xx[a+2]});this.identified.sort(this.numericAscend)}}},put:function(){if(this.localStorageAvailable()){window.localStorage.removeItem("bookmarks:"+window.Global.OPF);var a="";for(i in this.identified)a+=this.identified[i].page_number+"\n"+this.identified[i].text+"\n"+this.identified[i].color+
"\n";try{window.localStorage.setItem("bookmarks:"+window.Global.OPF,a)}catch(b){window.Localize.alert("Please turn off your browser's Private-Browsing feature to enable local storage.")}}},add:function(a){j=this.identified.length;for(var b=this.identified.length-1;0<=b&&!(parseInt(this.identified[b].page_number)<parseInt(a));b--)parseInt(this.identified[b].page_number)>parseInt(a)&&(j=b);this.identified.splice(j,0,{page_number:parseInt(a),text:"",color:"13421772"});this.put();this.clear();this.retrieval();
this.grant(a);this.tagging()},remove:function(a){var b=-1;for(i in this.identified)if(parseInt(a)==parseInt(this.identified[i].page_number)){b=i;break}-1!=b&&(this.identified.splice(b,1),this.put(),this.clear(),this.retrieval(),this.grant(window.Atmosphere.getPageFromMirage(window.Atmosphere.current)),this.tagging())},identify:function(a){this.it=a;a="";var c="CCCCCC";for(i in this.identified)if(this.it==this.identified[i].page_number){a=this.identified[i].text;c=window.Utility.decToHexRGB(this.identified[i].color).substring(1);
break}b("#Specify").find("div:first-child").find("tr:nth-child(1)").find("td:last-child span").html(window.Install.numbering[this.it]);b("#Specify").find("div:first-child").find("tr:nth-child(2)").find("input").val(a);b("#Specify").find("div:first-child").find("tr:nth-child(3)").find("input").val(c);b("#Specify").find("div:first-child").find("tr:nth-child(3)").find("input")[0].color.fromString(c,!0);b("#Specify").show()},specify:function(){for(i in this.identified)if(this.it==this.identified[i].page_number){this.identified[i].text=
b("#Specify").find("div:first-child").find("tr:nth-child(2)").find("input").val();var a=b("#Specify").find("div:first-child").find("tr:nth-child(3)").find("input").val().toUpperCase();this.identified[i].color=window.Utility.toDecimal(a.substring(4,5)+a.substring(5,6)+a.substring(2,3)+a.substring(3,4)+a.substring(0,1)+a.substring(1,2)).toString();break}b("#Specify").hide();this.put();this.anchoring()},tagging:function(){this.clear();for(var a=1;a<=window.Install.page_total;a++){var c=!1,d;for(d in window.Install.identified)if(a==
window.Install.identified[d].page_number){$Bookmark=b('<div data-role="Bookmark" class="Bookmark"></div>');$Bookmark.Bookmark().data("Bookmark").setUp(window.Install.identified[d].page_number,!1);$Bookmark.appendTo(b("#TaggedContentScroller"));c=!0;break}if(!c)for(d in this.identified)a==this.identified[d].page_number&&($Bookmark=b('<div data-role="Bookmark" class="Bookmark"></div>'),$Bookmark.Bookmark().data("Bookmark").setUp(this.identified[d].page_number,!0),$Bookmark.appendTo(b("#TaggedContentScroller")))}d=
0;b("#BookmarkCastor").is(":visible")&&(d+=parseInt(b(".Itemize").css("height")));b("#BookmarkPollux").is(":visible")&&(d+=parseInt(b(".Itemize").css("height")));a=(window.Install.identified.length+this.identified.length)*Math.ceil((window.Panorama.celestial.height+this.leatherette.breathe)*this.leatherette.discrepancy);a-=Math.floor(a/parseInt(this.element.find(".Content").css("height")))*this.leatherette.breathe;a+=2*parseInt(b("#TaggedContent").css("padding-top"))+d;b("#TaggedContentScroller").css("height",
a+"px");this.my_scroll.refresh();this.anchoring()},anchoring:function(){if(1==window.Parameter.landscape_flipping&&window.Personalize.thick_attain&&2==window.Install.pages_per_mirage&&null!=window.Anchor){var a=window.Atmosphere.getPageFromMirage(window.Atmosphere.current),a=a-a%2;"Differentiable"==window.Install.tangent?(window.Anchor.attachLeft(a),window.Anchor.attachRight(window.Install.page_total+window.Install.first_page_at-a)):"Integral"==window.Install.tangent&&(window.Anchor.attachLeft(window.Install.page_total+
window.Install.first_page_at-a),window.Anchor.attachRight(a))}}});b(document).bind("initialize",function(a){b(b.mobile.Tagged.prototype.options.initSelector,a.target).Tagged()})})(jQuery);
(function(b,r){b.widget("mobile.Bookmark",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Bookmark')"},it:null,_create:function(){var a=this;this.element.bind("Intel"===browser.platform?"click":"tap",function(c){window.Tagged.grant(a.it);null!=window.Tagged.picked&&b(window.Tagged.picked).removeClass("Pick");b(this).addClass("Pick");window.Tagged.picked=this;window.World.conceal("*");window.Atmosphere.goToPage(a.it,!1);return window.Utility.fall(c,!0)})},setUp:function(a,
c){if(-1!=a){var d=this;if("undefined"==typeof window.Panorama||0==window.Panorama.celestial.width||0==window.Panorama.celestial.height)window.setTimeout(function(){d.setUp(a,c)},300);else{this.it=parseInt(a);var e=Math.round(window.Panorama.celestial.width/4),f=1;4<window.Install.numbering_length&&(f=4);for(var g='<table><tr><td width="'+e+'px"></td>',h=window.Utility.paragraph(window.Install.numbering[this.it],window.Install.font_size+"px Arial",e*f,"\n").split("\n"),k="",l=0;l<Math.floor(window.Panorama.celestial.height/
(window.Install.font_size+4));l++)"undefined"!=typeof h[l]&&(k+=h[l]+"<br />");k=k.substring(0,k.lastIndexOf("<br />"));Math.floor(window.Panorama.celestial.height/(window.Install.font_size+4))<h.length&&(k=k.substring(0,k.length-1)+b("<div>").html("&#8230;").text());g=g+('<td width="'+e*f+'px"><span>'+k+"</span></td>")+('<td><canvas width="'+window.Panorama.celestial.width+'px" height="'+window.Panorama.celestial.height+'px"></canvas></td>');g+='<td width="'+e+'px"></td>';g+='<td width="'+(window.World.menu.width-
e*(7+f))+'px" align="right"><div>';c&&(null!=window.Anchor&&window.Personalize.thick_attain&&(g+='<button class="Identify">'+window.Localize.translate("Identify")+"</button>&nbsp;&nbsp;&nbsp;"),g+='<button class="Remove">'+window.Localize.translate("Remove")+"</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");g+='<img align="middle" src="skin/is_sub_menu.png" />';g+='</div></td><td width="'+e+'px"></td></tr></table>';$Leatherette=b(g);$Leatherette.css("margin-top",Math.round(window.Tagged.leatherette.breathe/
2)+"px").css("margin-bottom",Math.round(window.Tagged.leatherette.breathe/2)+"px");this.element.append($Leatherette);c&&(null!=window.Anchor&&window.Personalize.thick_attain&&this.element.find(".Identify").bind("click",function(a){window.Tagged.identify(d.it);return window.Utility.fall(a,!0)}),this.element.find(".Remove").bind("Intel"===browser.platform?"click":"tap",function(){window.Tagged.remove(d.it)}),this.element.find(".Remove").parent().find("img:last-child").css("width","11px").css("height",
"14px"));this.setUp_()}}},setUp_:function(){var a=this;if(null==window.Panorama.thumbnails)window.setTimeout(function(){a.setUp_()},300);else{var b={};b.source=window.Panorama.thumbnails[this.it-1].source;b.callback=function(b){a.loadImageFinish(b)};window.ImageManager.leatherette.push(b)}},loadImageFinish:function(a){this.element.find("canvas")[0].getContext("2d").drawImage(a,0,0,window.Panorama.celestial.width,window.Panorama.celestial.height)}});b(document).bind("initialize",function(a){b(b.mobile.Bookmark.prototype.options.initSelector,
a.target).Bookmark()})})(jQuery);
(function(b,r){b.widget("mobile.PDF",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='PDF')"},whole:null,single:null,picked:null,_create:function(){window.PDF=this;var a=this;this.single=window.Global.viewer_URL;b("#PDFAll").bind("Intel"===browser.platform?"click":"tap",function(c){null!=window.Library.picked&&b(window.Library.picked).removeClass("Pick");b(this).addClass("Pick");window.Library.picked=this;window.open(a.whole,"_blank");"Android"===browser.platform&&window.Localize.alert("Please refer to your Download Manager for the PDF.");
return window.Utility.fall(c,!0)});b("#PDFCastor").bind("Intel"===browser.platform?"click":"tap",function(c){var d=window.Atmosphere.getPageDetail(parseInt(b("#PDFCastor input").val()));null!=d&&(null!=window.Library.picked&&b(window.Library.picked).removeClass("Pick"),b(this).addClass("Pick"),window.Library.picked=this,window.open(a.single+d["@href"].substring(d["@href"].lastIndexOf("/")+1,d["@href"].lastIndexOf("."))+".pdf","_blank"),"Android"===browser.platform&&window.Localize.alert("Please refer to your Download Manager for the PDF"));
return window.Utility.fall(c,!0)});b("#PDFPollux").bind("Intel"===browser.platform?"click":"tap",function(c){var d=window.Atmosphere.getPageDetail(parseInt(b("#PDFPollux input").val()));null!=d&&(null!=window.Library.picked&&b(window.Library.picked).removeClass("Pick"),b(this).addClass("Pick"),window.Library.picked=this,window.open(a.single+d["@href"].substring(d["@href"].lastIndexOf("/")+1,d["@href"].lastIndexOf("."))+".pdf","_blank"),"Android"===browser.platform&&window.Localize.alert("Please refer to your Download Manager for the PDF"));
return window.Utility.fall(c,!0)})},setUp:function(a){this.whole=a;null==this.whole&&b("#PDFAll").hide()},isItAvailable:function(a){if(null==this.single)return!1;if(window.Install.is_server_secured)return!0;a=window.Atmosphere.getPageDetail(a);if(null==a)return!1;a=this.single+a["@href"].substring(a["@href"].lastIndexOf("/")+1,a["@href"].lastIndexOf("."))+".pdf";if("http://"==a.substring(0,7)||"https://"==a.substring(0,8)){var b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
b.open("HEAD",a,!1);b.send(null);200!=b.status&&(a=null)}return null!=a?!0:!1},grant:function(a){if(null==this.single)b("#PDFCastor").hide(),b("#PDFCastor span").text(""),b("#PDFPollux").hide(),b("#PDFPollux span").text("");else if(1==window.Install.pages_per_mirage)b("#PDFCastor").hide(),b("#PDFCastor span").text(""),b("#PDFPollux input").val(a),this.isItAvailable(a)?(b("#PDFPollux").show(),b("#PDFPollux span").text(window.Localize.translate("Current Page"))):(b("#PDFPollux").hide(),b("#PDFPollux span").text(""));
else if(2==window.Install.pages_per_mirage){var c=-1,d=-1;a%2==window.Install.first_page_at?(d=a+1,d>window.Install.page_total&&(d=-1),c=a):(c=a-1,1>c&&(c=-1),d=a);-1==c?(b("#PDFCastor").hide(),b("#PDFCastor span").text("")):(b("#PDFCastor input").val(c),this.isItAvailable(c)?(b("#PDFCastor").show(),"Differentiable"==window.Install.tangent?b("#PDFCastor span").text(window.Localize.translate("Left Page")):"Integral"==window.Install.tangent&&b("#PDFCastor span").text(window.Localize.translate("Right Page"))):
(b("#PDFCastor").hide(),b("#PDFCastor span").text("")));-1==d?(b("#PDFPollux").hide(),b("#PDFPollux span").text("")):(b("#PDFPollux input").val(d),this.isItAvailable(d)?(b("#PDFPollux").show(),"Differentiable"==window.Install.tangent?b("#PDFPollux span").text(window.Localize.translate("Right Page")):"Integral"==window.Install.tangent&&b("#PDFPollux span").text(window.Localize.translate("Left Page"))):(b("#PDFPollux").hide(),b("#PDFPollux span").text("")))}}});b(document).bind("initialize",function(a){b(b.mobile.PDF.prototype.options.initSelector,
a.target).PDF()})})(jQuery);
(function(b,r){b.widget("mobile.Offline",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Offline')"},discrepancy:{div:12/7,table:19/14},toolbar_height:20,disappear:1E4,URL:null,title:null,FlipViewer_URL:"html/FlipViewer.html",_create:function(){if("Intel"===browser.platform)window.Offline=null;else{window.Offline=this;b("#Offline .Sleeve div").bind("Intel"===browser.platform?"click":"tap",function(){b("#Offline").hide()});"GalaxyS2"!=device.name&&"GalaxyS3"!=device.name&&
(this.discrepancy.div=1,this.discrepancy.table=1);"iPhone"!=device.name&&(this.toolbar_height=0);"Android"===browser.platform&&(this.FlipViewer_URL="html/FlipVieweril.html");var a=this;b(document).bind("orientationChange",function(){a.element.find(".Sleeve").css("width",window.Install.client_width+"px");a.element.find(".Scarf").css("width",window.Install.client_width+"px");a.element.find(".Sleeve").css("height",Math.ceil(window.Install.client_height/40*a.discrepancy.div)+"px");a.element.find(".Scarf").css("height",
Math.ceil(window.Install.client_height/10*a.discrepancy.table)+"px");a.element.find(".Sleeve").css("top",window.Install.client_height-parseInt(a.element.find(".Sleeve").css("height"))-parseInt(a.element.find(".Scarf").css("height"))-a.toolbar_height+"px");a.element.find(".Scarf").css("top",window.Install.client_height-parseInt(a.element.find(".Scarf").css("height"))-a.toolbar_height+"px");a.element.find(".Sleeve img").css("width",parseInt(a.element.find(".Sleeve").css("height"))+"px").css("height",
parseInt(a.element.find(".Sleeve").css("height"))+"px");a.element.find(".Sleeve img").css("margin-top","0px");a.element.find(".Sleeve img").css("margin-left",Math.floor(window.Install.client_width-1.5*parseInt(a.element.find(".Sleeve img").css("width")))+"px");a.element.find(".Scarf td:first-child").width(Math.ceil(3*window.Install.client_width/8)+"px");a.element.find(".Scarf td:last-child").width(Math.ceil(5*window.Install.client_width/8)+"px");if("GalaxyS2"==device.name||"GalaxyS3"==device.name)for(var b=
window.Install.font_size;0<b&&!(a.element.find(".Scarf td:last-child").find("span").css("font-size",b+"px"),window.Utility.realLength(a.element.find(".Scarf td:last-child").find("span").text())*b/parseInt(a.element.find(".Scarf").css("width"))*b*3.5<=parseInt(a.element.find(".Scarf").css("height")));b--);a.element.find(".Scarf img").css("width",Math.ceil(2.5*window.Install.client_width/8)+"px").css("height",Math.ceil(128*parseInt(a.element.find(".Scarf img").css("width"))/440)+"px");parseInt(a.element.find(".Scarf img").css("height"))>
Math.ceil(5*parseInt(a.element.find(".Scarf").css("height"))/6)&&(a.element.find(".Scarf img").css("height",Math.ceil(5*parseInt(a.element.find(".Scarf").css("height"))/6)),a.element.find(".Scarf img").css("width",Math.ceil(440*parseInt(a.element.find(".Scarf img").css("height"))/128)+"px"));a.element.find(".Scarf img").css("margin-top",Math.ceil((parseInt(a.element.find(".Scarf").css("height"))-parseInt(a.element.find(".Scarf img").css("height")))/2)+"px");a.logo()})}},setUp:function(a,c){this.URL=
a;this.title=c;if(!browser.offline&&null!=this.URL){b("#Offline").show();var d=this;b("#Offline .Scarf div").bind("Intel"===browser.platform?"click":"tap",function(){window.open(window.Utility.absolutizeURL(window.Global.viewer_URL,d.FlipViewer_URL)+"?zip="+d.URL+"&cover="+d.URL.substring(0,d.URL.lastIndexOf("/")+1)+"cover.jpg&booktitle="+d.title+"&locale="+window.Parameter.locale,"_blank")});window.World.offline_show=!0}this.element.find(".Scarf td:first-child").find("span").css("position","absolute");
this.element.find(".Scarf td:first-child").find("span").css("border","none");this.element.find(".Scarf td:first-child").find("span").css("color","#FFFFFF");this.element.find(".Scarf img").css("width",Math.ceil(2.5*window.Install.client_width/8)+"px").css("height",Math.ceil(128*parseInt(this.element.find(".Scarf img").css("width"))/440)+"px");this.logo();this.complete()},logo:function(){this.element.find(".Scarf td:first-child").find("span").css("left",Math.ceil(this.element.find(".Scarf img").position().left+
4*parseInt(this.element.find(".Scarf img").css("width"))/11)+"px");for(var a=3*window.Install.font_size;0<a&&!(this.element.find(".Scarf td:first-child").find("span").css("font-size",a+"px"),window.Utility.realLength(this.element.find(".Scarf td:first-child").find("span").text())*a*.65<=7*parseInt(this.element.find(".Scarf img").css("width"))/11);a--);this.element.find(".Scarf td:first-child").find("span").css("top",Math.ceil((parseInt(this.element.find(".Scarf").css("height"))-.75*parseInt(this.element.find(".Scarf td:first-child").find("span").css("height")))/
2)+"px")},complete:function(){if(null!=window.Navigate){var a=this;window.setTimeout(function(){a.complete()},1E3)}else window.setTimeout(function(){b("#Offline").hide()},this.disappear)}});b(document).bind("initialize",function(a){b(b.mobile.Offline.prototype.options.initSelector,a.target).Offline()})})(jQuery);
(function(b,r){b.widget("mobile.Curtain",b.mobile.widget,{options:{theme:null,disabled:!1,initSelector:":jqmData(role='Curtain')"},has_been_specialized:!1,client_width:0,client_height:0,_create:function(){window.Curtain=this},specialize:function(){if(!this.has_been_specialized){this.client_width=Math.max(device.width(),device.height());this.client_height=Math.min(device.width(),device.height());this.element.css("width",this.client_width+"px").css("height",this.client_height+"px");var a=this;this.element.find("img").attr("src",
window.Parameter.launch_logo);this.element.find("img").load(function(){var c=parseInt(b(this).css("width")),d=parseInt(b(this).css("height"));250<c&&(d=Math.round(250/c*d),c=250);150<d&&(c=Math.round(150/d*c),d=150);b(this).css("width",c+"px").css("height",d+"px");b(this).css("left",Math.round((a.client_width-parseInt(b(this).css("width")))/2)+"px").css("top",Math.round((a.client_height-parseInt(b(this).css("height"))-34-parseInt(a.element.find("span").css("height")))/2)+"px");b(this).show();a.element.find("span").css("left",
Math.round((a.client_width-parseInt(a.element.find("span").css("width")))/2)+"px").css("top",parseInt(b(this).css("top"))+parseInt(b(this).css("height"))+34+"px");a.element.find("span").show()});this.has_been_specialized=!0}}});b(document).bind("initialize",function(a){b(b.mobile.Curtain.prototype.options.initSelector,a.target).Curtain()})})(jQuery);